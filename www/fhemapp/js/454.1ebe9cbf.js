"use strict";(self["webpackChunkfhemapp"]=self["webpackChunkfhemapp"]||[]).push([[454],{454:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var i=s(7179),a=s(3385),l=s(5223),n=s(4944),o=s(4437),r=s(4192),h=s(5057),c=s(1302),u=s(5294),m=s(2059),d=s(5234),v=s(9953),f=function(){var t=this,e=t._self._c;return e(o.Z,{class:t.setup.size},[e(a.Z,{attrs:{dark:this.$vuetify.theme.dark,color:"secondary"}},[e(c.Z,{attrs:{height:"7",value:t.vals.status.level,color:t.vals.status.color,"background-color":"secondary darken-1"}}),e(l.EB,{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.title)+" "),e(d.Z),t.app.options.debugMode?e("jsonList",{attrs:{item:t.item}}):t._e(),e(i.Z,{attrs:{small:"",icon:""},on:{click:t.expand}},[e(h.Z,{attrs:{small:""}},[t._v(" "+t._s(t.maxIcon)+" ")])],1)],1),e(r.Z),e(l.ZB,[e(u.Z,{attrs:{align:"center"}},[e(o.Z,{staticClass:"col-3",attrs:{align:"center"}},[t.expanded?t._e():e(i.Z,{attrs:{icon:""},on:{click:function(e){return t.setVolume("D")}}},[e(h.Z,{attrs:{large:""}},[t._v(" "+t._s(t.leftIcon)+" ")])],1),t.expanded?e(i.Z,{attrs:{icon:"",disabled:t.prevDisabled},on:{click:function(e){return t.setPlayer("Previous")}}},[e(h.Z,{attrs:{large:""}},[t._v(" "+t._s(t.prevIcon)+" ")])],1):t._e()],1),e(r.Z,{attrs:{vertical:""}}),e(o.Z,{attrs:{align:"center"}},[e(i.Z,{attrs:{icon:""},on:{click:function(e){return t.setPlay()}}},[e(h.Z,{attrs:{large:""}},[t._v(" "+t._s(t.playIcon)+" ")])],1)],1),e(r.Z,{attrs:{vertical:""}}),e(o.Z,{staticClass:"col-3",attrs:{align:"center"}},[t.expanded?t._e():e(i.Z,{attrs:{icon:""},on:{click:function(e){return t.setVolume("U")}}},[e(h.Z,{attrs:{large:""}},[t._v(" "+t._s(t.rightIcon)+" ")])],1),t.expanded?e(i.Z,{attrs:{icon:"",disabled:t.nextDisabled},on:{click:function(e){return t.setPlayer("Next")}}},[e(h.Z,{attrs:{large:""}},[t._v(" "+t._s(t.nextIcon)+" ")])],1):t._e()],1)],1)],1),t.expanded?e(r.Z):t._e(),t.expanded?e(l.ZB,[e(u.Z,{attrs:{align:"center"}},[e(o.Z,[e(m.Z,{attrs:{"hide-details":"","thumb-label":"","thumb-size":"48",color:"success"},on:{change:t.setVolume},scopedSlots:t._u([{key:"thumb-label",fn:function({value:s}){return[e("div",{staticClass:"text-h6"},[t._v(" "+t._s(s)+" ")])]}},{key:"prepend",fn:function(){return[e(h.Z,{on:{click:function(e){return t.setMute()}}},[t._v(" "+t._s(t.volumeIcon)+" ")])]},proxy:!0}],null,!1,3073845272),model:{value:t.vals.volume,callback:function(e){t.$set(t.vals,"volume",e)},expression:"vals.volume"}})],1)],1),e(u.Z,{attrs:{align:"center"}},[e(o.Z,{staticClass:"col-4"}),e(o.Z,{staticClass:"col-4 text-h6",attrs:{align:"center"}},[t._v(" "+t._s(t.vals.trackPosition)+" ")]),e(o.Z,{staticClass:"col-4",attrs:{align:"center"}},[t._v(" "+t._s(t.vals.tracks)+" ")])],1)],1):t._e(),t.expanded&&t.vals.zones.length>0?e(r.Z):t._e(),t.expanded&&t.vals.zones.length>0?e(l.ZB,[e(u.Z,[e(o.Z,t._l(t.vals.zones,(function(s){return e("span",{key:s},[e(n.Z,{staticClass:"mr-2",attrs:{small:""}},[t._v(t._s(s))])],1)})),0)],1)],1):t._e(),e(r.Z),e(v.Z,{attrs:{color:"secondary darken-1"}},[e(h.Z,{staticClass:"ml-0"},[t._v(" "+t._s(t.vals.info.left1Icon)+" ")]),e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.info.left1Text)+" ")]),e(h.Z,{staticClass:"ml-2"},[t._v(" "+t._s(t.vals.info.left2Icon)+" ")]),e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.info.left2Text)+" ")]),e(d.Z),e(h.Z,[t._v(" "+t._s(t.vals.info.mid1Icon)+" ")]),e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.info.mid1Text)+" ")]),e(h.Z,{staticClass:"ml-2"},[t._v(" "+t._s(t.vals.info.mid2Icon)+" ")]),e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.info.mid2Text)+" ")]),e(d.Z),e(h.Z,[t._v(" "+t._s(t.vals.info.right1Icon)+" ")]),e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.info.right1Text)+" ")]),e(h.Z,{staticClass:"ml-2 mr-0"},[t._v(" "+t._s(t.vals.info.right2Icon)+" ")]),e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.info.right2Text)+" ")])],1)],1)],1)},p=[],g=s(8813),_={components:{jsonList:g.Z},props:{item:{type:Object,default:()=>({name:"sonos"})}},data:()=>({name:"sonos",app:{options:{debugMode:!1}},setup:{size:"col-12 col-sm-6 col-md-4 col-lg-4",status:{bar:["transportState:PLAYING:100:success","transportState::0:success"],error:[]},info:{left1:["Mute:1::mdi-volume-off","transportState:PLAYING::mdi-play","transportState:::mdi-pause"],left2:["currentArtist:$:%s","currentSource::%s"],mid1:[],mid2:[],right1:[],right2:["currentTitle::%s"]}},vals:{status:{color:"",level:0},info:{left1Icon:"",left1Text:"",left2Icon:"",left2Text:"",mid1Icon:"",mid1Text:"",mid2Icon:"",mid2Text:"",right1Icon:"",right1Text:"",right2Icon:"",right2Text:""},title:"",mainState:"",play:!1,volume:0,volumeChanged:!1,mute:!1,trackPosition:"",zones:[],tracks:"",playInfo1:"",playInfo2:""},leftIcon:"mdi-minus",playIcon:"mdi-play",rightIcon:"mdi-plus",maxIcon:"mdi-arrow-expand",expanded:!1,prevIcon:"mdi-skip-previous",prevDisabled:!0,nextIcon:"mdi-skip-next",nextDisabled:!0,volumeIcon:"mdi-volume-high",pendingClick:0}),watch:{item:{immediate:!0,deep:!0,handler(t){let e=this.$fhem.getEl(t,"Readings","transportState","Value"),s=this.$fhem.getEl(t,"Readings","nextTrackHandle","Value")||"|",i=this.$fhem.getEl(t,"Readings","Volume","Value"),a=this.$fhem.getEl(t,"Readings","Mute","Value"),l=this.$fhem.getEl(t,"Readings","currentStreamAudio","Value"),n=this.$fhem.getEl(t,"Readings","currentTrack","Value"),o=this.$fhem.getEl(t,"Readings","numberOfTracks","Value"),r=this.$fhem.getEl(t,"Readings","ZoneGroupNameDetails","Value"),h=this.$fhem.getEl(t,"Attributes","alias")||t.Name;this.vals.title=this.$fhem.getEl(t,"Options","name")||h,r&&(this.vals.title+=" (gruppiert)"),this.vals.zones=r.split(" + ").filter(Boolean),this.prevDisabled=!(s.split("|")[0].length>0),this.nextDisabled=!(s.split("|")[1].length>0),this.vals.trackPosition=this.$fhem.getEl(t,"Readings","currentTrackPositionSimulated","Value"),this.vals.volumeChanged&&this.vals.volume===parseInt(i)&&(this.vals.volumeChanged=!1),this.vals.volumeChanged||(this.vals.volume=parseInt(i)),this.vals.mute="1"===a,this.volumeIcon=this.vals.mute?"mdi-volume-mute":"mdi-volume-high",this.vals.tracks="0"===l?n+" von "+o:"",this.vals.play="PLAYING"===e,this.playIcon=this.vals.play?"mdi-pause":"mdi-play",this.setValues()}}},mounted(){this.app.options=this.$fhem.app.options},methods:{setValues(){let t=this.$fhem.handleVals(this.item,this.setup.status.bar),e=this.$fhem.handleVals(this.item,this.setup.status.error),s=this.$fhem.handleVals(this.item,this.setup.info.left1),i=this.$fhem.handleVals(this.item,this.setup.info.left2),a=this.$fhem.handleVals(this.item,this.setup.info.mid1),l=this.$fhem.handleVals(this.item,this.setup.info.mid2),n=this.$fhem.handleVals(this.item,this.setup.info.right1),o=this.$fhem.handleVals(this.item,this.setup.info.right2);this.vals.status.level=t[0]||"100",this.vals.status.color=t[1]||"success",this.vals.status.invert=!!t[2],this.vals.info.left1Icon=s[1]||"",this.vals.info.left1Text=s[0]||"",this.vals.info.left2Icon=i[1]||"",this.vals.info.left2Text=i[0]||"",this.vals.info.mid1Icon=a[1]||"",this.vals.info.mid1Text=a[0]||"",this.vals.info.mid2Icon=l[1]||"",this.vals.info.mid2Text=l[0]||"",this.vals.info.right1Icon=n[1]||"",this.vals.info.right1Text=n[0]||"",this.vals.info.right2Icon=o[1]||"",this.vals.info.right2Text=o[0]||"",e.length>0?(this.vals.status.level=e[0]||"100",this.vals.status.color=e[1]||"error",this.vals.main.text=e[2]||"Fehler",this.isActive=!1):this.isActive=!0},sendCmd(t,e){e?(this.pendingClick&&(clearTimeout(this.pendingClick),this.pendingClick=0),this.pendingClick=setTimeout((()=>{this.$fhem.request(t)}),1e3)):this.$fhem.request(t)},setVolume(t){this.vals.volumeChanged=!0;let e=this.vals.zones.length>0?" GroupVolume":" Volume";"D"!=t&&"U"!=t&&(t=" "+t);let s="set "+this.item.Name+e+t;this.sendCmd(s)},setPlayer(t){let e="set "+this.item.Name+" "+t;this.sendCmd(e)},setPlay(){let t="set "+this.item.Name+(this.vals.play?" Pause":" Play");this.sendCmd(t)},setMute(){let t="set "+this.item.Name+(this.vals.mute?" Mute 0":" Mute 1");this.sendCmd(t)},expand(){this.expanded?(this.expanded=!1,this.maxIcon="mdi-arrow-expand"):(this.expanded=!0,this.maxIcon="mdi-arrow-collapse")}}},x=_,Z=s(1001),I=(0,Z.Z)(x,f,p,!1,null,null,null),k=I.exports}}]);