"use strict";(self["webpackChunkfhemapp"]=self["webpackChunkfhemapp"]||[]).push([[234],{9044:function(t,s,e){e.d(s,{Z:function(){return g}});var i=e(7179),a=e(3385),l=e(5223),n=e(4944),o=e(9789),h=e(5057),r=e(5234),m=function(){var t=this,s=t._self._c;return s("div",{staticClass:"text-center"},["zzz"!=t.item.Options.sortby?s(n.Z,{attrs:{small:"",color:"secondary"}},[s(h.Z,{attrs:{left:""}},[t._v(" mdi-sort-ascending ")]),t._v(" "+t._s(t.item.Options.sortby)+" ")],1):t._e(),s(i.Z,{attrs:{href:t.toFhem(),target:"_blank",small:"",icon:""}},[s(h.Z,{attrs:{small:""}},[t._v(" mdi-link ")])],1),s(o.Z,{attrs:{"max-width":"90%",scrollable:""},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:a}){return[s(i.Z,t._g(t._b({attrs:{small:"",icon:""}},"v-btn",a,!1),e),[s(h.Z,{attrs:{small:""}},[t._v(" mdi-code-json ")])],1)]}}]),model:{value:t.dialog,callback:function(s){t.dialog=s},expression:"dialog"}},[s(a.Z,{staticClass:"secondary lighten-1"},[s(l.EB,{staticClass:"secondary"},[s(i.Z,{attrs:{icon:""},on:{click:function(s){t.deep=t.deep>1?1:5}}},[s(h.Z,[t._v("mdi-file-tree-outline")])],1),s(r.Z),t._v(" "+t._s(t.item.Name)+" "),s(r.Z),s(i.Z,{attrs:{icon:""},on:{click:function(s){t.dialog=!1}}},[s(h.Z,[t._v("mdi-close")])],1)],1),s(l.ZB,[s("div",{ref:"jsonContent",staticClass:"select"},[s("vue-json-pretty",{attrs:{"show-line":!1,deep:t.deep,data:t.item}})],1)])],1)],1)],1)},u=[],c=e(4566),d=e.n(c),p={name:"JsonList",props:{item:{type:Object,default:()=>({name:"json"})}},data(){return{dialog:!1,deep:1}},components:{VueJsonPretty:d()},methods:{toFhem(){let t=this.$fhem.createURL([{param:"detail",value:this.item.Name}]);return t}}},f=p,v=e(1001),_=(0,v.Z)(f,m,u,!1,null,"4fc9ba56",null),g=_.exports},8109:function(t,s,e){e.r(s),e.d(s,{default:function(){return b}});var i=e(7179),a=e(3385),l=e(5223),n=e(4437),o=e(9789),h=e(4192),r=e(5057),m=e(1302),u=e(5294),c=e(5234),d=e(9953),p=function(){var t=this,s=t._self._c;return s(n.Z,{class:t.setup.size},[s(a.Z,{attrs:{dark:this.$vuetify.theme.dark,color:"secondary"}},[s(m.Z,{attrs:{height:"7",value:t.getLevel,color:t.vals.status.color,"background-color":"secondary darken-1"}}),s(l.EB,{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.title)+" "),s(c.Z),t.app.options.debugMode?s("jsonList",{attrs:{item:t.item}}):t._e()],1),s(h.Z),t.item.Options.status.isActive?t._e():s("div",[s(l.ZB,[s(u.Z,{attrs:{align:"center"}},[s(n.Z,{attrs:{align:"center"}},[s("div",{staticClass:"headline font-weight-bold"},[t._v(" "+t._s(t.item.Options.status.error)+" ")])])],1)],1),s(h.Z)],1),t.item.Options.status.isActive?s("div",[s(l.Qq,[t._v(" "+t._s(t.vals.subTitle)+" ")]),s(l.ZB,[s(u.Z,t._l(t.vals.list,(function(e){return s(n.Z,{key:e.name,staticClass:"col-12 col-md-4 col-lg-4"},[s("div",{staticClass:"text-truncate"},[t._v(" "+t._s(e.name)+" ")]),e.isBar?s(m.Z,{attrs:{height:"7",value:e.value,color:e.color,min:e.min,max:e.max,"background-color":"secondary lighten-4"}}):t._e(),s("div",[t._v(t._s(e.subText))])],1)})),1)],1),t.setup.fhemBtns?s(l.h7,[s(i.Z,{staticClass:"mr-2",on:{click:function(s){return t.goTo()}}},[s(r.Z,[t._v("mdi-format-list-bulleted")])],1),s(c.Z),s(i.Z,{attrs:{disabled:!t.update},on:{click:t.fhemUpdate}},[t._v(" "+t._s(t.updateText)+" ")]),s(i.Z,{attrs:{disabled:!t.restart},on:{click:t.fhemRestart}},[t._v(" "+t._s(t.$t("templates.sysmon.restartBtn"))+" ")])],1):t._e()],1):t._e(),s(h.Z),s(d.Z,{attrs:{color:"secondary darken-1"}},[s(r.Z,{staticClass:"ml-0"},[t._v(" "+t._s(t.vals.info.left1Icon)+" ")]),t._v(t._s(t.vals.info.left1Text)+" "),s(r.Z,{staticClass:"ml-2"},[t._v(" "+t._s(t.vals.info.left2Icon)+" ")]),t._v(t._s(t.vals.info.left2Text)+" "),s(c.Z),s(r.Z,[t._v(t._s(t.vals.info.mid1Icon))]),t._v(t._s(t.vals.info.mid1Text)+" "),s(r.Z,{staticClass:"ml-2"},[t._v(" "+t._s(t.vals.info.mid2Icon)+" ")]),t._v(t._s(t.vals.info.mid2Text)+" "),s(c.Z),s(r.Z,[t._v(t._s(t.vals.info.right1Icon))]),t._v(t._s(t.vals.info.right1Text)+" "),s(r.Z,{staticClass:"ml-2 mr-0"},[t._v(" "+t._s(t.vals.info.right2Icon)+" ")]),t._v(t._s(t.vals.info.right2Text)+" ")],1),s(o.Z,{attrs:{"max-width":"420px"},model:{value:t.updateDialog,callback:function(s){t.updateDialog=s},expression:"updateDialog"}},[s(a.Z,{attrs:{color:"secondary lighten-2"}},[s(l.EB,[t._v(" "+t._s(t.$t("templates.sysmon.updateDialog.header"))+" "),s(c.Z),s(i.Z,{attrs:{icon:"",small:""},on:{click:function(s){t.updateDialog=!1}}},[s(r.Z,[t._v("mdi-close")])],1)],1),s(l.ZB,[t._v(" "+t._s(t.$t("templates.sysmon.updateDialog.text"))+" ")]),s(l.h7,[s(c.Z),s(i.Z,{on:{click:function(s){return t.fhemRestart()}}},[t._v(" "+t._s(t.$t("templates.sysmon.updateDialog.restartBtn"))+" ")])],1)],1)],1)],1)],1)},f=[],v=(e(7658),e(9044)),_={components:{jsonList:v.Z},props:{item:{type:Object,default:()=>({name:"sysmon"})}},data:()=>({name:"sysmon",app:{options:{updateProcess:!1,debugMode:!1}},setup:{size:"col-12 col-sm-12 col-md-6 col-lg-6",status:{bar:[],error:[],min:0,max:100},subTitle:[],main:[],fhemBtns:!0,info:{left1:[],left2:[],mid1:[],mid2:[],right1:[],right2:[]}},vals:{title:"",subTitle:"",status:{level:0,color:"success"},list:[],info:{left1Icon:"",left1Text:"",left2Icon:"",left2Text:"",mid1Icon:"",mid1Text:"",mid2Icon:"",mid2Text:"",right1Icon:"",right1Text:"",right2Icon:"",right2Text:""}},restart:!0,update:!0,updateText:"",updateDialog:!1}),computed:{getLevel(){let t=100/(this.setup.status.max-this.setup.status.min),s=(this.vals.status.level-this.setup.status.min)*t;return this.vals.status.invert?100-s:s}},watch:{item:{immediate:!0,deep:!0,handler(t){let s=this.$fhem.getEl(t,"Attributes","alias")||t.Name;this.vals.title=this.$fhem.getEl(t,"Options","name")||s,this.setValues(),this.doList()}},setup:{deep:!0,handler(){this.setValues(),this.doList()}},"app.options.updateProcess"(t){t||(this.updateDialog=!0,this.updateText=this.$t("templates.sysmon.updateBtn[1]"),this.restart=!0)}},mounted(){this.app.options=this.$fhem.app.options,this.fhemUpdateCheck();let t=this.$fhem.getEl(this.item,"Options","setup","size"),s=this.$fhem.getEl(this.item,"Options","setup","subTitle"),e=this.$fhem.getEl(this.item,"Options","setup","fhemBtns"),i=this.$fhem.getEl(this.item,"Options","setup","status"),a=this.$fhem.getEl(this.item,"Options","setup","main"),l=this.$fhem.getEl(this.item,"Options","setup","info");t&&(this.setup.size=t),s&&(this.setup.subTitle=s),i&&Object.assign(this.setup.status,i),a&&Object.assign(this.setup.main,a),l&&Object.assign(this.setup.info,l),this.setup.fhemBtns=e},methods:{setValues(){let t=this.$fhem.handleVals(this.item,this.setup.status.bar),s=this.$fhem.handleVals(this.item,this.setup.status.error),e=this.$fhem.handleVals(this.item,this.setup.subTitle),i=this.$fhem.handleVals(this.item,this.setup.info.left1),a=this.$fhem.handleVals(this.item,this.setup.info.left2),l=this.$fhem.handleVals(this.item,this.setup.info.mid1),n=this.$fhem.handleVals(this.item,this.setup.info.mid2),o=this.$fhem.handleVals(this.item,this.setup.info.right1),h=this.$fhem.handleVals(this.item,this.setup.info.right2);this.vals.status.level=t[0]||"100",this.vals.status.color=t[1]||"success",this.vals.subTitle=e[0]||"",this.vals.info.left1Icon=i[1]||"",this.vals.info.left1Text=i[0]||"",this.vals.info.left2Icon=a[1]||"",this.vals.info.left2Text=a[0]||"",this.vals.info.mid1Icon=l[1]||"",this.vals.info.mid1Text=l[0]||"",this.vals.info.mid2Icon=n[1]||"",this.vals.info.mid2Text=n[0]||"",this.vals.info.right1Icon=o[1]||"",this.vals.info.right1Text=o[0]||"",this.vals.info.right2Icon=h[1]||"",this.vals.info.right2Text=h[0]||"",s.length>0&&(this.vals.status.level=s[0]||"100",this.vals.status.color=s[1]||"error")},doList(){for(var t of this.setup.main){let s=this.$fhem.handleVals(this.item,t.name),e=this.$fhem.handleVals(this.item,t.bar),i=this.$fhem.handleVals(this.item,t.subText),a=this.vals.list.map((t=>t.name)).indexOf(s[0]||""),l={name:s[0]||"",isBar:e.length>0,value:e[0]||0,color:e[1]||"success",min:e[2]||0,max:e[3]||100,subText:i[0]||""};l.isBar&&"success"!=l.color&&(this.vals.status.color=l.color),-1!=a?this.vals.list.splice(a,1,l):this.vals.list.push(l)}},fhemRestart(){this.restart=!1,this.updateDialog=!1,this.$fhem.request({param:"cmd",value:"shutdown restart"})},async fhemUpdateCheck(){let t=new Promise(((t,s)=>{this.restart=!1,this.update=!1,this.updateText=this.$t("templates.sysmon.updateBtn[0]"),this.$fhem.checkUpdate().then((s=>{s?(this.updateText=this.$t("templates.sysmon.updateBtn[2]"),this.update=!0):this.updateText=this.$t("templates.sysmon.updateBtn[1]"),t(s)})).catch((t=>{this.$fhem.log({lvl:1,msg:"Update check failed.",meta:t}),s()})).finally((()=>{this.restart=!0}))}));return t},fhemUpdate(){this.restart=!1,this.update=!1,this.updateText=this.$t("templates.sysmon.updateBtn[3]"),this.app.options.updateProcess=!0,this.$fhem.request({param:"cmd",value:"update"})},goTo(){this.$router.push("syslog")}}},g=_,Z=e(1001),x=(0,Z.Z)(g,p,f,!1,null,null,null),b=x.exports}}]);