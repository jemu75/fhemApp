import{u as J,c as k,r as h,o as c,b as N,s as ee,t as $,k as w,a as E,w as m,j as B,x as we,F as W,e as x,y as xe,f as Q,p as de,d as ve,l as Ce,z as ne,A as ae,B as Ee,C as Se,q as re,D as ye,E as ke,G as Ae,m as be,H as Me,I as Te,h as Z,J as Ve,K as Le,i as je,L as Ne,M as $e,N as Re}from"./index-22bf9652.js";const Ue={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object,height:String},setup(e){const t=e,n=J(),i=k(()=>n.handleDefs(t.el.text,["text","format"],["",!t.el.text2&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),s=k(()=>n.handleDefs(t.el.text2,["text","format"],["",t.el.text&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),l=k(()=>n.handleDefs(t.el.text3,["text","format"],["","text-caption"])),u=k(()=>{let a=n.handleDefs(t.el.icon,["icon","color","size"],["","","x-large"]);return a.icon&&(a.icon=n.getIcon(a.icon,t.iconmap)),a}),r=k(()=>{let a=n.handleDefs(t.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return a.level=Math.round((a.level-a.min)/(a.max-a.min)*100),a.reverse=!!a.reverse,a});return(a,o)=>{const d=h("v-icon"),b=h("v-progress-circular"),S=h("v-progress-linear");return c(),N(W,null,[e.el.text?(c(),N("div",{key:0,class:ee(i.value.format)},$(i.value.text),3)):w("",!0),e.el.icon?(c(),E(d,{key:1,color:u.value.color,size:u.value.size},{default:m(()=>[B($(u.value.icon),1)]),_:1},8,["color","size"])):w("",!0),e.el.status&&!r.value.linear?(c(),E(b,{key:2,width:"4",modelValue:r.value.level,"onUpdate:modelValue":o[0]||(o[0]=D=>r.value.level=D),color:r.value.color,reverse:r.value.reverse},null,8,["modelValue","color","reverse"])):w("",!0),e.el.status&&r.value.linear?(c(),E(S,{key:3,height:"7",rounded:"",modelValue:r.value.level,"onUpdate:modelValue":o[1]||(o[1]=D=>r.value.level=D),color:r.value.color,reverse:r.value.reverse},null,8,["modelValue","color","reverse"])):w("",!0),we("div",{class:ee(e.el.text2?s.value.format:l.value.format)},[e.el.text2?(c(),N("span",{key:0,class:ee(s.value.format)},$(s.value.text),3)):w("",!0),e.el.text3?(c(),N("span",{key:1,class:ee(l.value.format)},$(l.value.text),3)):w("",!0)],2)],64)}}},Fe={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),i=k(()=>{let a=n.handleDefs(t.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return a.icon&&(a.icon=n.getIcon(a.icon,t.iconmap)),a}),s=k(()=>{let a=n.handleDefs(t.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return a.level=Math.round((a.level-a.min)/(a.max-a.min)*100),a.reverse=!!a.reverse,a}),l={timer:!1,long:!1};function u(a){let o=[],d=a.cmd;if(a.type==="cmd"){for(const b of t.devices)o=b.split(":"),RegExp(o[0]).test(d)&&(d=d.replace(o[0],o[1]));n.request("text",d)}a.type==="route"&&xe.push({name:"devices",params:{view:a.cmd},query:xe.currentRoute.value.query}),a.type==="url"&&window.open(a.cmd,"_self")}function r(a){let o=n.handleDefs(t.el.click,["cmd","type"],["","cmd"]),d=n.handleDefs(t.el.longClick,["cmd","type"],["","cmd"]),b=n.handleDefs(t.el.longRelease,["cmd","type"],["","cmd"]);(a==="touchStart"||a==="mouseStart")&&(l.timer=setTimeout(()=>{l.long=!0,d.cmd&&u(d)},1e3)),(a==="touchEnd"||a==="mouseEnd")&&(l.long?b.cmd&&u(b):o.cmd&&u(o),clearTimeout(l.timer),l.long=!1)}return(a,o)=>{const d=h("v-progress-linear"),b=h("v-icon"),S=h("v-btn");return c(),N(W,null,[e.el.status?(c(),E(d,{key:0,height:"4",modelValue:s.value.level,"onUpdate:modelValue":o[0]||(o[0]=D=>s.value.level=D),color:s.value.color,reverse:s.value.reverse},null,8,["modelValue","color","reverse"])):w("",!0),x(S,{icon:"",variant:i.value.variant,disabled:i.value.disabled,color:i.value.color,onTouchstart:o[1]||(o[1]=D=>r("touchStart")),onTouchend:o[2]||(o[2]=D=>r("touchEnd")),onMousedown:o[3]||(o[3]=D=>r("mouseStart")),onMouseup:o[4]||(o[4]=D=>r("mouseEnd")),class:"my-2"},{default:m(()=>[x(b,{size:"large"},{default:m(()=>[B($(i.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},Pe={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),i=Q();function s(a){i.value=a}const l=k(()=>{let a=n.handleDefs(t.el.slider,["cmd","current","color","min","max","steps","reverse","size","vertical"],["",0,"",0,100,10,!1,4,!1]);return/%v/.test(a.current)&&(a.current=a.current.replace("%v",i.value)),s(a.current),a});let u=null;function r(a){let o=l.value.cmd,d=/\./.exec(l.value.steps),b=0,S=[];d&&(b=l.value.steps.slice(d.index).length-1),o=o.replace("%v",a.toFixed(b));for(const D of t.devices)S=D.split(":"),RegExp(S[0]).test(o)&&(o=o.replace(S[0],S[1]));clearTimeout(u),u=setTimeout(()=>{n.request("text",o)},500)}return(a,o)=>{const d=h("v-slider");return c(),E(d,{modelValue:i.value,"onUpdate:modelValue":[o[0]||(o[0]=b=>i.value=b),o[1]||(o[1]=b=>r(b))],min:l.value.min,max:l.value.max,step:l.value.steps,reverse:l.value.reverse,direction:l.value.vertical?"vertical":"horizontal","track-size":l.value.size,color:l.value.color,"hide-details":"","thumb-label":""},null,8,["modelValue","min","max","step","reverse","direction","track-size","color"])}}},He={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),i=Q(!1),s=k(()=>n.handleDefs(t.el.image,["source","height"],["",null]));return(l,u)=>{const r=h("v-skeleton-loader"),a=h("v-img");return c(),N(W,null,[i.value?w("",!0):(c(),E(r,{key:0,type:"image"})),x(a,{src:s.value.source,height:s.value.height,onLoad:u[0]||(u[0]=o=>i.value=!0)},null,8,["src","height"])],64)}}},Ie={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),i=k(()=>{let l=[],u=n.handleDefs(t.el.menu,["name","cmd"],["",""],!0,","),r={};for(const a of u)r={name:/:/.test(a.name)?a.name.split(":")[0]:a.name,cmd:/:/.test(a.cmd)?a.cmd.split(":")[1]:a.cmd},l.push(r);return l});function s(l){let u=[];for(const r of t.devices)u=r.split(":"),RegExp(u[0]).test(l)&&(l=l.replace(u[0],u[1]));n.request("text",l)}return(l,u)=>{const r=h("v-icon"),a=h("v-btn"),o=h("v-list-item-title"),d=h("v-list-item"),b=h("v-list"),S=h("v-menu");return c(),E(S,null,{activator:m(({props:D})=>[x(a,de({icon:"",variant:"text"},D,{disabled:i.value.length<1}),{default:m(()=>[x(r,{size:"large"},{default:m(()=>[B(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:m(()=>[x(b,null,{default:m(()=>[(c(!0),N(W,null,ve(i.value,(D,g)=>(c(),E(d,{key:g,value:g,onClick:v=>s(D.cmd)},{default:m(()=>[x(o,null,{default:m(()=>[B($(D.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}};var ue=null;function qe(e){return ue||(ue=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),ue(e)}var ce=null;function Be(e){ce||(ce=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),ce(e)}function We(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function le(e,t){t===void 0&&(t={});var n=document.createElement(e);return Object.keys(t).forEach(function(i){n[i]=t[i]}),n}function Oe(e,t,n){var i=window.getComputedStyle(e,n||null)||{display:"none"};return i[t]}function fe(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(Oe(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var Je='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',_e=0,ie=null;function Ge(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Qe.bind(e));var n=e.__resize_listeners__;if(!n){if(e.__resize_listeners__=[],window.ResizeObserver){var i=e.offsetWidth,s=e.offsetHeight,l=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===i&&e.offsetHeight===s)||se(e)}),u=fe(e),r=u.detached,a=u.rendered;e.__resize_observer_triggered__=r===!1&&a===!1,e.__resize_observer__=l,l.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){se(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(_e||(ie=We(Je)),Xe(e),e.__resize_rendered__=fe(e).rendered,window.MutationObserver){var o=new MutationObserver(e.__resize_mutation_handler__);o.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=o}}e.__resize_listeners__.push(t),_e++}function Ze(e,t){var n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",pe),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--_e&&ie&&ie.parentNode.removeChild(ie)}}function Ke(e){var t=e.__resize_last__,n=t.width,i=t.height,s=e.offsetWidth,l=e.offsetHeight;return s!==n||l!==i?{width:s,height:l}:null}function Qe(){var e=fe(this),t=e.rendered,n=e.detached;t!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(me(this),this.addEventListener("scroll",pe,!0)),this.__resize_rendered__=t,se(this))}function pe(){var e=this;me(this),this.__resize_raf__&&Be(this.__resize_raf__),this.__resize_raf__=qe(function(){var t=Ke(e);t&&(e.__resize_last__=t,se(e))})}function se(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Xe(e){var t=Oe(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var n=le("div",{className:"resize-triggers"}),i=le("div",{className:"resize-expand-trigger"}),s=le("div"),l=le("div",{className:"resize-contract-trigger"});i.appendChild(s),n.appendChild(i),n.appendChild(l),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:i,expandChild:s,contract:l},me(e),e.addEventListener("scroll",pe,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function me(e){var t=e.__resize_triggers__,n=t.expand,i=t.expandChild,s=t.contract,l=s.scrollWidth,u=s.scrollHeight,r=n.offsetWidth,a=n.offsetHeight,o=n.scrollWidth,d=n.scrollHeight;s.scrollLeft=l,s.scrollTop=u,i.style.width=r+1+"px",i.style.height=a+1+"px",n.scrollLeft=o,n.scrollTop=d}var q=function(){return q=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},q.apply(this,arguments)};var Ye=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function et(e){return t=Object.create(null),Ye.forEach(function(n){t[n]=function(i){return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[i].apply(e.value,s)}}(n)}),t;var t}var tt={autoresize:[Boolean,Object]},nt=/^on[^a-z]/,at=function(e){return nt.test(e)};function oe(e,t){var n=Z(e);return n&&typeof n=="object"&&"value"in n?n.value||t:n||t}var rt="ecLoadingOptions",lt={loading:Boolean,loadingOptions:Object},X=null,De="x-vue-echarts",ze=[],Y=[];(function(e,t){if(e&&typeof document<"u"){var n,i=t.prepend===!0?"prepend":"append",s=t.singleTag===!0,l=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(s){var u=ze.indexOf(l);u===-1&&(u=ze.push(l)-1,Y[u]={}),n=Y[u]&&Y[u][i]?Y[u][i]:Y[u][i]=r()}else n=r();e.charCodeAt(0)===65279&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function r(){var a=document.createElement("style");if(a.setAttribute("type","text/css"),t.attributes)for(var o=Object.keys(t.attributes),d=0;d<o.length;d++)a.setAttribute(o[d],t.attributes[o[d]]);var b=i==="prepend"?"afterbegin":"beforeend";return l.insertAdjacentElement(b,a),a}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var ot=function(){if(X!=null)return X;if(typeof HTMLElement>"u"||typeof customElements>"u")return X=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(De)}catch{return X=!1}return X=!0}(),it="ecTheme",st="ecInitOptions",ut="ecUpdateOptions",ct=Ce({name:"echarts",props:q(q({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},tt),lt),emits:{},inheritAttrs:!1,setup:function(e,t){var n=t.attrs,i=ne(),s=ne(),l=ne(),u=ne(),r=ae(it,null),a=ae(st,null),o=ae(ut,null),d=Ee(e),b=d.autoresize,S=d.manualUpdate,D=d.loading,g=d.loadingOptions,v=k(function(){return u.value||e.option||null}),p=k(function(){return e.theme||oe(r,{})}),M=k(function(){return e.initOptions||oe(a,{})}),f=k(function(){return e.updateOptions||oe(o,{})}),z=k(function(){return function(C){var O={};for(var L in C)at(L)||(O[L]=C[L]);return O}(n)}),T=Se().proxy.$listeners;function y(C){if(s.value){var O=l.value=Me(s.value,p.value,M.value);e.group&&(O.group=e.group);var L=T;L||(L={},Object.keys(n).filter(function(j){return j.indexOf("on")===0&&j.length>2}).forEach(function(j){var V=j.charAt(2).toLowerCase()+j.slice(3);V.substring(V.length-4)==="Once"&&(V="~".concat(V.substring(0,V.length-4))),L[V]=n[j]})),Object.keys(L).forEach(function(j){var V=L[j];if(V){var F=j.toLowerCase();F.charAt(0)==="~"&&(F=F.substring(1),V.__once__=!0);var H=O;if(F.indexOf("zr:")===0&&(H=O.getZr(),F=F.substring(3)),V.__once__){delete V.__once__;var K=V;V=function(){for(var U=[],I=0;I<arguments.length;I++)U[I]=arguments[I];K.apply(void 0,U),H.off(F,V)}}H.on(F,V)}}),b.value?Te(function(){O&&!O.isDisposed()&&O.resize(),P()}):P()}function P(){var j=C||v.value;j&&O.setOption(j,f.value)}}function R(){l.value&&(l.value.dispose(),l.value=void 0)}var A=null;re(S,function(C){typeof A=="function"&&(A(),A=null),C||(A=re(function(){return e.option},function(O,L){O&&(l.value?l.value.setOption(O,q({notMerge:O!==L},f.value)):y())},{deep:!0}))},{immediate:!0}),re([p,M],function(){R(),y()},{deep:!0}),ye(function(){e.group&&l.value&&(l.value.group=e.group)});var _=et(l);return function(C,O,L){var P=ae(rt,{}),j=k(function(){return q(q({},oe(P,{})),L==null?void 0:L.value)});ye(function(){var V=C.value;V&&(O.value?V.showLoading(j.value):V.hideLoading())})}(l,D,g),function(C,O,L){var P=null;re([L,C,O],function(j,V,F){var H=j[0],K=j[1],U=j[2];if(H&&K&&U){var I=U===!0?{}:U,te=I.throttle,G=te===void 0?100:te,he=I.onResize,ge=function(){K.resize(),he==null||he()};P=G?Ve(ge,G):ge,Ge(H,P)}F(function(){H&&P&&Ze(H,P)})})}(l,b,s),ke(function(){y()}),Ae(function(){ot&&i.value?i.value.__dispose=R:R()}),q({chart:l,root:i,inner:s,setOption:function(C,O){e.manualUpdate&&(u.value=C),l.value?l.value.setOption(C,O||{}):y(C)},nonEventAttrs:z},_)},render:function(){var e=q({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",be(De,e,[be("div",{ref:"inner",class:"echarts-inner"})])}});const dt={key:0,class:"mx-4 my-4 text-right"},vt={__name:"PanelMainChart",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),i=Le(),{mobile:s}=je(),l=Ne(),u=Q({}),r=Q({from:null,to:null,fromMenu:!1,toMenu:!1,loaded:!1});let a=[];const o=k(()=>(D(),"height: "+(n.app.panelMaximized?window.innerHeight-250+"px":t.height)));function d(g){return l.d(g,{dateStyle:s.value?"short":"long"})}function b(g,v){let p;return r.value.from&&v&&(p=r.value.from),r.value.to&&!v&&(p=r.value.to),!p&&!isNaN(g)&&(p=(M=>new Date(M.setDate(M.getDate()+(Number(g)||0))))(new Date)),p||(p=new Date(/.*T.*/.test(g)?g:g+"T00:00:00")),!r.value.from&&v&&(r.value.from=p),!r.value.to&&!v&&(r.value.to=p),p=new Date(p.getTime()-p.getTimezoneOffset()*60*1e3),p.toISOString().split("T")[0]}async function S(){let g=n.handleDefs(t.el.serie,["data","name","digits","suffix","type"],[null,"",0,"","line"],!0),v,p,M=[],f,z,T,y,R,A=[];if(g.length>0)for(const _ of g){if(/^get.*/.test(_.data)){R="time",v=_.data.split(" ");for(const C of t.devices)C.split(":")[0]===v[1]&&(v[1]=C.split(":")[1]);if(v[4]=b(v[4],!0),v[5]=b(v[5],!1),p=await n.request("text",v.join(" ")),y=[],M=p.split(`
`),M.length>0)for(const C of M)f=C.split(" "),f.length>1&&(z=new Date(f[0].replace("_","T")),T=parseFloat(f[1]).toFixed(_.digits),y.push([z,T]))}else R="category",p=/,/.test(_.data)?_.data:_.data.replace(/ /g,","),/^\[.*\]$/.test(S)||(p="["+p+"]"),y=n.stringToJson(p);A.push({xAxisType:R,type:_.type,name:_.name,digits:_.digits,suffix:_.suffix,data:y})}return A}async function D(){let g={tooltip:{trigger:"axis"},legend:{data:[],bottom:10},backgroundColor:"rgba(255, 255, 255, 0)",grid:{top:30,bottom:60,left:60,right:60},animationDuration:300,series:[],yAxis:[],xAxis:{}},v,p=JSON.parse(JSON.stringify(n.getEl(t.el,["options"])||{})),M=JSON.parse(JSON.stringify(n.getEl(t.el,["options2"])||{})),f=Object.assign(g,n.app.panelMaximized&&Object.keys(M).length>0?M:p);r.value.fromMenu=!1,r.value.toMenu=!1,r.value.loaded=!1,a=await S();for(const[z,T]of Object.entries(a))v={formatter:y=>y.toLocaleString(l.locale.value,{minimumFractionDigits:T.digits,maximumFractionDigits:T.digits})+T.suffix},f.series[z]||(f.series[z]={}),f.yAxis[z]||(f.yAxis[z]={}),f.legend.data||(f.legend.data=[]),f.xAxis.type||(f.xAxis.type=T.xAxisType),f.series[z].name||(f.series[z].name=T.name),f.series[z].type||(f.series[z].type=T.type),f.series[z].data||(f.series[z].data=T.data),f.yAxis[z].type||(f.yAxis[z].type="value"),f.yAxis[z].axisLabel||(f.yAxis[z].axisLabel=v),f.legend.data[z]||(f.legend.data[z]=T.name);n.log(7,"Chartdata chart.loaded.",f),u.value=Object.assign({},f),r.value.loaded=!0}return(g,v)=>{const p=h("v-btn"),M=h("v-date-picker"),f=h("v-locale-provider"),z=h("v-menu"),T=h("v-skeleton-loader");return c(),N(W,null,[Z(n).app.panelMaximized?(c(),N("div",dt,[x(z,{modelValue:r.value.fromMenu,"onUpdate:modelValue":v[2]||(v[2]=y=>r.value.fromMenu=y),"close-on-content-click":!1},{activator:m(({props:y})=>[x(p,de(y,{variant:"outlined","append-icon":"mdi-calendar",class:"mr-2"}),{default:m(()=>[B($(d(r.value.from)),1)]),_:2},1040)]),default:m(()=>[x(f,{locale:Z(l).locale.value},{default:m(()=>[x(M,{modelValue:r.value.from,"onUpdate:modelValue":[v[0]||(v[0]=y=>r.value.from=y),v[1]||(v[1]=y=>D())],color:"secondary"},null,8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["modelValue"]),B(" - "),x(z,{modelValue:r.value.toMenu,"onUpdate:modelValue":v[5]||(v[5]=y=>r.value.toMenu=y),"close-on-content-click":!1},{activator:m(({props:y})=>[x(p,de(y,{variant:"outlined","append-icon":"mdi-calendar",class:"ml-2"}),{default:m(()=>[B($(d(r.value.to)),1)]),_:2},1040)]),default:m(()=>[x(f,{locale:Z(l).locale.value},{default:m(()=>[x(M,{modelValue:r.value.to,"onUpdate:modelValue":[v[3]||(v[3]=y=>r.value.to=y),v[4]||(v[4]=y=>D())],color:"secondary"},null,8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["modelValue"])])):w("",!0),we("div",{style:$e(o.value)},[r.value.loaded?w("",!0):(c(),E(T,{key:0,type:"text, image, text"})),r.value.loaded?(c(),E(Z(ct),{key:1,option:u.value,theme:Z(i).global.name.value==="dark"?"dark":"light",autoresize:""},null,8,["option","theme"])):w("",!0)],4)],64)}}},ft={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(e){const t=J();function n(r,a){return t.handleDefs(r[a].size,["size"],[!1]).size}function i(r){let a="";return["info"].indexOf(r)!==-1&&(a="mx-2"),a}function s(r,a){return r[a]?t.handleDefs(r[a].divider,["show"],[!1]).show:!1}function l(r){return r.level?t.handleDefs(r.level.height,["height"],["64px"]).height:"64px"}function u(r){if(r==="info")return Ue;if(r==="btn")return Fe;if(r==="slider")return Pe;if(r==="image")return He;if(r==="menu")return Ie;if(r==="chart")return vt}return(r,a)=>{const o=h("v-sheet"),d=h("v-col"),b=h("v-divider"),S=h("v-row"),D=h("v-expand-transition");return c(!0),N(W,null,ve(e.main,(g,v)=>(c(),N("div",{key:v},[x(D,null,{default:m(()=>[e.levels.indexOf(v)!==-1?(c(),E(S,{key:0,"no-gutters":"",class:"text-center align-center"},{default:m(()=>[x(o,{height:l(g,"level")},null,8,["height"]),(c(),N(W,null,ve(["left1","left2","mid","right1","right2"],p=>(c(),N(W,{key:p},[g.level[p]?(c(),E(d,{key:0,cols:n(g,p),class:ee(i(g.level[p]))},{default:m(()=>[(c(),E(Re(u(g.level[p])),{el:g[p],iconmap:e.iconmap,devices:e.devices,height:l(g,"level")},null,8,["el","iconmap","devices","height"]))]),_:2},1032,["cols","class"])):w("",!0),s(g,p)?(c(),E(b,{key:1,vertical:""})):w("",!0)],64))),64)),s(g,"level")?(c(),E(b,{key:0})):w("",!0)]),_:2},1024)):w("",!0)]),_:2},1024)]))),128)}}},_t={key:1},pt={key:3},mt={key:1},ht={key:3},gt={key:1},xt={key:3},bt={__name:"PanelCard",props:{panel:Object},setup(e){const t=e,n=J();let i=n.thread();ke(()=>n.thread(i));function s(A){let _=n.handleDefs(t.panel.status[A],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return _.level=Math.round((_.level-_.min)/(_.max-_.min)*100),_}const l=k(()=>s("bar")),u=k(()=>s("bar2")),r=k(()=>n.handleDefs(t.panel.status.imageUrl,["url"],[""])),a=k(()=>n.handleDefs(t.panel.status.title,["title"],[""])),o=k(()=>n.handleDefs(t.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),d=Q(o.value.expanded),b=k(()=>{let A=null;return o.value.expandable&&(A=d.value?"mdi-arrow-collapse":"mdi-arrow-expand"),!o.value.expandable&&!o.value.expanded&&t.panel.main.length>1&&(A="mdi-swap-vertical"),A}),S=k(()=>{let A=[];for(const[_,C]of Object.entries(t.panel.main))n.handleDefs(C.level.show,["show"],[!0]).show&&A.push(Number(_));return A});function D(A){let _=-1;o.value.expandable||!o.value.expandable&&o.value.expanded?(A||(o.value.maximizable&&(n.app.panelMaximized=d.value?!1:t.panel),d.value=!d.value),g.value=d.value?S.value:[S.value[0]]):(_=S.value.indexOf(g.value?g.value[0]:null),g.value=_===-1||_===S.value.length-1?[S.value[0]]:[S.value[_+1]])}const g=Q([]);function v(A){let _=n.handleDefs(t.panel.info[A],["text","icon","color"],["","",""]);return _.icon&&(_.icon=n.getIcon(_.icon,t.panel.panel.iconmap)),_}function p(){let A=!!(M.value.text||f.value.text),_=!!(z.value.text||T.value.text),C=!!(y.value.text||R.value.text);return!A&&_&&!C?7:null}const M=k(()=>v("left1")),f=k(()=>v("left2")),z=k(()=>v("mid1")),T=k(()=>v("mid2")),y=k(()=>v("right1")),R=k(()=>v("right2"));return D(!0),(A,_)=>{const C=h("v-progress-linear"),O=h("v-col"),L=h("v-row"),P=h("v-spacer"),j=h("v-btn"),V=h("v-card-title"),F=h("v-img"),H=h("v-sheet"),K=h("v-divider"),U=h("v-icon"),I=h("v-card-text"),te=h("v-card");return c(),E(te,{variant:"tonal"},{default:m(()=>[x(L,{"no-gutters":""},{default:m(()=>[e.panel.status.bar?(c(),E(O,{key:0},{default:m(()=>[x(C,{height:"7",modelValue:l.value.level,"onUpdate:modelValue":_[0]||(_[0]=G=>l.value.level=G),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):w("",!0),e.panel.status.bar2?(c(),E(O,{key:1},{default:m(()=>[x(C,{height:"7",modelValue:u.value.level,"onUpdate:modelValue":_[1]||(_[1]=G=>u.value.level=G),color:u.value.color,reverse:u.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):w("",!0)]),_:1}),x(H,{color:"secondary"},{default:m(()=>[x(F,{src:r.value.url,gradient:r.value.url?Z(n).app.header.imageGradient:"",height:"48",cover:""},{default:m(()=>[e.panel.status.title?(c(),E(V,{key:0},{default:m(()=>[x(L,{"no-gutters":""},{default:m(()=>[x(O,null,{default:m(()=>[B($(a.value.title),1)]),_:1}),x(P),b.value?(c(),E(O,{key:0,cols:"1",class:"text-right"},{default:m(()=>[x(j,{icon:b.value,size:"small",variant:"plain",density:"compact",onClick:_[2]||(_[2]=G=>D(!1))},null,8,["icon"])]),_:1})):w("",!0)]),_:1})]),_:1})):w("",!0)]),_:1},8,["src","gradient"])]),_:1}),x(K),x(ft,{main:e.panel.main,levels:g.value,iconmap:e.panel.panel.iconmap,devices:e.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),x(H,{color:"secondary"},{default:m(()=>[x(I,{class:"pa-1"},{default:m(()=>[x(L,{"no-gutters":""},{default:m(()=>[x(O,{class:"text-truncate text-left"},{default:m(()=>[M.value.icon?(c(),E(U,{key:0,icon:M.value.icon,color:M.value.color,size:"small"},null,8,["icon","color"])):w("",!0),M.value.text?(c(),N("span",_t,$(M.value.text),1)):w("",!0),f.value.icon?(c(),E(U,{key:2,icon:f.value.icon,color:f.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):w("",!0),f.value.text?(c(),N("span",pt,$(f.value.text),1)):w("",!0)]),_:1}),x(O,{class:"text-truncate text-center",cols:p()},{default:m(()=>[z.value.icon?(c(),E(U,{key:0,icon:z.value.icon,color:z.value.color,size:"small"},null,8,["icon","color"])):w("",!0),z.value.text?(c(),N("span",mt,$(z.value.text),1)):w("",!0),T.value.icon?(c(),E(U,{key:2,icon:T.value.icon,color:T.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):w("",!0),T.value.text?(c(),N("span",ht,$(T.value.text),1)):w("",!0)]),_:1},8,["cols"]),x(O,{class:"text-truncate text-right"},{default:m(()=>[y.value.icon?(c(),E(U,{key:0,icon:y.value.icon,color:y.value.color,size:"small"},null,8,["icon","color"])):w("",!0),y.value.text?(c(),N("span",gt,$(y.value.text),1)):w("",!0),R.value.icon?(c(),E(U,{key:2,icon:R.value.icon,color:R.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):w("",!0),R.value.text?(c(),N("span",xt,$(R.value.text),1)):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{bt as _};
