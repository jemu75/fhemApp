import{u as H,c as g,r as h,o as f,b as A,s as Q,t as M,k as y,a as z,w as x,j as X,x as Oe,F as W,e as b,y as xe,f as Y,p as Ce,d as ve,l as Ee,z as re,A as ae,B as De,C as Ae,q as oe,D as ye,E as pe,G as Se,m as be,H as Me,I as Le,h as me,J as Te,K as je}from"./index-aeae9a78.js";const Ve={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object},setup(e){const t=e,n=H(),i=g(()=>n.handleDefs(t.el.text,["text","format"],["",!t.el.text2&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),c=g(()=>n.handleDefs(t.el.text2,["text","format"],["",t.el.text&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),a=g(()=>n.handleDefs(t.el.text3,["text","format"],["","text-caption"])),d=g(()=>{let r=n.handleDefs(t.el.icon,["icon","color","size"],["","","x-large"]);return r.icon&&(r.icon=n.getIcon(r.icon,t.iconmap)),r}),l=g(()=>{let r=n.handleDefs(t.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return r.level=Math.round((r.level-r.min)/(r.max-r.min)*100),r.reverse=!!r.reverse,r});return(r,o)=>{const s=h("v-icon"),u=h("v-progress-circular"),_=h("v-progress-linear");return f(),A(W,null,[e.el.text?(f(),A("div",{key:0,class:Q(i.value.format)},M(i.value.text),3)):y("",!0),e.el.icon?(f(),z(s,{key:1,color:d.value.color,size:d.value.size},{default:x(()=>[X(M(d.value.icon),1)]),_:1},8,["color","size"])):y("",!0),e.el.status&&!l.value.linear?(f(),z(u,{key:2,width:"4",modelValue:l.value.level,"onUpdate:modelValue":o[0]||(o[0]=p=>l.value.level=p),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),e.el.status&&l.value.linear?(f(),z(_,{key:3,height:"7",rounded:"",modelValue:l.value.level,"onUpdate:modelValue":o[1]||(o[1]=p=>l.value.level=p),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),Oe("div",{class:Q(e.el.text2?c.value.format:a.value.format)},[e.el.text2?(f(),A("span",{key:0,class:Q(c.value.format)},M(c.value.text),3)):y("",!0),e.el.text3?(f(),A("span",{key:1,class:Q(a.value.format)},M(a.value.text),3)):y("",!0)],2)],64)}}},Re={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array},setup(e){const t=e,n=H(),i=g(()=>{let r=n.handleDefs(t.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return r.icon&&(r.icon=n.getIcon(r.icon,t.iconmap)),r}),c=g(()=>{let r=n.handleDefs(t.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return r.level=Math.round((r.level-r.min)/(r.max-r.min)*100),r.reverse=!!r.reverse,r}),a={timer:!1,long:!1};function d(r){let o=[],s=r.cmd;if(r.type==="cmd"){for(const u of t.devices)o=u.split(":"),RegExp(o[0]).test(s)&&(s=s.replace(o[0],o[1]));n.request("text",s)}r.type==="route"&&xe.push({name:"devices",params:{view:r.cmd},query:xe.currentRoute.value.query}),r.type==="url"&&window.open(r.cmd,"_self")}function l(r){let o=n.handleDefs(t.el.click,["cmd","type"],["","cmd"]),s=n.handleDefs(t.el.longClick,["cmd","type"],["","cmd"]),u=n.handleDefs(t.el.longRelease,["cmd","type"],["","cmd"]);(r==="touchStart"||r==="mouseStart")&&(a.timer=setTimeout(()=>{a.long=!0,s.cmd&&d(s)},1e3)),(r==="touchEnd"||r==="mouseEnd")&&(a.long?u.cmd&&d(u):o.cmd&&d(o),clearTimeout(a.timer),a.long=!1)}return(r,o)=>{const s=h("v-progress-linear"),u=h("v-icon"),_=h("v-btn");return f(),A(W,null,[e.el.status?(f(),z(s,{key:0,height:"4",modelValue:c.value.level,"onUpdate:modelValue":o[0]||(o[0]=p=>c.value.level=p),color:c.value.color,reverse:c.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),b(_,{icon:"",variant:i.value.variant,disabled:i.value.disabled,color:i.value.color,onTouchstart:o[1]||(o[1]=p=>l("touchStart")),onTouchend:o[2]||(o[2]=p=>l("touchEnd")),onMousedown:o[3]||(o[3]=p=>l("mouseStart")),onMouseup:o[4]||(o[4]=p=>l("mouseEnd")),class:"my-2"},{default:x(()=>[b(u,{size:"large"},{default:x(()=>[X(M(i.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},Pe={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array},setup(e){const t=e,n=H(),i=Y();function c(r){i.value=r}const a=g(()=>{let r=n.handleDefs(t.el.slider,["cmd","current","color","min","max","steps","reverse","size","vertical"],["",0,"",0,100,10,!1,4,!1]);return/%v/.test(r.current)&&(r.current=r.current.replace("%v",i.value)),c(r.current),r});let d=null;function l(r){let o=a.value.cmd,s=/\./.exec(a.value.steps),u=0,_=[];s&&(u=a.value.steps.slice(s.index).length-1),o=o.replace("%v",r.toFixed(u));for(const p of t.devices)_=p.split(":"),RegExp(_[0]).test(o)&&(o=o.replace(_[0],_[1]));clearTimeout(d),d=setTimeout(()=>{n.request("text",o)},500)}return(r,o)=>{const s=h("v-slider");return f(),z(s,{modelValue:i.value,"onUpdate:modelValue":[o[0]||(o[0]=u=>i.value=u),o[1]||(o[1]=u=>l(u))],min:a.value.min,max:a.value.max,step:a.value.steps,reverse:a.value.reverse,direction:a.value.vertical?"vertical":"horizontal","track-size":a.value.size,color:a.value.color,"hide-details":"","thumb-label":""},null,8,["modelValue","min","max","step","reverse","direction","track-size","color"])}}},$e={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array},setup(e){const t=e,n=H(),i=Y(!1),c=g(()=>n.handleDefs(t.el.image,["source","height"],["",null]));return(a,d)=>{const l=h("v-skeleton-loader"),r=h("v-img");return f(),A(W,null,[i.value?y("",!0):(f(),z(l,{key:0,type:"image"})),b(r,{src:c.value.source,height:c.value.height,onLoad:d[0]||(d[0]=o=>i.value=!0)},null,8,["src","height"])],64)}}},Fe={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array},setup(e){const t=e,n=H(),i=g(()=>{let a=[],d=n.handleDefs(t.el.menu,["name","cmd"],["",""],!0,","),l={};for(const r of d)l={name:/:/.test(r.name)?r.name.split(":")[0]:r.name,cmd:/:/.test(r.cmd)?r.cmd.split(":")[1]:r.cmd},a.push(l);return a});function c(a){let d=[];for(const l of t.devices)d=l.split(":"),RegExp(d[0]).test(a)&&(a=a.replace(d[0],d[1]));n.request("text",a)}return(a,d)=>{const l=h("v-icon"),r=h("v-btn"),o=h("v-list-item-title"),s=h("v-list-item"),u=h("v-list"),_=h("v-menu");return f(),z(_,null,{activator:x(({props:p})=>[b(r,Ce({icon:"",variant:"text"},p,{disabled:i.value.length<1}),{default:x(()=>[b(l,{size:"large"},{default:x(()=>[X(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:x(()=>[b(u,null,{default:x(()=>[(f(!0),A(W,null,ve(i.value,(p,E)=>(f(),z(s,{key:E,value:E,onClick:C=>c(p.cmd)},{default:x(()=>[b(o,null,{default:x(()=>[X(M(p.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}};var ue=null;function Ue(e){return ue||(ue=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),ue(e)}var de=null;function Ie(e){de||(de=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),de(e)}function Ne(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function le(e,t){t===void 0&&(t={});var n=document.createElement(e);return Object.keys(t).forEach(function(i){n[i]=t[i]}),n}function we(e,t,n){var i=window.getComputedStyle(e,n||null)||{display:"none"};return i[t]}function fe(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(we(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var qe='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',_e=0,se=null;function Be(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Ge.bind(e));var n=e.__resize_listeners__;if(!n){if(e.__resize_listeners__=[],window.ResizeObserver){var i=e.offsetWidth,c=e.offsetHeight,a=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===i&&e.offsetHeight===c)||ce(e)}),d=fe(e),l=d.detached,r=d.rendered;e.__resize_observer_triggered__=l===!1&&r===!1,e.__resize_observer__=a,a.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){ce(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(_e||(se=Ne(qe)),Ze(e),e.__resize_rendered__=fe(e).rendered,window.MutationObserver){var o=new MutationObserver(e.__resize_mutation_handler__);o.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=o}}e.__resize_listeners__.push(t),_e++}function He(e,t){var n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",he),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--_e&&se&&se.parentNode.removeChild(se)}}function We(e){var t=e.__resize_last__,n=t.width,i=t.height,c=e.offsetWidth,a=e.offsetHeight;return c!==n||a!==i?{width:c,height:a}:null}function Ge(){var e=fe(this),t=e.rendered,n=e.detached;t!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(ge(this),this.addEventListener("scroll",he,!0)),this.__resize_rendered__=t,ce(this))}function he(){var e=this;ge(this),this.__resize_raf__&&Ie(this.__resize_raf__),this.__resize_raf__=Ue(function(){var t=We(e);t&&(e.__resize_last__=t,ce(e))})}function ce(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Ze(e){var t=we(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var n=le("div",{className:"resize-triggers"}),i=le("div",{className:"resize-expand-trigger"}),c=le("div"),a=le("div",{className:"resize-contract-trigger"});i.appendChild(c),n.appendChild(i),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:i,expandChild:c,contract:a},ge(e),e.addEventListener("scroll",he,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function ge(e){var t=e.__resize_triggers__,n=t.expand,i=t.expandChild,c=t.contract,a=c.scrollWidth,d=c.scrollHeight,l=n.offsetWidth,r=n.offsetHeight,o=n.scrollWidth,s=n.scrollHeight;c.scrollLeft=a,c.scrollTop=d,i.style.width=l+1+"px",i.style.height=r+1+"px",n.scrollLeft=o,n.scrollTop=s}var I=function(){return I=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},I.apply(this,arguments)};var Je=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Ke(e){return t=Object.create(null),Je.forEach(function(n){t[n]=function(i){return function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[i].apply(e.value,c)}}(n)}),t;var t}var Qe={autoresize:[Boolean,Object]},Xe=/^on[^a-z]/,Ye=function(e){return Xe.test(e)};function ie(e,t){var n=me(e);return n&&typeof n=="object"&&"value"in n?n.value||t:n||t}var et="ecLoadingOptions",tt={loading:Boolean,loadingOptions:Object},J=null,ke="x-vue-echarts",ze=[],K=[];(function(e,t){if(e&&typeof document<"u"){var n,i=t.prepend===!0?"prepend":"append",c=t.singleTag===!0,a=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(c){var d=ze.indexOf(a);d===-1&&(d=ze.push(a)-1,K[d]={}),n=K[d]&&K[d][i]?K[d][i]:K[d][i]=l()}else n=l();e.charCodeAt(0)===65279&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function l(){var r=document.createElement("style");if(r.setAttribute("type","text/css"),t.attributes)for(var o=Object.keys(t.attributes),s=0;s<o.length;s++)r.setAttribute(o[s],t.attributes[o[s]]);var u=i==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(u,r),r}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var nt=function(){if(J!=null)return J;if(typeof HTMLElement>"u"||typeof customElements>"u")return J=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(ke)}catch{return J=!1}return J=!0}(),rt="ecTheme",at="ecInitOptions",ot="ecUpdateOptions",lt=Ee({name:"echarts",props:I(I({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Qe),tt),emits:{},inheritAttrs:!1,setup:function(e,t){var n=t.attrs,i=re(),c=re(),a=re(),d=re(),l=ae(rt,null),r=ae(at,null),o=ae(ot,null),s=De(e),u=s.autoresize,_=s.manualUpdate,p=s.loading,E=s.loadingOptions,C=g(function(){return d.value||e.option||null}),S=g(function(){return e.theme||ie(l,{})}),P=g(function(){return e.initOptions||ie(r,{})}),ee=g(function(){return e.updateOptions||ie(o,{})}),N=g(function(){return function(m){var v={};for(var w in m)Ye(w)||(v[w]=m[w]);return v}(n)}),q=Ae().proxy.$listeners;function T(m){if(c.value){var v=a.value=Me(c.value,S.value,P.value);e.group&&(v.group=e.group);var w=q;w||(w={},Object.keys(n).filter(function(k){return k.indexOf("on")===0&&k.length>2}).forEach(function(k){var O=k.charAt(2).toLowerCase()+k.slice(3);O.substring(O.length-4)==="Once"&&(O="~".concat(O.substring(0,O.length-4))),w[O]=n[k]})),Object.keys(w).forEach(function(k){var O=w[k];if(O){var L=k.toLowerCase();L.charAt(0)==="~"&&(L=L.substring(1),O.__once__=!0);var R=v;if(L.indexOf("zr:")===0&&(R=v.getZr(),L=L.substring(3)),O.__once__){delete O.__once__;var G=O;O=function(){for(var $=[],F=0;F<arguments.length;F++)$[F]=arguments[F];G.apply(void 0,$),R.off(L,O)}}R.on(L,O)}}),u.value?Le(function(){v&&!v.isDisposed()&&v.resize(),D()}):D()}function D(){var k=m||C.value;k&&v.setOption(k,ee.value)}}function V(){a.value&&(a.value.dispose(),a.value=void 0)}var j=null;oe(_,function(m){typeof j=="function"&&(j(),j=null),m||(j=oe(function(){return e.option},function(v,w){v&&(a.value?a.value.setOption(v,I({notMerge:v!==w},ee.value)):T())},{deep:!0}))},{immediate:!0}),oe([S,P],function(){V(),T()},{deep:!0}),ye(function(){e.group&&a.value&&(a.value.group=e.group)});var B=Ke(a);return function(m,v,w){var D=ae(et,{}),k=g(function(){return I(I({},ie(D,{})),w==null?void 0:w.value)});ye(function(){var O=m.value;O&&(v.value?O.showLoading(k.value):O.hideLoading())})}(a,p,E),function(m,v,w){var D=null;oe([w,m,v],function(k,O,L){var R=k[0],G=k[1],$=k[2];if(R&&G&&$){var F=$===!0?{}:$,U=F.throttle,te=U===void 0?100:U,ne=F.onResize,Z=function(){G.resize(),ne==null||ne()};D=te?Te(Z,te):Z,Be(R,D)}L(function(){R&&D&&He(R,D)})})}(a,u,c),pe(function(){T()}),Se(function(){nt&&i.value?i.value.__dispose=V:V()}),I({chart:a,root:i,inner:c,setOption:function(m,v){e.manualUpdate&&(d.value=m),a.value?a.value.setOption(m,v||{}):T(m)},nonEventAttrs:N},B)},render:function(){var e=I({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",be(ke,e,[be("div",{ref:"inner",class:"echarts-inner"})])}});const it=(e,t)=>{const n=e.__vccOpts||e;for(const[i,c]of t)n[i]=c;return n},st={__name:"PanelMainChart",props:{el:Object,iconmap:Array,devices:Array},setup(e){const t=e,n=H(),i=Y({xAxis:{type:"time"},yAxis:{type:"value"},series:[{data:[],type:"line",smooth:!0}]}),c=g(()=>{let s=n.handleDefs(t.el.serie,["log","from","to","column","filter","format","name","type","calc"],[null,-6,0,4,null,null,"","line","raw"],!0),u;for(const[_,p]of Object.entries(t.el.serie))u=p.split(":")[7],u&&(s[_].format=u),s[_].format||(s[_].format="%n()");return s});function a(s){return(u=>new Date(u.setDate(u.getDate()+(Number(s)||0))).toISOString())(new Date).split("T")[0]}function d(s){let u=[];for(const _ of t.devices)if(u=_.split(":"),RegExp(u[0]).test(_))return u[1];return s}function l(s){let u=s.split(`
`),_,p,E=[];if(u.length>0)for(const C of u)_=new Date(C.split(" ")[0].replace("_","T")),p=parseFloat(C.split(" ")[1]),E.push([_,p]);return E}function r(){o(c.value).then(s=>{if(s.length>0)for(const u of s)i.value.series[0].data=l(u.data,u.calc)})}async function o(s){let u=[],_,p;for(const[E,C]of Object.entries(s))C.log&&(_="get "+d(C.log)+" - - ",_+=a(C.from)+" ",_+=a(C.to)+" ",_+=C.column+":"+C.filter+":0:int",p=n.request("text",_),p&&u.push({id:E,data:await p,name:C.name,format:C.format,type:C.type,calc:C.calc}));return u}return pe(()=>{r()}),(s,u)=>(f(),z(me(lt),{class:"chart",option:i.value,autoresize:""},null,8,["option"]))}},ct=it(st,[["__scopeId","data-v-376c3cf0"]]),ut={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(e){const t=H();function n(l,r){return t.handleDefs(l[r].size,["size"],[!1]).size}function i(l){let r="";return["info"].indexOf(l)!==-1&&(r="mx-2"),r}function c(l,r){return l[r]?t.handleDefs(l[r].divider,["show"],[!1]).show:!1}function a(l){return l.level?t.handleDefs(l.level.height,["height"],["64px"]).height:"64px"}function d(l){if(l==="info")return Ve;if(l==="btn")return Re;if(l==="slider")return Pe;if(l==="image")return $e;if(l==="menu")return Fe;if(l==="chart")return ct}return(l,r)=>{const o=h("v-sheet"),s=h("v-col"),u=h("v-divider"),_=h("v-row"),p=h("v-expand-transition");return f(!0),A(W,null,ve(e.main,(E,C)=>(f(),A("div",{key:C},[b(p,null,{default:x(()=>[e.levels.indexOf(C)!==-1?(f(),z(_,{key:0,"no-gutters":"",class:"text-center align-center"},{default:x(()=>[b(o,{height:a(E,"level")},null,8,["height"]),(f(),A(W,null,ve(["left1","left2","mid","right1","right2"],S=>(f(),A(W,{key:S},[E.level[S]?(f(),z(s,{key:0,cols:n(E,S),class:Q(i(E.level[S]))},{default:x(()=>[(f(),z(je(d(E.level[S])),{el:E[S],iconmap:e.iconmap,devices:e.devices},null,8,["el","iconmap","devices"]))]),_:2},1032,["cols","class"])):y("",!0),c(E,S)?(f(),z(u,{key:1,vertical:""})):y("",!0)],64))),64)),c(E,"level")?(f(),z(u,{key:0})):y("",!0)]),_:2},1024)):y("",!0)]),_:2},1024)]))),128)}}},dt={key:1},vt={key:3},ft={key:1},_t={key:3},pt={key:1},mt={key:3},gt={__name:"PanelCard",props:{panel:Object},setup(e){const t=e,n=H();let i=n.thread();pe(()=>n.thread(i));function c(m){let v=n.handleDefs(t.panel.status[m],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return v.level=Math.round((v.level-v.min)/(v.max-v.min)*100),v}const a=g(()=>c("bar")),d=g(()=>c("bar2")),l=g(()=>n.handleDefs(t.panel.status.imageUrl,["url"],[""])),r=g(()=>n.handleDefs(t.panel.status.title,["title"],[""])),o=g(()=>n.handleDefs(t.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),s=Y(o.value.expanded),u=g(()=>{let m=null;return o.value.expandable&&(m=s.value?"mdi-arrow-collapse":"mdi-arrow-expand"),!o.value.expandable&&!o.value.expanded&&t.panel.main.length>1&&(m="mdi-swap-vertical"),m}),_=g(()=>{let m=[];for(const[v,w]of Object.entries(t.panel.main))n.handleDefs(w.level.show,["show"],[!0]).show&&m.push(Number(v));return m}),p=Y(!1);function E(){p.value=!1}function C(){o.value.expandable?(o.value.maximizable&&(s.value?n.app.panelMaximized=!1:n.app.panelMaximized=t.panel),s.value=!s.value):p.value=!0}const S=g(()=>{let m=[],v=-1;return o.value.expandable||!o.value.expandable&&o.value.expanded?m=s.value?_.value:[_.value[0]]:p.value?(v=_.value.indexOf(S.value?S.value[0]:null),m=v===-1||v===_.value.length-1?[_.value[0]]:[_.value[v+1]],E()):m=[_.value[0]],m});function P(m){let v=n.handleDefs(t.panel.info[m],["text","icon","color"],["","",""]);return v.icon&&(v.icon=n.getIcon(v.icon,t.panel.panel.iconmap)),v}function ee(){let m=!!(N.value.text||q.value.text),v=!!(T.value.text||V.value.text),w=!!(j.value.text||B.value.text);return!m&&v&&!w?7:null}const N=g(()=>P("left1")),q=g(()=>P("left2")),T=g(()=>P("mid1")),V=g(()=>P("mid2")),j=g(()=>P("right1")),B=g(()=>P("right2"));return(m,v)=>{const w=h("v-progress-linear"),D=h("v-col"),k=h("v-row"),O=h("v-spacer"),L=h("v-btn"),R=h("v-card-title"),G=h("v-img"),$=h("v-sheet"),F=h("v-divider"),U=h("v-icon"),te=h("v-card-text"),ne=h("v-card");return f(),z(ne,{variant:"tonal"},{default:x(()=>[b(k,{"no-gutters":""},{default:x(()=>[e.panel.status.bar?(f(),z(D,{key:0},{default:x(()=>[b(w,{height:"7",modelValue:a.value.level,"onUpdate:modelValue":v[0]||(v[0]=Z=>a.value.level=Z),color:a.value.color,reverse:a.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):y("",!0),e.panel.status.bar2?(f(),z(D,{key:1},{default:x(()=>[b(w,{height:"7",modelValue:d.value.level,"onUpdate:modelValue":v[1]||(v[1]=Z=>d.value.level=Z),color:d.value.color,reverse:d.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):y("",!0)]),_:1}),b($,{color:"secondary"},{default:x(()=>[b(G,{src:l.value.url,gradient:l.value.url?me(n).app.header.imageGradient:"",height:"48",cover:""},{default:x(()=>[e.panel.status.title?(f(),z(R,{key:0},{default:x(()=>[b(k,{"no-gutters":""},{default:x(()=>[b(D,null,{default:x(()=>[X(M(r.value.title),1)]),_:1}),b(O),u.value?(f(),z(D,{key:0,cols:"1",class:"text-right"},{default:x(()=>[b(L,{icon:u.value,size:"small",variant:"plain",density:"compact",onClick:C},null,8,["icon"])]),_:1})):y("",!0)]),_:1})]),_:1})):y("",!0)]),_:1},8,["src","gradient"])]),_:1}),b(F),b(ut,{main:e.panel.main,levels:S.value,iconmap:e.panel.panel.iconmap,devices:e.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),b($,{color:"secondary"},{default:x(()=>[b(te,{class:"pa-1"},{default:x(()=>[b(k,{"no-gutters":""},{default:x(()=>[b(D,{class:"text-truncate text-left"},{default:x(()=>[N.value.icon?(f(),z(U,{key:0,icon:N.value.icon,color:N.value.color,size:"small"},null,8,["icon","color"])):y("",!0),N.value.text?(f(),A("span",dt,M(N.value.text),1)):y("",!0),q.value.icon?(f(),z(U,{key:2,icon:q.value.icon,color:q.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),q.value.text?(f(),A("span",vt,M(q.value.text),1)):y("",!0)]),_:1}),b(D,{class:"text-truncate text-center",cols:ee()},{default:x(()=>[T.value.icon?(f(),z(U,{key:0,icon:T.value.icon,color:T.value.color,size:"small"},null,8,["icon","color"])):y("",!0),T.value.text?(f(),A("span",ft,M(T.value.text),1)):y("",!0),V.value.icon?(f(),z(U,{key:2,icon:V.value.icon,color:V.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),V.value.text?(f(),A("span",_t,M(V.value.text),1)):y("",!0)]),_:1},8,["cols"]),b(D,{class:"text-truncate text-right"},{default:x(()=>[j.value.icon?(f(),z(U,{key:0,icon:j.value.icon,color:j.value.color,size:"small"},null,8,["icon","color"])):y("",!0),j.value.text?(f(),A("span",pt,M(j.value.text),1)):y("",!0),B.value.icon?(f(),z(U,{key:2,icon:B.value.icon,color:B.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),B.value.text?(f(),A("span",mt,M(B.value.text),1)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{gt as _};
