import{u as K,c as w,r as x,o as c,b as V,s as ee,t as j,k as S,a as E,w as g,j as G,x as De,F as Y,e as h,y as ze,f as I,p as se,d as _e,l as Re,z as ae,A as re,B as Me,C as Te,q as te,D as we,E as pe,G as Oe,m as Se,H as Pe,I as Ve,h as J,J as je,K as Fe,i as Ie,L as Ne,M as Ue,N as He,O as Be,P as qe}from"./index-61acc08e.js";const We={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object,height:String},setup(e){const t=e,n=K(),l=w(()=>n.handleDefs(t.el.text,["text","format"],["",!t.el.text2&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),u=w(()=>n.handleDefs(t.el.text2,["text","format"],["",t.el.text&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),o=w(()=>n.handleDefs(t.el.text3,["text","format"],["","text-caption"])),i=w(()=>{let a=n.handleDefs(t.el.icon,["icon","color","size"],["","","x-large"]);return a.icon&&(a.icon=n.getIcon(a.icon,t.iconmap)),a}),r=w(()=>{let a=n.handleDefs(t.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return a.level=Math.round((a.level-a.min)/(a.max-a.min)*100),a.reverse=!!a.reverse,a});return(a,s)=>{const d=x("v-icon"),y=x("v-progress-circular"),D=x("v-progress-linear");return c(),V(Y,null,[e.el.text?(c(),V("div",{key:0,class:ee(l.value.format)},j(l.value.text),3)):S("",!0),e.el.icon?(c(),E(d,{key:1,color:i.value.color,size:i.value.size},{default:g(()=>[G(j(i.value.icon),1)]),_:1},8,["color","size"])):S("",!0),e.el.status&&!r.value.linear?(c(),E(y,{key:2,width:"4",modelValue:r.value.level,"onUpdate:modelValue":s[0]||(s[0]=k=>r.value.level=k),color:r.value.color,reverse:r.value.reverse},null,8,["modelValue","color","reverse"])):S("",!0),e.el.status&&r.value.linear?(c(),E(D,{key:3,height:"7",rounded:"",modelValue:r.value.level,"onUpdate:modelValue":s[1]||(s[1]=k=>r.value.level=k),color:r.value.color,reverse:r.value.reverse},null,8,["modelValue","color","reverse"])):S("",!0),De("div",{class:ee(e.el.text2?u.value.format:o.value.format)},[e.el.text2?(c(),V("span",{key:0,class:ee(u.value.format)},j(u.value.text),3)):S("",!0),e.el.text3?(c(),V("span",{key:1,class:ee(o.value.format)},j(o.value.text),3)):S("",!0)],2)],64)}}},Ke={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=K(),l=w(()=>{let a=n.handleDefs(t.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return a.icon&&(a.icon=n.getIcon(a.icon,t.iconmap)),a}),u=w(()=>{let a=n.handleDefs(t.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return a.level=Math.round((a.level-a.min)/(a.max-a.min)*100),a.reverse=!!a.reverse,a}),o={timer:!1,long:!1};function i(a){let s=[],d=a.cmd;if(a.type==="cmd"){for(const y of t.devices)s=y.split(":"),RegExp(s[0]).test(d)&&(d=d.replace(s[0],s[1]));n.request("text",d)}a.type==="route"&&ze.push({name:"devices",params:{view:a.cmd},query:ze.currentRoute.value.query}),a.type==="url"&&window.open(a.cmd,"_self")}function r(a){let s=n.handleDefs(t.el.click,["cmd","type"],["","cmd"]),d=n.handleDefs(t.el.longClick,["cmd","type"],["","cmd"]),y=n.handleDefs(t.el.longRelease,["cmd","type"],["","cmd"]);(a==="touchStart"||a==="mouseStart")&&(o.timer=setTimeout(()=>{o.long=!0,d.cmd&&i(d)},1e3)),(a==="touchEnd"||a==="mouseEnd")&&(o.long?y.cmd&&i(y):s.cmd&&i(s),clearTimeout(o.timer),o.long=!1)}return(a,s)=>{const d=x("v-progress-linear"),y=x("v-icon"),D=x("v-btn");return c(),V(Y,null,[e.el.status?(c(),E(d,{key:0,height:"4",modelValue:u.value.level,"onUpdate:modelValue":s[0]||(s[0]=k=>u.value.level=k),color:u.value.color,reverse:u.value.reverse},null,8,["modelValue","color","reverse"])):S("",!0),h(D,{icon:"",variant:l.value.variant,disabled:l.value.disabled,color:l.value.color,onTouchstart:s[1]||(s[1]=k=>r("touchStart")),onTouchend:s[2]||(s[2]=k=>r("touchEnd")),onMousedown:s[3]||(s[3]=k=>r("mouseStart")),onMouseup:s[4]||(s[4]=k=>r("mouseEnd")),class:"my-2"},{default:g(()=>[h(y,{size:"large"},{default:g(()=>[G(j(l.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},Je={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=K(),l=I();function u(a){l.value=a}const o=w(()=>{let a=n.handleDefs(t.el.slider,["cmd","current","color","min","max","steps","reverse","size","vertical"],["",0,"",0,100,10,!1,4,!1]);return/%v/.test(a.current)&&(a.current=a.current.replace("%v",l.value)),u(a.current),a});let i=null;function r(a){let s=o.value.cmd,d=/\./.exec(o.value.steps),y=0,D=[];d&&(y=o.value.steps.slice(d.index).length-1),s=s.replace("%v",a.toFixed(y));for(const k of t.devices)D=k.split(":"),RegExp(D[0]).test(s)&&(s=s.replace(D[0],D[1]));clearTimeout(i),i=setTimeout(()=>{n.request("text",s)},500)}return(a,s)=>{const d=x("v-slider");return c(),E(d,{modelValue:l.value,"onUpdate:modelValue":[s[0]||(s[0]=y=>l.value=y),s[1]||(s[1]=y=>r(y))],min:o.value.min,max:o.value.max,step:o.value.steps,reverse:o.value.reverse,direction:o.value.vertical?"vertical":"horizontal","track-size":o.value.size,color:o.value.color,"hide-details":"","thumb-label":""},null,8,["modelValue","min","max","step","reverse","direction","track-size","color"])}}},Ge={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=K(),l=I(!1),u=w(()=>n.handleDefs(t.el.image,["source","height"],["",null]));return(o,i)=>{const r=x("v-skeleton-loader"),a=x("v-img");return c(),V(Y,null,[l.value?S("",!0):(c(),E(r,{key:0,type:"image"})),h(a,{src:u.value.source,height:u.value.height,onLoad:i[0]||(i[0]=s=>l.value=!0)},null,8,["src","height"])],64)}}},Ye={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=K(),l=w(()=>{let o=[],i=n.handleDefs(t.el.menu,["name","cmd"],["",""],!0,","),r={};for(const a of i)r={name:/:/.test(a.name)?a.name.split(":")[0]:a.name,cmd:/:/.test(a.cmd)?a.cmd.split(":")[1]:a.cmd},o.push(r);return o});function u(o){let i=[];for(const r of t.devices)i=r.split(":"),RegExp(i[0]).test(o)&&(o=o.replace(i[0],i[1]));n.request("text",o)}return(o,i)=>{const r=x("v-icon"),a=x("v-btn"),s=x("v-list-item-title"),d=x("v-list-item"),y=x("v-list"),D=x("v-menu");return c(),E(D,null,{activator:g(({props:k})=>[h(a,se({icon:"",variant:"text"},k,{disabled:l.value.length<1}),{default:g(()=>[h(r,{size:"large"},{default:g(()=>[G(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:g(()=>[h(y,null,{default:g(()=>[(c(!0),V(Y,null,_e(l.value,(k,b)=>(c(),E(d,{key:b,value:b,onClick:v=>u(k.cmd)},{default:g(()=>[h(s,null,{default:g(()=>[G(j(k.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}};var de=null;function Ze(e){return de||(de=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),de(e)}var ve=null;function Xe(e){ve||(ve=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),ve(e)}function Qe(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function le(e,t){t===void 0&&(t={});var n=document.createElement(e);return Object.keys(t).forEach(function(l){n[l]=t[l]}),n}function Ae(e,t,n){var l=window.getComputedStyle(e,n||null)||{display:"none"};return l[t]}function me(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(Ae(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var $e='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',he=0,ie=null;function et(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=at.bind(e));var n=e.__resize_listeners__;if(!n){if(e.__resize_listeners__=[],window.ResizeObserver){var l=e.offsetWidth,u=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===l&&e.offsetHeight===u)||ue(e)}),i=me(e),r=i.detached,a=i.rendered;e.__resize_observer_triggered__=r===!1&&a===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){ue(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(he||(ie=Qe($e)),rt(e),e.__resize_rendered__=me(e).rendered,window.MutationObserver){var s=new MutationObserver(e.__resize_mutation_handler__);s.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=s}}e.__resize_listeners__.push(t),he++}function tt(e,t){var n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",ge),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--he&&ie&&ie.parentNode.removeChild(ie)}}function nt(e){var t=e.__resize_last__,n=t.width,l=t.height,u=e.offsetWidth,o=e.offsetHeight;return u!==n||o!==l?{width:u,height:o}:null}function at(){var e=me(this),t=e.rendered,n=e.detached;t!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(xe(this),this.addEventListener("scroll",ge,!0)),this.__resize_rendered__=t,ue(this))}function ge(){var e=this;xe(this),this.__resize_raf__&&Xe(this.__resize_raf__),this.__resize_raf__=Ze(function(){var t=nt(e);t&&(e.__resize_last__=t,ue(e))})}function ue(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function rt(e){var t=Ae(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var n=le("div",{className:"resize-triggers"}),l=le("div",{className:"resize-expand-trigger"}),u=le("div"),o=le("div",{className:"resize-contract-trigger"});l.appendChild(u),n.appendChild(l),n.appendChild(o),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:l,expandChild:u,contract:o},xe(e),e.addEventListener("scroll",ge,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function xe(e){var t=e.__resize_triggers__,n=t.expand,l=t.expandChild,u=t.contract,o=u.scrollWidth,i=u.scrollHeight,r=n.offsetWidth,a=n.offsetHeight,s=n.scrollWidth,d=n.scrollHeight;u.scrollLeft=o,u.scrollTop=i,l.style.width=r+1+"px",l.style.height=a+1+"px",n.scrollLeft=s,n.scrollTop=d}var W=function(){return W=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},W.apply(this,arguments)};var lt=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function ot(e){return t=Object.create(null),lt.forEach(function(n){t[n]=function(l){return function(){for(var u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[l].apply(e.value,u)}}(n)}),t;var t}var it={autoresize:[Boolean,Object]},st=/^on[^a-z]/,ut=function(e){return st.test(e)};function oe(e,t){var n=J(e);return n&&typeof n=="object"&&"value"in n?n.value||t:n||t}var ct="ecLoadingOptions",dt={loading:Boolean,loadingOptions:Object},Q=null,Le="x-vue-echarts",ke=[],$=[];(function(e,t){if(e&&typeof document<"u"){var n,l=t.prepend===!0?"prepend":"append",u=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(u){var i=ke.indexOf(o);i===-1&&(i=ke.push(o)-1,$[i]={}),n=$[i]&&$[i][l]?$[i][l]:$[i][l]=r()}else n=r();e.charCodeAt(0)===65279&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function r(){var a=document.createElement("style");if(a.setAttribute("type","text/css"),t.attributes)for(var s=Object.keys(t.attributes),d=0;d<s.length;d++)a.setAttribute(s[d],t.attributes[s[d]]);var y=l==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(y,a),a}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var vt=function(){if(Q!=null)return Q;if(typeof HTMLElement>"u"||typeof customElements>"u")return Q=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(Le)}catch{return Q=!1}return Q=!0}(),ft="ecTheme",_t="ecInitOptions",mt="ecUpdateOptions",ht=Re({name:"echarts",props:W(W({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},it),dt),emits:{},inheritAttrs:!1,setup:function(e,t){var n=t.attrs,l=ae(),u=ae(),o=ae(),i=ae(),r=re(ft,null),a=re(_t,null),s=re(mt,null),d=Me(e),y=d.autoresize,D=d.manualUpdate,k=d.loading,b=d.loadingOptions,v=w(function(){return i.value||e.option||null}),p=w(function(){return e.theme||oe(r,{})}),A=w(function(){return e.initOptions||oe(a,{})}),_=w(function(){return e.updateOptions||oe(s,{})}),f=w(function(){return function(O){var C={};for(var T in O)ut(T)||(C[T]=O[T]);return C}(n)}),R=Te().proxy.$listeners;function z(O){if(u.value){var C=o.value=Pe(u.value,p.value,A.value);e.group&&(C.group=e.group);var T=R;T||(T={},Object.keys(n).filter(function(P){return P.indexOf("on")===0&&P.length>2}).forEach(function(P){var M=P.charAt(2).toLowerCase()+P.slice(3);M.substring(M.length-4)==="Once"&&(M="~".concat(M.substring(0,M.length-4))),T[M]=n[P]})),Object.keys(T).forEach(function(P){var M=T[P];if(M){var U=P.toLowerCase();U.charAt(0)==="~"&&(U=U.substring(1),M.__once__=!0);var B=C;if(U.indexOf("zr:")===0&&(B=C.getZr(),U=U.substring(3)),M.__once__){delete M.__once__;var X=M;M=function(){for(var N=[],q=0;q<arguments.length;q++)N[q]=arguments[q];X.apply(void 0,N),B.off(U,M)}}B.on(U,M)}}),y.value?Ve(function(){C&&!C.isDisposed()&&C.resize(),H()}):H()}function H(){var P=O||v.value;P&&C.setOption(P,_.value)}}function F(){o.value&&(o.value.dispose(),o.value=void 0)}var L=null;te(D,function(O){typeof L=="function"&&(L(),L=null),O||(L=te(function(){return e.option},function(C,T){C&&(o.value?o.value.setOption(C,W({notMerge:C!==T},_.value)):z())},{deep:!0}))},{immediate:!0}),te([p,A],function(){F(),z()},{deep:!0}),we(function(){e.group&&o.value&&(o.value.group=e.group)});var m=ot(o);return function(O,C,T){var H=re(ct,{}),P=w(function(){return W(W({},oe(H,{})),T==null?void 0:T.value)});we(function(){var M=O.value;M&&(C.value?M.showLoading(P.value):M.hideLoading())})}(o,k,b),function(O,C,T){var H=null;te([T,O,C],function(P,M,U){var B=P[0],X=P[1],N=P[2];if(B&&X&&N){var q=N===!0?{}:N,ne=q.throttle,Z=ne===void 0?100:ne,ye=q.onResize,be=function(){X.resize(),ye==null||ye()};H=Z?je(be,Z):be,et(B,H)}U(function(){B&&H&&tt(B,H)})})}(o,y,u),pe(function(){z()}),Oe(function(){vt&&l.value?l.value.__dispose=F:F()}),W({chart:o,root:l,inner:u,setOption:function(O,C){e.manualUpdate&&(i.value=O),o.value?o.value.setOption(O,C||{}):z(O)},nonEventAttrs:f},m)},render:function(){var e=W({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Se(Le,e,[Se("div",{ref:"inner",class:"echarts-inner"})])}});const pt={key:0,class:"mx-4 my-4 text-right"},gt={__name:"PanelMainChart",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=K(),l=Fe(),{mobile:u}=Ie(),o=Ne(),i=I({}),r=I({from:null,to:null,fromMenu:!1,toMenu:!1,loaded:!1});let a=[];const s=w(()=>(k(),"height: "+(n.app.panelMaximized?window.innerHeight-250+"px":t.height)));function d(b){return o.d(b,{dateStyle:u.value?"short":"long"})}function y(b,v){let p;return r.value.from&&v&&(p=r.value.from),r.value.to&&!v&&(p=r.value.to),!p&&!isNaN(b)&&(p=(A=>new Date(A.setDate(A.getDate()+(Number(b)||0))))(new Date)),p||(p=new Date(/.*T.*/.test(b)?b:b+"T00:00:00")),!r.value.from&&v&&(r.value.from=p),!r.value.to&&!v&&(r.value.to=p),p=new Date(p.getTime()-p.getTimezoneOffset()*60*1e3),p.toISOString().split("T")[0]}async function D(){let b=n.handleDefs(t.el.serie,["data","name","digits","suffix","type"],[null,"",0,"","line"],!0),v,p,A=[],_,f,R,z,F,L=[];if(b.length>0)for(const m of b){if(/^get.*/.test(m.data)){F="time",v=m.data.split(" ");for(const O of t.devices)O.split(":")[0]===v[1]&&(v[1]=O.split(":")[1]);if(v[4]=y(v[4],!0),v[5]=y(v[5],!1),p=await n.request("text",v.join(" ")),z=[],A=p.split(`
`),A.length>0)for(const O of A)_=O.split(" "),_.length>1&&(f=new Date(_[0].replace("_","T")),R=parseFloat(_[1]).toFixed(m.digits),z.push([f,R]))}else F="category",p=/,/.test(m.data)?m.data:m.data.replace(/ /g,","),/^\[.*\]$/.test(D)||(p="["+p+"]"),z=n.stringToJson(p);L.push({xAxisType:F,type:m.type,name:m.name,digits:m.digits,suffix:m.suffix,data:z})}return L}async function k(){let b={tooltip:{trigger:"axis"},legend:{data:[],bottom:10},backgroundColor:"rgba(255, 255, 255, 0)",grid:{top:30,bottom:60,left:60,right:60},animationDuration:300,series:[],yAxis:[],xAxis:{}},v,p=JSON.parse(JSON.stringify(n.getEl(t.el,["options"])||{})),A=JSON.parse(JSON.stringify(n.getEl(t.el,["options2"])||{})),_=Object.assign(b,n.app.panelMaximized&&Object.keys(A).length>0?A:p);r.value.fromMenu=!1,r.value.toMenu=!1,r.value.loaded=!1,a=await D();for(const[f,R]of Object.entries(a))v={formatter:z=>z.toLocaleString(o.locale.value,{minimumFractionDigits:R.digits,maximumFractionDigits:R.digits})+R.suffix},_.series[f]||(_.series[f]={}),_.yAxis[f]||(_.yAxis[f]={}),_.legend.data||(_.legend.data=[]),_.xAxis.type||(_.xAxis.type=R.xAxisType),_.series[f].name||(_.series[f].name=R.name),_.series[f].type||(_.series[f].type=R.type),_.series[f].data||(_.series[f].data=R.data),_.yAxis[f].type||(_.yAxis[f].type="value"),_.yAxis[f].axisLabel||(_.yAxis[f].axisLabel=v),_.legend.data[f]||(_.legend.data[f]=R.name);n.log(7,"Chartdata chart.loaded.",_),i.value=Object.assign({},_),r.value.loaded=!0}return(b,v)=>{const p=x("v-btn"),A=x("v-date-picker"),_=x("v-locale-provider"),f=x("v-menu"),R=x("v-skeleton-loader");return c(),V(Y,null,[J(n).app.panelMaximized?(c(),V("div",pt,[h(f,{modelValue:r.value.fromMenu,"onUpdate:modelValue":v[2]||(v[2]=z=>r.value.fromMenu=z),"close-on-content-click":!1},{activator:g(({props:z})=>[h(p,se(z,{variant:"outlined","append-icon":"mdi-calendar",class:"mr-2"}),{default:g(()=>[G(j(d(r.value.from)),1)]),_:2},1040)]),default:g(()=>[h(_,{locale:J(o).locale.value},{default:g(()=>[h(A,{modelValue:r.value.from,"onUpdate:modelValue":[v[0]||(v[0]=z=>r.value.from=z),v[1]||(v[1]=z=>k())],color:"secondary"},null,8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["modelValue"]),G(" - "),h(f,{modelValue:r.value.toMenu,"onUpdate:modelValue":v[5]||(v[5]=z=>r.value.toMenu=z),"close-on-content-click":!1},{activator:g(({props:z})=>[h(p,se(z,{variant:"outlined","append-icon":"mdi-calendar",class:"ml-2"}),{default:g(()=>[G(j(d(r.value.to)),1)]),_:2},1040)]),default:g(()=>[h(_,{locale:J(o).locale.value},{default:g(()=>[h(A,{modelValue:r.value.to,"onUpdate:modelValue":[v[3]||(v[3]=z=>r.value.to=z),v[4]||(v[4]=z=>k())],color:"secondary"},null,8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["modelValue"])])):S("",!0),De("div",{style:Ue(s.value)},[r.value.loaded?S("",!0):(c(),E(R,{key:0,type:"text, image, text"})),r.value.loaded?(c(),E(J(ht),{key:1,option:i.value,theme:J(l).global.name.value==="dark"?"dark":"light",autoresize:""},null,8,["option","theme"])):S("",!0)],4)],64)}}},xt=180/Math.PI,Ce=e=>{const t=e%360;return t<0?360+t:t},yt=({x:e,y:t},n)=>{const l=n.left+n.width/2,u=n.top+n.height/2;return Math.atan2(t-u,e-l)*xt},fe=()=>{};class bt{constructor(t,n){this.active=!1,this.element=t,this.element.style.willChange="transform",this.initOptions(n),this.updateCSS(),this.bindHandlers(),this.addListeners()}get angle(){return this._angle}set angle(t){this._angle!==t&&(this._angle=Ce(t),this.updateCSS())}initOptions(t){t=t||{},this.onRotate=t.onRotate||fe,this.onDragStart=t.onDragStart||fe,this.onDragStop=t.onDragStop||fe,this._angle=t.angle||0}bindHandlers(){this.onRotationStart=this.onRotationStart.bind(this),this.onRotated=this.onRotated.bind(this),this.onRotationStop=this.onRotationStop.bind(this)}addListeners(){this.element.addEventListener("touchstart",this.onRotationStart,{passive:!0}),document.addEventListener("touchmove",this.onRotated,{passive:!1}),document.addEventListener("touchend",this.onRotationStop,{passive:!0}),document.addEventListener("touchcancel",this.onRotationStop,{passive:!0}),this.element.addEventListener("mousedown",this.onRotationStart,{passive:!0}),document.addEventListener("mousemove",this.onRotated,{passive:!1}),document.addEventListener("mouseup",this.onRotationStop,{passive:!0}),document.addEventListener("mouseleave",this.onRotationStop,{passive:!1})}removeListeners(){this.element.removeEventListener("touchstart",this.onRotationStart),document.removeEventListener("touchmove",this.onRotated),document.removeEventListener("touchend",this.onRotationStop),document.removeEventListener("touchcancel",this.onRotationStop),this.element.removeEventListener("mousedown",this.onRotationStart),document.removeEventListener("mousemove",this.onRotated),document.removeEventListener("mouseup",this.onRotationStop),document.removeEventListener("mouseleave",this.onRotationStop)}destroy(){this.onRotationStop(),this.removeListeners()}onRotationStart(t){(t.type==="touchstart"||t.button===0)&&(this.active=!0,this.onDragStart(t),this.setAngleFromEvent(t))}onRotationStop(){this.active&&(this.active=!1,this.onDragStop()),this.active=!1}onRotated(t){this.active&&(t.preventDefault(),this.setAngleFromEvent(t))}setAngleFromEvent(t){const n=t.targetTouches?t.targetTouches[0]:t,l=yt({x:n.clientX,y:n.clientY},this.element.getBoundingClientRect());this._angle=Ce(l+90),this.updateCSS(),this.onRotate(this._angle)}updateCSS(){this.element.style.transform="rotate("+this._angle+"deg)"}}const zt=["red","yellow","green","cyan","blue","magenta","red"],Ee={ArrowUp:(e,t)=>e+t,ArrowRight:(e,t)=>e+t,ArrowDown:(e,t)=>e-t,ArrowLeft:(e,t)=>e-t,PageUp:(e,t)=>e+t*10,PageDown:(e,t)=>e-t*10,Home:()=>0,End:()=>359},ce={name:"ColorPicker",emits:["select","input","change"],props:{hue:{default:0},saturation:{default:100},luminosity:{default:50},alpha:{default:1},step:{default:1},mouseScroll:{default:!1},variant:{default:"collapsible"},disabled:{default:!1},initiallyCollapsed:{default:!1},ariaLabel:{default:"color picker"},ariaRoledescription:{default:"radial slider"},ariaValuetext:{default:""},ariaLabelColorWell:{default:"color well"}},setup(e,{emit:t}){const n=I(null),l=I(null);let u=null;const o=e.hue+"deg",i=I(e.hue),r=I(!e.initiallyCollapsed),a=I(!e.initiallyCollapsed),s=I(!1),d=I(!1),y=I(!1),D=w(()=>`hsla(${i.value}, ${e.saturation}%, ${e.luminosity}%, ${e.alpha})`),k=w(()=>zt[Math.round(i.value/60)]);return te(()=>e.hue,f=>{i.value=f,u.angle=f}),pe(()=>{u=new bt(l.value,{angle:i.value,onRotate(f){i.value=f,t("input",i.value)},onDragStart(){y.value=!0},onDragStop(){y.value=!1,t("change",i.value)}})}),Oe(()=>{u.destroy(),u=null}),{rcp:u,el:n,rotator:l,initialAngle:o,angle:i,isPaletteIn:r,isKnobIn:a,isDragging:y,isRippling:d,isPressed:s,color:D,valuetext:k,onKeyDown:f=>{e.disabled||s.value||!a.value||!(f.key in Ee)||(f.preventDefault(),u.angle=Ee[f.key](u.angle,e.step),i.value=u.angle,t("input",i.value),t("change",i.value))},onScroll:f=>{s.value||!a.value||(f.preventDefault(),f.deltaY>0?u.angle+=e.step:u.angle-=e.step,i.value=u.angle,t("input",i.value),t("change",i.value))},selectColor:()=>{s.value=!0,r.value&&a.value?(t("select",i.value),d.value=!0):r.value=!0},togglePicker:()=>{e.variant!=="persistent"&&(a.value?a.value=!1:(a.value=!0,r.value=!0)),d.value=!1,s.value=!1},hidePalette:()=>{a.value||(r.value=!1)}}}};function wt(e,t,n,l,u,o){return c(),E("div",{ref:"el",role:"slider","aria-roledescription":n.ariaRoledescription,"aria-label":n.ariaLabel,"aria-expanded":l.isPaletteIn,"aria-valuemin":"0","aria-valuemax":"359","aria-valuenow":l.angle,"aria-valuetext":n.ariaValuetext||l.valuetext,"aria-disabled":n.disabled,class:["rcp",{dragging:l.isDragging,disabled:n.disabled}],tabindex:n.disabled?-1:0,style:{"--rcp-initial-angle":l.initialAngle},onKeyup:t[4]||(t[4]=Be((...i)=>l.selectColor&&l.selectColor(...i),["enter"])),onKeydown:t[5]||(t[5]=(...i)=>l.onKeyDown&&l.onKeyDown(...i))},[h("div",{class:["rcp__palette",l.isPaletteIn?"in":"out"]},null,2),h("div",se({class:"rcp__rotator",style:{"pointer-events":n.disabled||l.isPressed||!l.isKnobIn?"none":null}},He(n.mouseScroll?{wheel:l.onScroll}:{}),{ref:"rotator"}),[h("div",{class:["rcp__knob",l.isKnobIn?"in":"out"],onTransitionend:t[1]||(t[1]=(...i)=>l.hidePalette&&l.hidePalette(...i))},null,34)],16),h("div",{class:["rcp__ripple",{rippling:l.isRippling}],style:{borderColor:l.color}},null,6),h("button",{type:"button",class:["rcp__well",{pressed:l.isPressed}],"aria-label":n.ariaLabelColorWell,disabled:n.disabled,tabindex:n.disabled?-1:0,style:{backgroundColor:l.color},onAnimationend:t[2]||(t[2]=(...i)=>l.togglePicker&&l.togglePicker(...i)),onClick:t[3]||(t[3]=(...i)=>l.selectColor&&l.selectColor(...i))},null,46,["aria-label","disabled","tabindex"])],46,["aria-roledescription","aria-label","aria-expanded","aria-valuenow","aria-valuetext","aria-disabled","tabindex"])}ce.render=wt;ce.install=function(e){e.component("ColorPicker",ce)};const St={class:"ma-2"},kt={__name:"PanelMainColorpicker",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){return K(),(t,n)=>(c(),V("div",St,[h(J(ce),{"initially-collapsed":!0})]))}},Ct={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(e){const t=K();function n(r,a){return t.handleDefs(r[a].size,["size"],[!1]).size}function l(r){let a="";return["info"].indexOf(r)!==-1&&(a="mx-2"),a}function u(r,a){return r[a]?t.handleDefs(r[a].divider,["show"],[!1]).show:!1}function o(r){return r.level?t.handleDefs(r.level.height,["height"],["64px"]).height:"64px"}function i(r){if(r==="info")return We;if(r==="btn")return Ke;if(r==="slider")return Je;if(r==="image")return Ge;if(r==="menu")return Ye;if(r==="chart")return gt;if(r==="colorpicker")return kt}return(r,a)=>{const s=x("v-sheet"),d=x("v-col"),y=x("v-divider"),D=x("v-row"),k=x("v-expand-transition");return c(!0),V(Y,null,_e(e.main,(b,v)=>(c(),V("div",{key:v},[h(k,null,{default:g(()=>[e.levels.indexOf(v)!==-1?(c(),E(D,{key:0,"no-gutters":"",class:"text-center align-center"},{default:g(()=>[h(s,{height:o(b,"level")},null,8,["height"]),(c(),V(Y,null,_e(["left1","left2","mid","right1","right2"],p=>(c(),V(Y,{key:p},[b.level[p]?(c(),E(d,{key:0,cols:n(b,p),class:ee(l(b.level[p]))},{default:g(()=>[(c(),E(qe(i(b.level[p])),{el:b[p],iconmap:e.iconmap,devices:e.devices,height:o(b,"level")},null,8,["el","iconmap","devices","height"]))]),_:2},1032,["cols","class"])):S("",!0),u(b,p)?(c(),E(y,{key:1,vertical:""})):S("",!0)],64))),64)),u(b,"level")?(c(),E(y,{key:0})):S("",!0)]),_:2},1024)):S("",!0)]),_:2},1024)]))),128)}}},Et={key:1},Dt={key:3},Ot={key:1},At={key:3},Lt={key:1},Rt={key:3},Tt={__name:"PanelCard",props:{panel:Object},setup(e){const t=e,n=K();let l=n.thread();pe(()=>n.thread(l));function u(L){let m=n.handleDefs(t.panel.status[L],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return m.level=Math.round((m.level-m.min)/(m.max-m.min)*100),m}const o=w(()=>u("bar")),i=w(()=>u("bar2")),r=w(()=>n.handleDefs(t.panel.status.imageUrl,["url"],[""])),a=w(()=>n.handleDefs(t.panel.status.title,["title"],[""])),s=w(()=>n.handleDefs(t.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),d=I(s.value.expanded),y=w(()=>{let L=null;return s.value.expandable&&(L=d.value?"mdi-arrow-collapse":"mdi-arrow-expand"),!s.value.expandable&&!s.value.expanded&&t.panel.main.length>1&&(L="mdi-swap-vertical"),L}),D=w(()=>{let L=[];for(const[m,O]of Object.entries(t.panel.main))n.handleDefs(O.level.show,["show"],[!0]).show&&L.push(Number(m));return L});function k(L){let m=-1;s.value.expandable||!s.value.expandable&&s.value.expanded?(L||(s.value.maximizable&&(n.app.panelMaximized=d.value?!1:t.panel),d.value=!d.value),b.value=d.value?D.value:[D.value[0]]):(m=D.value.indexOf(b.value?b.value[0]:null),b.value=m===-1||m===D.value.length-1?[D.value[0]]:[D.value[m+1]])}const b=I([]);function v(L){let m=n.handleDefs(t.panel.info[L],["text","icon","color"],["","",""]);return m.icon&&(m.icon=n.getIcon(m.icon,t.panel.panel.iconmap)),m}function p(){let L=!!(A.value.text||_.value.text),m=!!(f.value.text||R.value.text),O=!!(z.value.text||F.value.text);return!L&&m&&!O?7:null}const A=w(()=>v("left1")),_=w(()=>v("left2")),f=w(()=>v("mid1")),R=w(()=>v("mid2")),z=w(()=>v("right1")),F=w(()=>v("right2"));return k(!0),(L,m)=>{const O=x("v-progress-linear"),C=x("v-col"),T=x("v-row"),H=x("v-spacer"),P=x("v-btn"),M=x("v-card-title"),U=x("v-img"),B=x("v-sheet"),X=x("v-divider"),N=x("v-icon"),q=x("v-card-text"),ne=x("v-card");return c(),E(ne,{variant:"tonal"},{default:g(()=>[h(T,{"no-gutters":""},{default:g(()=>[e.panel.status.bar?(c(),E(C,{key:0},{default:g(()=>[h(O,{height:"7",modelValue:o.value.level,"onUpdate:modelValue":m[0]||(m[0]=Z=>o.value.level=Z),color:o.value.color,reverse:o.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):S("",!0),e.panel.status.bar2?(c(),E(C,{key:1},{default:g(()=>[h(O,{height:"7",modelValue:i.value.level,"onUpdate:modelValue":m[1]||(m[1]=Z=>i.value.level=Z),color:i.value.color,reverse:i.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):S("",!0)]),_:1}),h(B,{color:"secondary"},{default:g(()=>[h(U,{src:r.value.url,gradient:r.value.url?J(n).app.header.imageGradient:"",height:"48",cover:""},{default:g(()=>[e.panel.status.title?(c(),E(M,{key:0},{default:g(()=>[h(T,{"no-gutters":""},{default:g(()=>[h(C,null,{default:g(()=>[G(j(a.value.title),1)]),_:1}),h(H),y.value?(c(),E(C,{key:0,cols:"1",class:"text-right"},{default:g(()=>[h(P,{icon:y.value,size:"small",variant:"plain",density:"compact",onClick:m[2]||(m[2]=Z=>k(!1))},null,8,["icon"])]),_:1})):S("",!0)]),_:1})]),_:1})):S("",!0)]),_:1},8,["src","gradient"])]),_:1}),h(X),h(Ct,{main:e.panel.main,levels:b.value,iconmap:e.panel.panel.iconmap,devices:e.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),h(B,{color:"secondary"},{default:g(()=>[h(q,{class:"pa-1"},{default:g(()=>[h(T,{"no-gutters":""},{default:g(()=>[h(C,{class:"text-truncate text-left"},{default:g(()=>[A.value.icon?(c(),E(N,{key:0,icon:A.value.icon,color:A.value.color,size:"small"},null,8,["icon","color"])):S("",!0),A.value.text?(c(),V("span",Et,j(A.value.text),1)):S("",!0),_.value.icon?(c(),E(N,{key:2,icon:_.value.icon,color:_.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):S("",!0),_.value.text?(c(),V("span",Dt,j(_.value.text),1)):S("",!0)]),_:1}),h(C,{class:"text-truncate text-center",cols:p()},{default:g(()=>[f.value.icon?(c(),E(N,{key:0,icon:f.value.icon,color:f.value.color,size:"small"},null,8,["icon","color"])):S("",!0),f.value.text?(c(),V("span",Ot,j(f.value.text),1)):S("",!0),R.value.icon?(c(),E(N,{key:2,icon:R.value.icon,color:R.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):S("",!0),R.value.text?(c(),V("span",At,j(R.value.text),1)):S("",!0)]),_:1},8,["cols"]),h(C,{class:"text-truncate text-right"},{default:g(()=>[z.value.icon?(c(),E(N,{key:0,icon:z.value.icon,color:z.value.color,size:"small"},null,8,["icon","color"])):S("",!0),z.value.text?(c(),V("span",Lt,j(z.value.text),1)):S("",!0),F.value.icon?(c(),E(N,{key:2,icon:F.value.icon,color:F.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):S("",!0),F.value.text?(c(),V("span",Rt,j(F.value.text),1)):S("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Tt as _};
