import{u as J,c as z,r as m,o as c,b as $,s as ee,t as R,k as y,a as O,w as _,j as B,x as ke,F as W,e as h,y as ye,f as K,p as de,d as ve,l as Ce,z as ne,A as re,B as Ee,C as Se,q as ae,D as be,E as me,G as Me,m as ze,H as Ae,I as Ve,h as Z,J as Te,K as Le,i as je,L as $e,M as Ne,N as Re}from"./index-e6ee90b6.js";const Ue={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object,height:String},setup(e){const t=e,n=J(),s=z(()=>n.handleDefs(t.el.text,["text","format"],["",!t.el.text2&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),u=z(()=>n.handleDefs(t.el.text2,["text","format"],["",t.el.text&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),a=z(()=>n.handleDefs(t.el.text3,["text","format"],["","text-caption"])),l=z(()=>{let r=n.handleDefs(t.el.icon,["icon","color","size"],["","","x-large"]);return r.icon&&(r.icon=n.getIcon(r.icon,t.iconmap)),r}),i=z(()=>{let r=n.handleDefs(t.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return r.level=Math.round((r.level-r.min)/(r.max-r.min)*100),r.reverse=!!r.reverse,r});return(r,o)=>{const d=m("v-icon"),g=m("v-progress-circular"),E=m("v-progress-linear");return c(),$(W,null,[e.el.text?(c(),$("div",{key:0,class:ee(s.value.format)},R(s.value.text),3)):y("",!0),e.el.icon?(c(),O(d,{key:1,color:l.value.color,size:l.value.size},{default:_(()=>[B(R(l.value.icon),1)]),_:1},8,["color","size"])):y("",!0),e.el.status&&!i.value.linear?(c(),O(g,{key:2,width:"4",modelValue:i.value.level,"onUpdate:modelValue":o[0]||(o[0]=D=>i.value.level=D),color:i.value.color,reverse:i.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),e.el.status&&i.value.linear?(c(),O(E,{key:3,height:"7",rounded:"",modelValue:i.value.level,"onUpdate:modelValue":o[1]||(o[1]=D=>i.value.level=D),color:i.value.color,reverse:i.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),ke("div",{class:ee(e.el.text2?u.value.format:a.value.format)},[e.el.text2?(c(),$("span",{key:0,class:ee(u.value.format)},R(u.value.text),3)):y("",!0),e.el.text3?(c(),$("span",{key:1,class:ee(a.value.format)},R(a.value.text),3)):y("",!0)],2)],64)}}},Fe={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),s=z(()=>{let r=n.handleDefs(t.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return r.icon&&(r.icon=n.getIcon(r.icon,t.iconmap)),r}),u=z(()=>{let r=n.handleDefs(t.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return r.level=Math.round((r.level-r.min)/(r.max-r.min)*100),r.reverse=!!r.reverse,r}),a={timer:!1,long:!1};function l(r){let o=[],d=r.cmd;if(r.type==="cmd"){for(const g of t.devices)o=g.split(":"),RegExp(o[0]).test(d)&&(d=d.replace(o[0],o[1]));n.request("text",d)}r.type==="route"&&ye.push({name:"devices",params:{view:r.cmd},query:ye.currentRoute.value.query}),r.type==="url"&&window.open(r.cmd,"_self")}function i(r){let o=n.handleDefs(t.el.click,["cmd","type"],["","cmd"]),d=n.handleDefs(t.el.longClick,["cmd","type"],["","cmd"]),g=n.handleDefs(t.el.longRelease,["cmd","type"],["","cmd"]);(r==="touchStart"||r==="mouseStart")&&(a.timer=setTimeout(()=>{a.long=!0,d.cmd&&l(d)},1e3)),(r==="touchEnd"||r==="mouseEnd")&&(a.long?g.cmd&&l(g):o.cmd&&l(o),clearTimeout(a.timer),a.long=!1)}return(r,o)=>{const d=m("v-progress-linear"),g=m("v-icon"),E=m("v-btn");return c(),$(W,null,[e.el.status?(c(),O(d,{key:0,height:"4",modelValue:u.value.level,"onUpdate:modelValue":o[0]||(o[0]=D=>u.value.level=D),color:u.value.color,reverse:u.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),h(E,{icon:"",variant:s.value.variant,disabled:s.value.disabled,color:s.value.color,onTouchstart:o[1]||(o[1]=D=>i("touchStart")),onTouchend:o[2]||(o[2]=D=>i("touchEnd")),onMousedown:o[3]||(o[3]=D=>i("mouseStart")),onMouseup:o[4]||(o[4]=D=>i("mouseEnd")),class:"my-2"},{default:_(()=>[h(g,{size:"large"},{default:_(()=>[B(R(s.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},Pe={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),s=K();function u(r){s.value=r}const a=z(()=>{let r=n.handleDefs(t.el.slider,["cmd","current","color","min","max","steps","reverse","size","vertical"],["",0,"",0,100,10,!1,4,!1]);return/%v/.test(r.current)&&(r.current=r.current.replace("%v",s.value)),u(r.current),r});let l=null;function i(r){let o=a.value.cmd,d=/\./.exec(a.value.steps),g=0,E=[];d&&(g=a.value.steps.slice(d.index).length-1),o=o.replace("%v",r.toFixed(g));for(const D of t.devices)E=D.split(":"),RegExp(E[0]).test(o)&&(o=o.replace(E[0],E[1]));clearTimeout(l),l=setTimeout(()=>{n.request("text",o)},500)}return(r,o)=>{const d=m("v-slider");return c(),O(d,{modelValue:s.value,"onUpdate:modelValue":[o[0]||(o[0]=g=>s.value=g),o[1]||(o[1]=g=>i(g))],min:a.value.min,max:a.value.max,step:a.value.steps,reverse:a.value.reverse,direction:a.value.vertical?"vertical":"horizontal","track-size":a.value.size,color:a.value.color,"hide-details":"","thumb-label":""},null,8,["modelValue","min","max","step","reverse","direction","track-size","color"])}}},Ie={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),s=K(!1),u=z(()=>n.handleDefs(t.el.image,["source","height"],["",null]));return(a,l)=>{const i=m("v-skeleton-loader"),r=m("v-img");return c(),$(W,null,[s.value?y("",!0):(c(),O(i,{key:0,type:"image"})),h(r,{src:u.value.source,height:u.value.height,onLoad:l[0]||(l[0]=o=>s.value=!0)},null,8,["src","height"])],64)}}},He={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),s=z(()=>{let a=[],l=n.handleDefs(t.el.menu,["name","cmd"],["",""],!0,","),i={};for(const r of l)i={name:/:/.test(r.name)?r.name.split(":")[0]:r.name,cmd:/:/.test(r.cmd)?r.cmd.split(":")[1]:r.cmd},a.push(i);return a});function u(a){let l=[];for(const i of t.devices)l=i.split(":"),RegExp(l[0]).test(a)&&(a=a.replace(l[0],l[1]));n.request("text",a)}return(a,l)=>{const i=m("v-icon"),r=m("v-btn"),o=m("v-list-item-title"),d=m("v-list-item"),g=m("v-list"),E=m("v-menu");return c(),O(E,null,{activator:_(({props:D})=>[h(r,de({icon:"",variant:"text"},D,{disabled:s.value.length<1}),{default:_(()=>[h(i,{size:"large"},{default:_(()=>[B(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:_(()=>[h(g,null,{default:_(()=>[(c(!0),$(W,null,ve(s.value,(D,C)=>(c(),O(d,{key:C,value:C,onClick:x=>u(D.cmd)},{default:_(()=>[h(o,null,{default:_(()=>[B(R(D.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}};var ue=null;function qe(e){return ue||(ue=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),ue(e)}var ce=null;function Be(e){ce||(ce=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),ce(e)}function We(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function oe(e,t){t===void 0&&(t={});var n=document.createElement(e);return Object.keys(t).forEach(function(s){n[s]=t[s]}),n}function Oe(e,t,n){var s=window.getComputedStyle(e,n||null)||{display:"none"};return s[t]}function fe(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(Oe(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var Je='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',_e=0,ie=null;function Ge(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Qe.bind(e));var n=e.__resize_listeners__;if(!n){if(e.__resize_listeners__=[],window.ResizeObserver){var s=e.offsetWidth,u=e.offsetHeight,a=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===s&&e.offsetHeight===u)||se(e)}),l=fe(e),i=l.detached,r=l.rendered;e.__resize_observer_triggered__=i===!1&&r===!1,e.__resize_observer__=a,a.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){se(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(_e||(ie=We(Je)),Xe(e),e.__resize_rendered__=fe(e).rendered,window.MutationObserver){var o=new MutationObserver(e.__resize_mutation_handler__);o.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=o}}e.__resize_listeners__.push(t),_e++}function Ze(e,t){var n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",pe),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--_e&&ie&&ie.parentNode.removeChild(ie)}}function Ke(e){var t=e.__resize_last__,n=t.width,s=t.height,u=e.offsetWidth,a=e.offsetHeight;return u!==n||a!==s?{width:u,height:a}:null}function Qe(){var e=fe(this),t=e.rendered,n=e.detached;t!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(he(this),this.addEventListener("scroll",pe,!0)),this.__resize_rendered__=t,se(this))}function pe(){var e=this;he(this),this.__resize_raf__&&Be(this.__resize_raf__),this.__resize_raf__=qe(function(){var t=Ke(e);t&&(e.__resize_last__=t,se(e))})}function se(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Xe(e){var t=Oe(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var n=oe("div",{className:"resize-triggers"}),s=oe("div",{className:"resize-expand-trigger"}),u=oe("div"),a=oe("div",{className:"resize-contract-trigger"});s.appendChild(u),n.appendChild(s),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:s,expandChild:u,contract:a},he(e),e.addEventListener("scroll",pe,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function he(e){var t=e.__resize_triggers__,n=t.expand,s=t.expandChild,u=t.contract,a=u.scrollWidth,l=u.scrollHeight,i=n.offsetWidth,r=n.offsetHeight,o=n.scrollWidth,d=n.scrollHeight;u.scrollLeft=a,u.scrollTop=l,s.style.width=i+1+"px",s.style.height=r+1+"px",n.scrollLeft=o,n.scrollTop=d}var q=function(){return q=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},q.apply(this,arguments)};var Ye=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function et(e){return t=Object.create(null),Ye.forEach(function(n){t[n]=function(s){return function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[s].apply(e.value,u)}}(n)}),t;var t}var tt={autoresize:[Boolean,Object]},nt=/^on[^a-z]/,rt=function(e){return nt.test(e)};function le(e,t){var n=Z(e);return n&&typeof n=="object"&&"value"in n?n.value||t:n||t}var at="ecLoadingOptions",ot={loading:Boolean,loadingOptions:Object},X=null,De="x-vue-echarts",we=[],Y=[];(function(e,t){if(e&&typeof document<"u"){var n,s=t.prepend===!0?"prepend":"append",u=t.singleTag===!0,a=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(u){var l=we.indexOf(a);l===-1&&(l=we.push(a)-1,Y[l]={}),n=Y[l]&&Y[l][s]?Y[l][s]:Y[l][s]=i()}else n=i();e.charCodeAt(0)===65279&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function i(){var r=document.createElement("style");if(r.setAttribute("type","text/css"),t.attributes)for(var o=Object.keys(t.attributes),d=0;d<o.length;d++)r.setAttribute(o[d],t.attributes[o[d]]);var g=s==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(g,r),r}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var lt=function(){if(X!=null)return X;if(typeof HTMLElement>"u"||typeof customElements>"u")return X=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(De)}catch{return X=!1}return X=!0}(),it="ecTheme",st="ecInitOptions",ut="ecUpdateOptions",ct=Ce({name:"echarts",props:q(q({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},tt),ot),emits:{},inheritAttrs:!1,setup:function(e,t){var n=t.attrs,s=ne(),u=ne(),a=ne(),l=ne(),i=re(it,null),r=re(st,null),o=re(ut,null),d=Ee(e),g=d.autoresize,E=d.manualUpdate,D=d.loading,C=d.loadingOptions,x=z(function(){return l.value||e.option||null}),v=z(function(){return e.theme||le(i,{})}),V=z(function(){return e.initOptions||le(r,{})}),b=z(function(){return e.updateOptions||le(o,{})}),M=z(function(){return function(A){var k={};for(var T in A)rt(T)||(k[T]=A[T]);return k}(n)}),N=Se().proxy.$listeners;function j(A){if(u.value){var k=a.value=Ae(u.value,v.value,V.value);e.group&&(k.group=e.group);var T=N;T||(T={},Object.keys(n).filter(function(L){return L.indexOf("on")===0&&L.length>2}).forEach(function(L){var S=L.charAt(2).toLowerCase()+L.slice(3);S.substring(S.length-4)==="Once"&&(S="~".concat(S.substring(0,S.length-4))),T[S]=n[L]})),Object.keys(T).forEach(function(L){var S=T[L];if(S){var F=L.toLowerCase();F.charAt(0)==="~"&&(F=F.substring(1),S.__once__=!0);var I=k;if(F.indexOf("zr:")===0&&(I=k.getZr(),F=F.substring(3)),S.__once__){delete S.__once__;var Q=S;S=function(){for(var U=[],H=0;H<arguments.length;H++)U[H]=arguments[H];Q.apply(void 0,U),I.off(F,S)}}I.on(F,S)}}),g.value?Ve(function(){k&&!k.isDisposed()&&k.resize(),P()}):P()}function P(){var L=A||x.value;L&&k.setOption(L,b.value)}}function w(){a.value&&(a.value.dispose(),a.value=void 0)}var p=null;ae(E,function(A){typeof p=="function"&&(p(),p=null),A||(p=ae(function(){return e.option},function(k,T){k&&(a.value?a.value.setOption(k,q({notMerge:k!==T},b.value)):j())},{deep:!0}))},{immediate:!0}),ae([v,V],function(){w(),j()},{deep:!0}),be(function(){e.group&&a.value&&(a.value.group=e.group)});var f=et(a);return function(A,k,T){var P=re(at,{}),L=z(function(){return q(q({},le(P,{})),T==null?void 0:T.value)});be(function(){var S=A.value;S&&(k.value?S.showLoading(L.value):S.hideLoading())})}(a,D,C),function(A,k,T){var P=null;ae([T,A,k],function(L,S,F){var I=L[0],Q=L[1],U=L[2];if(I&&Q&&U){var H=U===!0?{}:U,te=H.throttle,G=te===void 0?100:te,ge=H.onResize,xe=function(){Q.resize(),ge==null||ge()};P=G?Te(xe,G):xe,Ge(I,P)}F(function(){I&&P&&Ze(I,P)})})}(a,g,u),me(function(){j()}),Me(function(){lt&&s.value?s.value.__dispose=w:w()}),q({chart:a,root:s,inner:u,setOption:function(A,k){e.manualUpdate&&(l.value=A),a.value?a.value.setOption(A,k||{}):j(A)},nonEventAttrs:M},f)},render:function(){var e=q({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",ze(De,e,[ze("div",{ref:"inner",class:"echarts-inner"})])}});const dt={key:0,class:"mx-4 my-4 text-right"},vt={__name:"PanelMainChart",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=J(),s=Le(),{mobile:u}=je(),a=$e(),l=K({from:new Date,to:new Date,fromMenu:!1,toMenu:!1}),i=z(()=>"height: "+(n.app.panelMaximized?window.innerHeight-250+"px":t.height)),r=K({}),o=K(!1);function d(x){return a.d(x,{dateStyle:u.value?"short":"long"})}function g(x){if(typeof x=="object"){const v=x.getTimezoneOffset();x=new Date(x.getTime()-v*60*1e3).toISOString().split("T")[0]}return isNaN(x)?x:(v=>new Date(v.setDate(v.getDate()+(Number(x)||0))).toISOString())(new Date).split("T")[0]}async function E(x,v,V){let b=x.split(" "),M,N=[],j,w,p=[];for(const f of t.devices)f.split(":")[0]===b[1]&&(b[1]=f.split(":")[1]);if(b[4]=g(V==="from"?g(l.value.from):b[4]),b[5]=g(V==="to"?g(l.value.to):b[5]),V||(l.value.from=new Date(b[4]),l.value.to=new Date(b[5])),M=await n.request("text",b.join(" ")),N=M.split(`
`),N.length>0)for(const f of N)j=new Date(f.split(" ")[0].replace("_","T")),w=parseFloat(f.split(" ")[1]).toFixed(v),p.push([j,w]);return p}function D(x){let v=/,/.test(x)?x:x.replace(/ /g,",");return/^\[.*\]$/.test(v)||(v="["+v+"]"),n.stringToJson(v)}async function C(x){let v,V=n.handleDefs(t.el.serie,["data","name","digits","suffix","type"],[null,"",0,"","line"],!0),b={tooltip:{trigger:"axis"},legend:{data:[],bottom:10},backgroundColor:"rgba(255, 255, 255, 0)",grid:{top:30,bottom:60,left:60,right:60},animationDuration:300,series:[],yAxis:[],xAxis:{}},M=JSON.parse(JSON.stringify(n.getEl(t.el,["options"])||{})),N=[],j;if(x&&(l.value[x+"Menu"]=!1),o.value=!1,V.length>0){M.series&&M.series.length>0&&(N=M.series,delete M.series);for(const[w,p]of Object.entries(V))v=/^get.*/.test(p.data)?await E(p.data,p.digits,x):D(p.data),j={formatter:f=>f.toLocaleString(a.locale.value,{minimumFractionDigits:p.digits,maximumFractionDigits:p.digits})+p.suffix},b.xAxis.type=/^get.*/.test(p.data)?"time":"category",b.series.push(Object.assign({name:p.name,type:p.type,data:v},N[w]||{})),b.yAxis.push({type:"value",axisLabel:j}),b.legend.data.push(p.name);Object.keys(M).length>0&&Object.assign(b,M),n.log(7,"Chartdata loaded.",b),r.value=Object.assign({},b),o.value=!0}}return me(()=>{C()}),(x,v)=>{const V=m("v-btn"),b=m("v-date-picker"),M=m("v-locale-provider"),N=m("v-menu"),j=m("v-skeleton-loader");return c(),$(W,null,[Z(n).app.panelMaximized?(c(),$("div",dt,[h(N,{modelValue:l.value.fromMenu,"onUpdate:modelValue":v[2]||(v[2]=w=>l.value.fromMenu=w),"close-on-content-click":!1},{activator:_(({props:w})=>[h(V,de(w,{variant:"outlined","append-icon":"mdi-calendar",class:"mr-2"}),{default:_(()=>[B(R(d(l.value.from)),1)]),_:2},1040)]),default:_(()=>[h(M,{locale:Z(a).locale.value},{default:_(()=>[h(b,{modelValue:l.value.from,"onUpdate:modelValue":[v[0]||(v[0]=w=>l.value.from=w),v[1]||(v[1]=w=>C("from"))],color:"secondary"},null,8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["modelValue"]),B(" - "),h(N,{modelValue:l.value.toMenu,"onUpdate:modelValue":v[5]||(v[5]=w=>l.value.toMenu=w),"close-on-content-click":!1},{activator:_(({props:w})=>[h(V,de(w,{variant:"outlined","append-icon":"mdi-calendar",class:"ml-2"}),{default:_(()=>[B(R(d(l.value.to)),1)]),_:2},1040)]),default:_(()=>[h(M,{locale:Z(a).locale.value},{default:_(()=>[h(b,{modelValue:l.value.to,"onUpdate:modelValue":[v[3]||(v[3]=w=>l.value.to=w),v[4]||(v[4]=w=>C("to"))],color:"secondary"},null,8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["modelValue"])])):y("",!0),ke("div",{style:Ne(i.value)},[o.value?y("",!0):(c(),O(j,{key:0,type:"text, image, text"})),o.value?(c(),O(Z(ct),{key:1,option:r.value,theme:Z(s).global.name.value==="dark"?"dark":"light",autoresize:""},null,8,["option","theme"])):y("",!0)],4)],64)}}},ft={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(e){const t=J();function n(i,r){return t.handleDefs(i[r].size,["size"],[!1]).size}function s(i){let r="";return["info"].indexOf(i)!==-1&&(r="mx-2"),r}function u(i,r){return i[r]?t.handleDefs(i[r].divider,["show"],[!1]).show:!1}function a(i){return i.level?t.handleDefs(i.level.height,["height"],["64px"]).height:"64px"}function l(i){if(i==="info")return Ue;if(i==="btn")return Fe;if(i==="slider")return Pe;if(i==="image")return Ie;if(i==="menu")return He;if(i==="chart")return vt}return(i,r)=>{const o=m("v-sheet"),d=m("v-col"),g=m("v-divider"),E=m("v-row"),D=m("v-expand-transition");return c(!0),$(W,null,ve(e.main,(C,x)=>(c(),$("div",{key:x},[h(D,null,{default:_(()=>[e.levels.indexOf(x)!==-1?(c(),O(E,{key:0,"no-gutters":"",class:"text-center align-center"},{default:_(()=>[h(o,{height:a(C,"level")},null,8,["height"]),(c(),$(W,null,ve(["left1","left2","mid","right1","right2"],v=>(c(),$(W,{key:v},[C.level[v]?(c(),O(d,{key:0,cols:n(C,v),class:ee(s(C.level[v]))},{default:_(()=>[(c(),O(Re(l(C.level[v])),{el:C[v],iconmap:e.iconmap,devices:e.devices,height:a(C,"level")},null,8,["el","iconmap","devices","height"]))]),_:2},1032,["cols","class"])):y("",!0),u(C,v)?(c(),O(g,{key:1,vertical:""})):y("",!0)],64))),64)),u(C,"level")?(c(),O(g,{key:0})):y("",!0)]),_:2},1024)):y("",!0)]),_:2},1024)]))),128)}}},_t={key:1},mt={key:3},pt={key:1},ht={key:3},gt={key:1},xt={key:3},bt={__name:"PanelCard",props:{panel:Object},setup(e){const t=e,n=J();let s=n.thread();me(()=>n.thread(s));function u(p){let f=n.handleDefs(t.panel.status[p],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return f.level=Math.round((f.level-f.min)/(f.max-f.min)*100),f}const a=z(()=>u("bar")),l=z(()=>u("bar2")),i=z(()=>n.handleDefs(t.panel.status.imageUrl,["url"],[""])),r=z(()=>n.handleDefs(t.panel.status.title,["title"],[""])),o=z(()=>n.handleDefs(t.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),d=K(o.value.expanded),g=z(()=>{let p=null;return o.value.expandable&&(p=d.value?"mdi-arrow-collapse":"mdi-arrow-expand"),!o.value.expandable&&!o.value.expanded&&t.panel.main.length>1&&(p="mdi-swap-vertical"),p}),E=z(()=>{let p=[];for(const[f,A]of Object.entries(t.panel.main))n.handleDefs(A.level.show,["show"],[!0]).show&&p.push(Number(f));return p});function D(p){let f=-1;o.value.expandable||!o.value.expandable&&o.value.expanded?(p||(o.value.maximizable&&(n.app.panelMaximized=d.value?!1:t.panel),d.value=!d.value),C.value=d.value?E.value:[E.value[0]]):(f=E.value.indexOf(C.value?C.value[0]:null),C.value=f===-1||f===E.value.length-1?[E.value[0]]:[E.value[f+1]])}const C=K([]);function x(p){let f=n.handleDefs(t.panel.info[p],["text","icon","color"],["","",""]);return f.icon&&(f.icon=n.getIcon(f.icon,t.panel.panel.iconmap)),f}function v(){let p=!!(V.value.text||b.value.text),f=!!(M.value.text||N.value.text),A=!!(j.value.text||w.value.text);return!p&&f&&!A?7:null}const V=z(()=>x("left1")),b=z(()=>x("left2")),M=z(()=>x("mid1")),N=z(()=>x("mid2")),j=z(()=>x("right1")),w=z(()=>x("right2"));return D(!0),(p,f)=>{const A=m("v-progress-linear"),k=m("v-col"),T=m("v-row"),P=m("v-spacer"),L=m("v-btn"),S=m("v-card-title"),F=m("v-img"),I=m("v-sheet"),Q=m("v-divider"),U=m("v-icon"),H=m("v-card-text"),te=m("v-card");return c(),O(te,{variant:"tonal"},{default:_(()=>[h(T,{"no-gutters":""},{default:_(()=>[e.panel.status.bar?(c(),O(k,{key:0},{default:_(()=>[h(A,{height:"7",modelValue:a.value.level,"onUpdate:modelValue":f[0]||(f[0]=G=>a.value.level=G),color:a.value.color,reverse:a.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):y("",!0),e.panel.status.bar2?(c(),O(k,{key:1},{default:_(()=>[h(A,{height:"7",modelValue:l.value.level,"onUpdate:modelValue":f[1]||(f[1]=G=>l.value.level=G),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):y("",!0)]),_:1}),h(I,{color:"secondary"},{default:_(()=>[h(F,{src:i.value.url,gradient:i.value.url?Z(n).app.header.imageGradient:"",height:"48",cover:""},{default:_(()=>[e.panel.status.title?(c(),O(S,{key:0},{default:_(()=>[h(T,{"no-gutters":""},{default:_(()=>[h(k,null,{default:_(()=>[B(R(r.value.title),1)]),_:1}),h(P),g.value?(c(),O(k,{key:0,cols:"1",class:"text-right"},{default:_(()=>[h(L,{icon:g.value,size:"small",variant:"plain",density:"compact",onClick:f[2]||(f[2]=G=>D(!1))},null,8,["icon"])]),_:1})):y("",!0)]),_:1})]),_:1})):y("",!0)]),_:1},8,["src","gradient"])]),_:1}),h(Q),h(ft,{main:e.panel.main,levels:C.value,iconmap:e.panel.panel.iconmap,devices:e.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),h(I,{color:"secondary"},{default:_(()=>[h(H,{class:"pa-1"},{default:_(()=>[h(T,{"no-gutters":""},{default:_(()=>[h(k,{class:"text-truncate text-left"},{default:_(()=>[V.value.icon?(c(),O(U,{key:0,icon:V.value.icon,color:V.value.color,size:"small"},null,8,["icon","color"])):y("",!0),V.value.text?(c(),$("span",_t,R(V.value.text),1)):y("",!0),b.value.icon?(c(),O(U,{key:2,icon:b.value.icon,color:b.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),b.value.text?(c(),$("span",mt,R(b.value.text),1)):y("",!0)]),_:1}),h(k,{class:"text-truncate text-center",cols:v()},{default:_(()=>[M.value.icon?(c(),O(U,{key:0,icon:M.value.icon,color:M.value.color,size:"small"},null,8,["icon","color"])):y("",!0),M.value.text?(c(),$("span",pt,R(M.value.text),1)):y("",!0),N.value.icon?(c(),O(U,{key:2,icon:N.value.icon,color:N.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),N.value.text?(c(),$("span",ht,R(N.value.text),1)):y("",!0)]),_:1},8,["cols"]),h(k,{class:"text-truncate text-right"},{default:_(()=>[j.value.icon?(c(),O(U,{key:0,icon:j.value.icon,color:j.value.color,size:"small"},null,8,["icon","color"])):y("",!0),j.value.text?(c(),$("span",gt,R(j.value.text),1)):y("",!0),w.value.icon?(c(),O(U,{key:2,icon:w.value.icon,color:w.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),w.value.text?(c(),$("span",xt,R(w.value.text),1)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{bt as _};
