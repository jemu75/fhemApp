import{u as S,c as p,r,o as a,b,p as U,t as w,k as v,a as _,w as i,j as q,q as te,F as O,e as f,s as H,f as B,m as le,d as L,x as ne,h as ae}from"./index-17c8afbd.js";const oe={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object},setup(c){const n=c,o=S(),x=p(()=>o.handleDefs(n.el.text,["text","format"],["",!n.el.text2&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),h=p(()=>o.handleDefs(n.el.text2,["text","format"],["",n.el.text&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),s=p(()=>o.handleDefs(n.el.text3,["text","format"],["","text-caption"])),m=p(()=>{let e=o.handleDefs(n.el.icon,["icon","color","size"],["","","x-large"]);return e.icon&&(e.icon=o.getIcon(e.icon,n.iconmap)),e}),l=p(()=>{let e=o.handleDefs(n.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e});return(e,t)=>{const g=r("v-icon"),u=r("v-progress-circular"),D=r("v-progress-linear");return a(),b(O,null,[c.el.text?(a(),b("div",{key:0,class:U(x.value.format)},w(x.value.text),3)):v("",!0),c.el.icon?(a(),_(g,{key:1,color:m.value.color,size:m.value.size},{default:i(()=>[q(w(m.value.icon),1)]),_:1},8,["color","size"])):v("",!0),c.el.status&&!l.value.linear?(a(),_(u,{key:2,width:"4",modelValue:l.value.level,"onUpdate:modelValue":t[0]||(t[0]=y=>l.value.level=y),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),c.el.status&&l.value.linear?(a(),_(D,{key:3,height:"7",rounded:"",modelValue:l.value.level,"onUpdate:modelValue":t[1]||(t[1]=y=>l.value.level=y),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),te("div",{class:U(c.el.text2?h.value.format:s.value.format)},[c.el.text2?(a(),b("span",{key:0,class:U(h.value.format)},w(h.value.text),3)):v("",!0),c.el.text3?(a(),b("span",{key:1,class:U(s.value.format)},w(s.value.text),3)):v("",!0)],2)],64)}}},se={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=S(),x=p(()=>{let e=o.handleDefs(n.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return e.icon&&(e.icon=o.getIcon(e.icon,n.iconmap)),e}),h=p(()=>{let e=o.handleDefs(n.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e}),s={timer:!1,long:!1};function m(e){let t=[],g=e.cmd;if(e.type==="cmd"){for(const u of n.devices)t=u.split(":"),RegExp(t[0]).test(g)&&(g=g.replace(t[0],t[1]));o.request("text",g)}e.type==="route"&&H.push({name:"devices",params:{view:e.cmd},query:H.currentRoute.value.query}),e.type==="url"&&window.open(e.cmd,"_self")}function l(e){let t=o.handleDefs(n.el.click,["cmd","type"],["","cmd"]),g=o.handleDefs(n.el.longClick,["cmd","type"],["","cmd"]),u=o.handleDefs(n.el.longRelease,["cmd","type"],["","cmd"]);(e==="touchStart"||e==="mouseStart")&&(s.timer=setTimeout(()=>{s.long=!0,g.cmd&&m(g)},1e3)),(e==="touchEnd"||e==="mouseEnd")&&(s.long?u.cmd&&m(u):t.cmd&&m(t),clearTimeout(s.timer),s.long=!1)}return(e,t)=>{const g=r("v-progress-linear"),u=r("v-icon"),D=r("v-btn");return a(),b(O,null,[c.el.status?(a(),_(g,{key:0,height:"4",modelValue:h.value.level,"onUpdate:modelValue":t[0]||(t[0]=y=>h.value.level=y),color:h.value.color,reverse:h.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),f(D,{icon:"",variant:x.value.variant,disabled:x.value.disabled,color:x.value.color,onTouchstart:t[1]||(t[1]=y=>l("touchStart")),onTouchend:t[2]||(t[2]=y=>l("touchEnd")),onMousedown:t[3]||(t[3]=y=>l("mouseStart")),onMouseup:t[4]||(t[4]=y=>l("mouseEnd")),class:"my-2"},{default:i(()=>[f(u,{size:"large"},{default:i(()=>[q(w(x.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},re={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=S(),x=B();function h(e){x.value=e}const s=p(()=>{let e=o.handleDefs(n.el.slider,["cmd","current","color","min","max","steps"],["",0,"",0,100,10]);return/%v/.test(e.current)&&(e.current=e.current.replace("%v",x.value)),h(e.current),e});let m=null;function l(e){let t=s.value.cmd,g=/\./.exec(s.value.steps),u=0,D=[];g&&(u=s.value.steps.slice(g.index).length-1),t=t.replace("%v",e.toFixed(u));for(const y of n.devices)D=y.split(":"),RegExp(D[0]).test(t)&&(t=t.replace(D[0],D[1]));clearTimeout(m),m=setTimeout(()=>{o.request("text",t)},500)}return(e,t)=>{const g=r("v-slider");return a(),_(g,{modelValue:x.value,"onUpdate:modelValue":[t[0]||(t[0]=u=>x.value=u),t[1]||(t[1]=u=>l(u))],min:s.value.min,max:s.value.max,step:s.value.steps,"hide-details":"","thumb-label":"",color:s.value.color},null,8,["modelValue","min","max","step","color"])}}},ce={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=S(),x=B(!1),h=p(()=>o.handleDefs(n.el.image,["source","height"],["",null]));return(s,m)=>{const l=r("v-skeleton-loader"),e=r("v-img");return a(),b(O,null,[x.value?v("",!0):(a(),_(l,{key:0,type:"image"})),f(e,{src:h.value.source,height:h.value.height,onLoad:m[0]||(m[0]=t=>x.value=!0)},null,8,["src","height"])],64)}}},ue={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=S(),x=p(()=>{let s=[],m=o.handleDefs(n.el.menu,["name","cmd"],["",""],!0,","),l={};for(const e of m)l={name:/:/.test(e.name)?e.name.split(":")[0]:e.name,cmd:/:/.test(e.cmd)?e.cmd.split(":")[1]:e.cmd},s.push(l);return s});function h(s){let m=[];for(const l of n.devices)m=l.split(":"),RegExp(m[0]).test(s)&&(s=s.replace(m[0],m[1]));o.request("text",s)}return(s,m)=>{const l=r("v-icon"),e=r("v-btn"),t=r("v-list-item-title"),g=r("v-list-item"),u=r("v-list"),D=r("v-menu");return a(),_(D,null,{activator:i(({props:y})=>[f(e,le({icon:"",variant:"text"},y,{disabled:x.value.length<1}),{default:i(()=>[f(l,{size:"large"},{default:i(()=>[q(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:i(()=>[f(u,null,{default:i(()=>[(a(!0),b(O,null,L(x.value,(y,z)=>(a(),_(g,{key:z,value:z,onClick:C=>h(y.cmd)},{default:i(()=>[f(t,null,{default:i(()=>[q(w(y.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}},ie={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(c){const n=S();function o(l,e){return n.handleDefs(l[e].size,["size"],[!1]).size}function x(l){let e="";return["info"].indexOf(l)!==-1&&(e="mx-2"),e}function h(l,e){return l[e]?n.handleDefs(l[e].divider,["show"],[!1]).show:!1}function s(l){return l.level?n.handleDefs(l.level.height,["height"],["64px"]).height:"64px"}function m(l){if(l==="info")return oe;if(l==="btn")return se;if(l==="slider")return re;if(l==="image")return ce;if(l==="menu")return ue}return(l,e)=>{const t=r("v-sheet"),g=r("v-col"),u=r("v-divider"),D=r("v-row"),y=r("v-expand-transition");return a(!0),b(O,null,L(c.main,(z,C)=>(a(),b("div",{key:C},[f(y,null,{default:i(()=>[c.levels.indexOf(C)!==-1?(a(),_(D,{key:0,"no-gutters":"",class:"text-center align-center"},{default:i(()=>[f(t,{height:s(z,"level")},null,8,["height"]),(a(),b(O,null,L(["left1","left2","mid","right1","right2"],V=>(a(),b(O,{key:V},[z.level[V]?(a(),_(g,{key:0,cols:o(z,V),class:U(x(z.level[V]))},{default:i(()=>[(a(),_(ne(m(z.level[V])),{el:z[V],iconmap:c.iconmap,devices:c.devices},null,8,["el","iconmap","devices"]))]),_:2},1032,["cols","class"])):v("",!0),h(z,V)?(a(),_(u,{key:1,vertical:""})):v("",!0)],64))),64)),h(z,"level")?(a(),_(u,{key:0})):v("",!0)]),_:2},1024)):v("",!0)]),_:2},1024)]))),128)}}},ve={key:1},de={key:3},me={key:1},fe={key:3},pe={key:1},_e={key:3},he={__name:"PanelCard",props:{panel:Object},setup(c){const n=c,o=S();function x(k){let d=o.handleDefs(n.panel.status[k],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return d.level=Math.round((d.level-d.min)/(d.max-d.min)*100),d.reverse=!!d.reverse,d}const h=p(()=>x("bar")),s=p(()=>x("bar2")),m=p(()=>o.handleDefs(n.panel.status.imageUrl,["url"],[""])),l=p(()=>o.handleDefs(n.panel.status.title,["title"],[""])),e=p(()=>o.handleDefs(n.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),t=B(e.value.expanded),g=p(()=>{let k=null;return e.value.expandable?k=t.value?"mdi-arrow-collapse":"mdi-arrow-expand":k="mdi-swap-vertical",k}),u=p(()=>{let k=[];for(const[d,j]of Object.entries(n.panel.main))o.handleDefs(j.level.show,["show"],[!0]).show&&k.push(Number(d));return k}),D=B(!1);function y(){D.value=!1}function z(){e.value.expandable?(e.value.maximizable&&(t.value?o.app.panelMaximized=!1:o.app.panelMaximized=n.panel),t.value=!t.value):D.value=!0}const C=p(()=>{let k=[],d=-1;return e.value.expandable?k=t.value?u.value:[u.value[0]]:D.value?(d=u.value.indexOf(C.value?C.value[0]:null),k=d===-1||d===u.value.length-1?[u.value[0]]:[u.value[d+1]],y()):k=[u.value[0]],k});function V(k){let d=o.handleDefs(n.panel.info[k],["text","icon","color"],["","",""]);return d.icon&&(d.icon=o.getIcon(d.icon,n.panel.panel.iconmap)),d}function J(){let k=!!($.value.text||A.value.text),d=!!(P.value.text||T.value.text),j=!!(R.value.text||E.value.text);return!k&&d&&!j?7:null}const $=p(()=>V("left1")),A=p(()=>V("left2")),P=p(()=>V("mid1")),T=p(()=>V("mid2")),R=p(()=>V("right1")),E=p(()=>V("right2"));return(k,d)=>{const j=r("v-progress-linear"),M=r("v-col"),N=r("v-row"),K=r("v-spacer"),Q=r("v-btn"),W=r("v-card-title"),X=r("v-img"),G=r("v-sheet"),Y=r("v-divider"),I=r("v-icon"),Z=r("v-card-text"),ee=r("v-card");return a(),_(ee,{variant:"tonal"},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[c.panel.status.bar?(a(),_(M,{key:0},{default:i(()=>[f(j,{height:"7",modelValue:h.value.level,"onUpdate:modelValue":d[0]||(d[0]=F=>h.value.level=F),color:h.value.color,reverse:h.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0),c.panel.status.bar2?(a(),_(M,{key:1},{default:i(()=>[f(j,{height:"7",modelValue:s.value.level,"onUpdate:modelValue":d[1]||(d[1]=F=>s.value.level=F),color:s.value.color,reverse:s.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0)]),_:1}),f(G,{color:"secondary"},{default:i(()=>[f(X,{src:m.value.url,gradient:m.value.url?ae(o).app.header.imageGradient:"",height:"48",cover:""},{default:i(()=>[c.panel.status.title?(a(),_(W,{key:0},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[f(M,null,{default:i(()=>[q(w(l.value.title),1)]),_:1}),f(K),u.value.length>1||e.value.maximizable?(a(),_(M,{key:0,cols:"1",class:"text-right"},{default:i(()=>[f(Q,{icon:g.value,size:"small",variant:"plain",density:"compact",onClick:z},null,8,["icon"])]),_:1})):v("",!0)]),_:1})]),_:1})):v("",!0)]),_:1},8,["src","gradient"])]),_:1}),f(Y),f(ie,{main:c.panel.main,levels:C.value,iconmap:c.panel.panel.iconmap,devices:c.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),f(G,{color:"secondary"},{default:i(()=>[f(Z,{class:"pa-1"},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[f(M,{class:"text-truncate text-left"},{default:i(()=>[$.value.icon?(a(),_(I,{key:0,icon:$.value.icon,color:$.value.color,size:"small"},null,8,["icon","color"])):v("",!0),$.value.text?(a(),b("span",ve,w($.value.text),1)):v("",!0),A.value.icon?(a(),_(I,{key:2,icon:A.value.icon,color:A.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),A.value.text?(a(),b("span",de,w(A.value.text),1)):v("",!0)]),_:1}),f(M,{class:"text-truncate text-center",cols:J()},{default:i(()=>[P.value.icon?(a(),_(I,{key:0,icon:P.value.icon,color:P.value.color,size:"small"},null,8,["icon","color"])):v("",!0),P.value.text?(a(),b("span",me,w(P.value.text),1)):v("",!0),T.value.icon?(a(),_(I,{key:2,icon:T.value.icon,color:T.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),T.value.text?(a(),b("span",fe,w(T.value.text),1)):v("",!0)]),_:1},8,["cols"]),f(M,{class:"text-truncate text-right"},{default:i(()=>[R.value.icon?(a(),_(I,{key:0,icon:R.value.icon,color:R.value.color,size:"small"},null,8,["icon","color"])):v("",!0),R.value.text?(a(),b("span",pe,w(R.value.text),1)):v("",!0),E.value.icon?(a(),_(I,{key:2,icon:E.value.icon,color:E.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),E.value.text?(a(),b("span",_e,w(E.value.text),1)):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{he as _};
