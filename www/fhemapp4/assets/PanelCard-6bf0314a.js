import{u as O,c as p,r as s,o as a,b as z,p as q,t as V,k as v,a as _,w as u,j as B,q as le,F as M,e as m,s as J,f as N,m as ne,d as G,x as ae,y as oe,h as re}from"./index-c03ab259.js";const se={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object},setup(c){const n=c,o=O(),h=p(()=>o.handleDefs(n.el.text,["text","format"],["",!n.el.text2&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),y=p(()=>o.handleDefs(n.el.text2,["text","format"],["",n.el.text&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),r=p(()=>o.handleDefs(n.el.text3,["text","format"],["","text-caption"])),i=p(()=>{let e=o.handleDefs(n.el.icon,["icon","color","size"],["","","x-large"]);return e.icon&&(e.icon=o.getIcon(e.icon,n.iconmap)),e}),l=p(()=>{let e=o.handleDefs(n.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e});return(e,t)=>{const d=s("v-icon"),x=s("v-progress-circular"),k=s("v-progress-linear");return a(),z(M,null,[c.el.text?(a(),z("div",{key:0,class:q(h.value.format)},V(h.value.text),3)):v("",!0),c.el.icon?(a(),_(d,{key:1,color:i.value.color,size:i.value.size},{default:u(()=>[B(V(i.value.icon),1)]),_:1},8,["color","size"])):v("",!0),c.el.status&&!l.value.linear?(a(),_(x,{key:2,width:"4",modelValue:l.value.level,"onUpdate:modelValue":t[0]||(t[0]=g=>l.value.level=g),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),c.el.status&&l.value.linear?(a(),_(k,{key:3,height:"7",rounded:"",modelValue:l.value.level,"onUpdate:modelValue":t[1]||(t[1]=g=>l.value.level=g),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),le("div",{class:q(c.el.text2?y.value.format:r.value.format)},[c.el.text2?(a(),z("span",{key:0,class:q(y.value.format)},V(y.value.text),3)):v("",!0),c.el.text3?(a(),z("span",{key:1,class:q(r.value.format)},V(r.value.text),3)):v("",!0)],2)],64)}}},ce={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=p(()=>{let e=o.handleDefs(n.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return e.icon&&(e.icon=o.getIcon(e.icon,n.iconmap)),e}),y=p(()=>{let e=o.handleDefs(n.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e}),r={timer:!1,long:!1};function i(e){let t=[],d=e.cmd;if(e.type==="cmd"){for(const x of n.devices)t=x.split(":"),RegExp(t[0]).test(d)&&(d=d.replace(t[0],t[1]));o.request("text",d)}e.type==="route"&&J.push({name:"devices",params:{view:e.cmd},query:J.currentRoute.value.query}),e.type==="url"&&window.open(e.cmd,"_self")}function l(e){let t=o.handleDefs(n.el.click,["cmd","type"],["","cmd"]),d=o.handleDefs(n.el.longClick,["cmd","type"],["","cmd"]),x=o.handleDefs(n.el.longRelease,["cmd","type"],["","cmd"]);(e==="touchStart"||e==="mouseStart")&&(r.timer=setTimeout(()=>{r.long=!0,d.cmd&&i(d)},1e3)),(e==="touchEnd"||e==="mouseEnd")&&(r.long?x.cmd&&i(x):t.cmd&&i(t),clearTimeout(r.timer),r.long=!1)}return(e,t)=>{const d=s("v-progress-linear"),x=s("v-icon"),k=s("v-btn");return a(),z(M,null,[c.el.status?(a(),_(d,{key:0,height:"4",modelValue:y.value.level,"onUpdate:modelValue":t[0]||(t[0]=g=>y.value.level=g),color:y.value.color,reverse:y.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),m(k,{icon:"",variant:h.value.variant,disabled:h.value.disabled,color:h.value.color,onTouchstart:t[1]||(t[1]=g=>l("touchStart")),onTouchend:t[2]||(t[2]=g=>l("touchEnd")),onMousedown:t[3]||(t[3]=g=>l("mouseStart")),onMouseup:t[4]||(t[4]=g=>l("mouseEnd")),class:"my-2"},{default:u(()=>[m(x,{size:"large"},{default:u(()=>[B(V(h.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},ue={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=N();function y(e){h.value=e}const r=p(()=>{let e=o.handleDefs(n.el.slider,["cmd","current","color","min","max","steps","reverse","size","vertical"],["",0,"",0,100,10,!1,4,!1]);return/%v/.test(e.current)&&(e.current=e.current.replace("%v",h.value)),y(e.current),e});let i=null;function l(e){let t=r.value.cmd,d=/\./.exec(r.value.steps),x=0,k=[];d&&(x=r.value.steps.slice(d.index).length-1),t=t.replace("%v",e.toFixed(x));for(const g of n.devices)k=g.split(":"),RegExp(k[0]).test(t)&&(t=t.replace(k[0],k[1]));clearTimeout(i),i=setTimeout(()=>{o.request("text",t)},500)}return(e,t)=>{const d=s("v-slider");return a(),_(d,{modelValue:h.value,"onUpdate:modelValue":[t[0]||(t[0]=x=>h.value=x),t[1]||(t[1]=x=>l(x))],min:r.value.min,max:r.value.max,step:r.value.steps,reverse:r.value.reverse,direction:r.value.vertical?"vertical":"horizontal","track-size":r.value.size,color:r.value.color,"hide-details":"","thumb-label":""},null,8,["modelValue","min","max","step","reverse","direction","track-size","color"])}}},ie={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=N(!1),y=p(()=>o.handleDefs(n.el.image,["source","height"],["",null]));return(r,i)=>{const l=s("v-skeleton-loader"),e=s("v-img");return a(),z(M,null,[h.value?v("",!0):(a(),_(l,{key:0,type:"image"})),m(e,{src:y.value.source,height:y.value.height,onLoad:i[0]||(i[0]=t=>h.value=!0)},null,8,["src","height"])],64)}}},ve={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=p(()=>{let r=[],i=o.handleDefs(n.el.menu,["name","cmd"],["",""],!0,","),l={};for(const e of i)l={name:/:/.test(e.name)?e.name.split(":")[0]:e.name,cmd:/:/.test(e.cmd)?e.cmd.split(":")[1]:e.cmd},r.push(l);return r});function y(r){let i=[];for(const l of n.devices)i=l.split(":"),RegExp(i[0]).test(r)&&(r=r.replace(i[0],i[1]));o.request("text",r)}return(r,i)=>{const l=s("v-icon"),e=s("v-btn"),t=s("v-list-item-title"),d=s("v-list-item"),x=s("v-list"),k=s("v-menu");return a(),_(k,null,{activator:u(({props:g})=>[m(e,ne({icon:"",variant:"text"},g,{disabled:h.value.length<1}),{default:u(()=>[m(l,{size:"large"},{default:u(()=>[B(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:u(()=>[m(x,null,{default:u(()=>[(a(!0),z(M,null,G(h.value,(g,D)=>(a(),_(d,{key:D,value:D,onClick:U=>y(g.cmd)},{default:u(()=>[m(t,null,{default:u(()=>[B(V(g.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}},de={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(c){const n=O();function o(l,e){return n.handleDefs(l[e].size,["size"],[!1]).size}function h(l){let e="";return["info"].indexOf(l)!==-1&&(e="mx-2"),e}function y(l,e){return l[e]?n.handleDefs(l[e].divider,["show"],[!1]).show:!1}function r(l){return l.level?n.handleDefs(l.level.height,["height"],["64px"]).height:"64px"}function i(l){if(l==="info")return se;if(l==="btn")return ce;if(l==="slider")return ue;if(l==="image")return ie;if(l==="menu")return ve}return(l,e)=>{const t=s("v-sheet"),d=s("v-col"),x=s("v-divider"),k=s("v-row"),g=s("v-expand-transition");return a(!0),z(M,null,G(c.main,(D,U)=>(a(),z("div",{key:U},[m(g,null,{default:u(()=>[c.levels.indexOf(U)!==-1?(a(),_(k,{key:0,"no-gutters":"",class:"text-center align-center"},{default:u(()=>[m(t,{height:r(D,"level")},null,8,["height"]),(a(),z(M,null,G(["left1","left2","mid","right1","right2"],w=>(a(),z(M,{key:w},[D.level[w]?(a(),_(d,{key:0,cols:o(D,w),class:q(h(D.level[w]))},{default:u(()=>[(a(),_(ae(i(D.level[w])),{el:D[w],iconmap:c.iconmap,devices:c.devices},null,8,["el","iconmap","devices"]))]),_:2},1032,["cols","class"])):v("",!0),y(D,w)?(a(),_(x,{key:1,vertical:""})):v("",!0)],64))),64)),y(D,"level")?(a(),_(x,{key:0})):v("",!0)]),_:2},1024)):v("",!0)]),_:2},1024)]))),128)}}},me={key:1},fe={key:3},pe={key:1},_e={key:3},xe={key:1},he={key:3},ye={__name:"PanelCard",props:{panel:Object},setup(c){const n=c,o=O();let h=o.thread();oe(()=>o.thread(h));function y(b){let f=o.handleDefs(n.panel.status[b],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return f.level=Math.round((f.level-f.min)/(f.max-f.min)*100),f}const r=p(()=>y("bar")),i=p(()=>y("bar2")),l=p(()=>o.handleDefs(n.panel.status.imageUrl,["url"],[""])),e=p(()=>o.handleDefs(n.panel.status.title,["title"],[""])),t=p(()=>o.handleDefs(n.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),d=N(t.value.expanded),x=p(()=>{let b=null;return t.value.expandable&&(b=d.value?"mdi-arrow-collapse":"mdi-arrow-expand"),!t.value.expandable&&!t.value.expanded&&n.panel.main.length>1&&(b="mdi-swap-vertical"),b}),k=p(()=>{let b=[];for(const[f,I]of Object.entries(n.panel.main))o.handleDefs(I.level.show,["show"],[!0]).show&&b.push(Number(f));return b}),g=N(!1);function D(){g.value=!1}function U(){t.value.expandable?(t.value.maximizable&&(d.value?o.app.panelMaximized=!1:o.app.panelMaximized=n.panel),d.value=!d.value):g.value=!0}const w=p(()=>{let b=[],f=-1;return t.value.expandable||!t.value.expandable&&t.value.expanded?b=d.value?k.value:[k.value[0]]:g.value?(f=k.value.indexOf(w.value?w.value[0]:null),b=f===-1||f===k.value.length-1?[k.value[0]]:[k.value[f+1]],D()):b=[k.value[0]],b});function S(b){let f=o.handleDefs(n.panel.info[b],["text","icon","color"],["","",""]);return f.icon&&(f.icon=o.getIcon(f.icon,n.panel.panel.iconmap)),f}function K(){let b=!!($.value.text||A.value.text),f=!!(P.value.text||T.value.text),I=!!(R.value.text||E.value.text);return!b&&f&&!I?7:null}const $=p(()=>S("left1")),A=p(()=>S("left2")),P=p(()=>S("mid1")),T=p(()=>S("mid2")),R=p(()=>S("right1")),E=p(()=>S("right2"));return(b,f)=>{const I=s("v-progress-linear"),C=s("v-col"),F=s("v-row"),Q=s("v-spacer"),W=s("v-btn"),X=s("v-card-title"),Y=s("v-img"),H=s("v-sheet"),Z=s("v-divider"),j=s("v-icon"),ee=s("v-card-text"),te=s("v-card");return a(),_(te,{variant:"tonal"},{default:u(()=>[m(F,{"no-gutters":""},{default:u(()=>[c.panel.status.bar?(a(),_(C,{key:0},{default:u(()=>[m(I,{height:"7",modelValue:r.value.level,"onUpdate:modelValue":f[0]||(f[0]=L=>r.value.level=L),color:r.value.color,reverse:r.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0),c.panel.status.bar2?(a(),_(C,{key:1},{default:u(()=>[m(I,{height:"7",modelValue:i.value.level,"onUpdate:modelValue":f[1]||(f[1]=L=>i.value.level=L),color:i.value.color,reverse:i.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0)]),_:1}),m(H,{color:"secondary"},{default:u(()=>[m(Y,{src:l.value.url,gradient:l.value.url?re(o).app.header.imageGradient:"",height:"48",cover:""},{default:u(()=>[c.panel.status.title?(a(),_(X,{key:0},{default:u(()=>[m(F,{"no-gutters":""},{default:u(()=>[m(C,null,{default:u(()=>[B(V(e.value.title),1)]),_:1}),m(Q),x.value?(a(),_(C,{key:0,cols:"1",class:"text-right"},{default:u(()=>[m(W,{icon:x.value,size:"small",variant:"plain",density:"compact",onClick:U},null,8,["icon"])]),_:1})):v("",!0)]),_:1})]),_:1})):v("",!0)]),_:1},8,["src","gradient"])]),_:1}),m(Z),m(de,{main:c.panel.main,levels:w.value,iconmap:c.panel.panel.iconmap,devices:c.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),m(H,{color:"secondary"},{default:u(()=>[m(ee,{class:"pa-1"},{default:u(()=>[m(F,{"no-gutters":""},{default:u(()=>[m(C,{class:"text-truncate text-left"},{default:u(()=>[$.value.icon?(a(),_(j,{key:0,icon:$.value.icon,color:$.value.color,size:"small"},null,8,["icon","color"])):v("",!0),$.value.text?(a(),z("span",me,V($.value.text),1)):v("",!0),A.value.icon?(a(),_(j,{key:2,icon:A.value.icon,color:A.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),A.value.text?(a(),z("span",fe,V(A.value.text),1)):v("",!0)]),_:1}),m(C,{class:"text-truncate text-center",cols:K()},{default:u(()=>[P.value.icon?(a(),_(j,{key:0,icon:P.value.icon,color:P.value.color,size:"small"},null,8,["icon","color"])):v("",!0),P.value.text?(a(),z("span",pe,V(P.value.text),1)):v("",!0),T.value.icon?(a(),_(j,{key:2,icon:T.value.icon,color:T.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),T.value.text?(a(),z("span",_e,V(T.value.text),1)):v("",!0)]),_:1},8,["cols"]),m(C,{class:"text-truncate text-right"},{default:u(()=>[R.value.icon?(a(),_(j,{key:0,icon:R.value.icon,color:R.value.color,size:"small"},null,8,["icon","color"])):v("",!0),R.value.text?(a(),z("span",xe,V(R.value.text),1)):v("",!0),E.value.icon?(a(),_(j,{key:2,icon:E.value.icon,color:E.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),E.value.text?(a(),z("span",he,V(E.value.text),1)):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{ye as _};
