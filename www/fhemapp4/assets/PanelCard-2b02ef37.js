import{u as O,c as p,r,o as a,b as D,p as q,t as z,k as v,a as _,w as u,j as B,q as le,F as M,e as f,s as J,f as N,m as ne,d as G,x as ae,y as oe,h as se}from"./index-075b0035.js";const re={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object},setup(c){const n=c,o=O(),h=p(()=>o.handleDefs(n.el.text,["text","format"],["",!n.el.text2&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),y=p(()=>o.handleDefs(n.el.text2,["text","format"],["",n.el.text&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),s=p(()=>o.handleDefs(n.el.text3,["text","format"],["","text-caption"])),i=p(()=>{let e=o.handleDefs(n.el.icon,["icon","color","size"],["","","x-large"]);return e.icon&&(e.icon=o.getIcon(e.icon,n.iconmap)),e}),l=p(()=>{let e=o.handleDefs(n.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e});return(e,t)=>{const m=r("v-icon"),x=r("v-progress-circular"),k=r("v-progress-linear");return a(),D(M,null,[c.el.text?(a(),D("div",{key:0,class:q(h.value.format)},z(h.value.text),3)):v("",!0),c.el.icon?(a(),_(m,{key:1,color:i.value.color,size:i.value.size},{default:u(()=>[B(z(i.value.icon),1)]),_:1},8,["color","size"])):v("",!0),c.el.status&&!l.value.linear?(a(),_(x,{key:2,width:"4",modelValue:l.value.level,"onUpdate:modelValue":t[0]||(t[0]=g=>l.value.level=g),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),c.el.status&&l.value.linear?(a(),_(k,{key:3,height:"7",rounded:"",modelValue:l.value.level,"onUpdate:modelValue":t[1]||(t[1]=g=>l.value.level=g),color:l.value.color,reverse:l.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),le("div",{class:q(c.el.text2?y.value.format:s.value.format)},[c.el.text2?(a(),D("span",{key:0,class:q(y.value.format)},z(y.value.text),3)):v("",!0),c.el.text3?(a(),D("span",{key:1,class:q(s.value.format)},z(s.value.text),3)):v("",!0)],2)],64)}}},ce={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=p(()=>{let e=o.handleDefs(n.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return e.icon&&(e.icon=o.getIcon(e.icon,n.iconmap)),e}),y=p(()=>{let e=o.handleDefs(n.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e}),s={timer:!1,long:!1};function i(e){let t=[],m=e.cmd;if(e.type==="cmd"){for(const x of n.devices)t=x.split(":"),RegExp(t[0]).test(m)&&(m=m.replace(t[0],t[1]));o.request("text",m)}e.type==="route"&&J.push({name:"devices",params:{view:e.cmd},query:J.currentRoute.value.query}),e.type==="url"&&window.open(e.cmd,"_self")}function l(e){let t=o.handleDefs(n.el.click,["cmd","type"],["","cmd"]),m=o.handleDefs(n.el.longClick,["cmd","type"],["","cmd"]),x=o.handleDefs(n.el.longRelease,["cmd","type"],["","cmd"]);(e==="touchStart"||e==="mouseStart")&&(s.timer=setTimeout(()=>{s.long=!0,m.cmd&&i(m)},1e3)),(e==="touchEnd"||e==="mouseEnd")&&(s.long?x.cmd&&i(x):t.cmd&&i(t),clearTimeout(s.timer),s.long=!1)}return(e,t)=>{const m=r("v-progress-linear"),x=r("v-icon"),k=r("v-btn");return a(),D(M,null,[c.el.status?(a(),_(m,{key:0,height:"4",modelValue:y.value.level,"onUpdate:modelValue":t[0]||(t[0]=g=>y.value.level=g),color:y.value.color,reverse:y.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),f(k,{icon:"",variant:h.value.variant,disabled:h.value.disabled,color:h.value.color,onTouchstart:t[1]||(t[1]=g=>l("touchStart")),onTouchend:t[2]||(t[2]=g=>l("touchEnd")),onMousedown:t[3]||(t[3]=g=>l("mouseStart")),onMouseup:t[4]||(t[4]=g=>l("mouseEnd")),class:"my-2"},{default:u(()=>[f(x,{size:"large"},{default:u(()=>[B(z(h.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},ue={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=N();function y(e){h.value=e}const s=p(()=>{let e=o.handleDefs(n.el.slider,["cmd","current","color","min","max","steps"],["",0,"",0,100,10]);return/%v/.test(e.current)&&(e.current=e.current.replace("%v",h.value)),y(e.current),e});let i=null;function l(e){let t=s.value.cmd,m=/\./.exec(s.value.steps),x=0,k=[];m&&(x=s.value.steps.slice(m.index).length-1),t=t.replace("%v",e.toFixed(x));for(const g of n.devices)k=g.split(":"),RegExp(k[0]).test(t)&&(t=t.replace(k[0],k[1]));clearTimeout(i),i=setTimeout(()=>{o.request("text",t)},500)}return(e,t)=>{const m=r("v-slider");return a(),_(m,{modelValue:h.value,"onUpdate:modelValue":[t[0]||(t[0]=x=>h.value=x),t[1]||(t[1]=x=>l(x))],min:s.value.min,max:s.value.max,step:s.value.steps,"hide-details":"","thumb-label":"",color:s.value.color},null,8,["modelValue","min","max","step","color"])}}},ie={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=N(!1),y=p(()=>o.handleDefs(n.el.image,["source","height"],["",null]));return(s,i)=>{const l=r("v-skeleton-loader"),e=r("v-img");return a(),D(M,null,[h.value?v("",!0):(a(),_(l,{key:0,type:"image"})),f(e,{src:y.value.source,height:y.value.height,onLoad:i[0]||(i[0]=t=>h.value=!0)},null,8,["src","height"])],64)}}},ve={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,o=O(),h=p(()=>{let s=[],i=o.handleDefs(n.el.menu,["name","cmd"],["",""],!0,","),l={};for(const e of i)l={name:/:/.test(e.name)?e.name.split(":")[0]:e.name,cmd:/:/.test(e.cmd)?e.cmd.split(":")[1]:e.cmd},s.push(l);return s});function y(s){let i=[];for(const l of n.devices)i=l.split(":"),RegExp(i[0]).test(s)&&(s=s.replace(i[0],i[1]));o.request("text",s)}return(s,i)=>{const l=r("v-icon"),e=r("v-btn"),t=r("v-list-item-title"),m=r("v-list-item"),x=r("v-list"),k=r("v-menu");return a(),_(k,null,{activator:u(({props:g})=>[f(e,ne({icon:"",variant:"text"},g,{disabled:h.value.length<1}),{default:u(()=>[f(l,{size:"large"},{default:u(()=>[B(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:u(()=>[f(x,null,{default:u(()=>[(a(!0),D(M,null,G(h.value,(g,V)=>(a(),_(m,{key:V,value:V,onClick:U=>y(g.cmd)},{default:u(()=>[f(t,null,{default:u(()=>[B(z(g.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}},de={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(c){const n=O();function o(l,e){return n.handleDefs(l[e].size,["size"],[!1]).size}function h(l){let e="";return["info"].indexOf(l)!==-1&&(e="mx-2"),e}function y(l,e){return l[e]?n.handleDefs(l[e].divider,["show"],[!1]).show:!1}function s(l){return l.level?n.handleDefs(l.level.height,["height"],["64px"]).height:"64px"}function i(l){if(l==="info")return re;if(l==="btn")return ce;if(l==="slider")return ue;if(l==="image")return ie;if(l==="menu")return ve}return(l,e)=>{const t=r("v-sheet"),m=r("v-col"),x=r("v-divider"),k=r("v-row"),g=r("v-expand-transition");return a(!0),D(M,null,G(c.main,(V,U)=>(a(),D("div",{key:U},[f(g,null,{default:u(()=>[c.levels.indexOf(U)!==-1?(a(),_(k,{key:0,"no-gutters":"",class:"text-center align-center"},{default:u(()=>[f(t,{height:s(V,"level")},null,8,["height"]),(a(),D(M,null,G(["left1","left2","mid","right1","right2"],w=>(a(),D(M,{key:w},[V.level[w]?(a(),_(m,{key:0,cols:o(V,w),class:q(h(V.level[w]))},{default:u(()=>[(a(),_(ae(i(V.level[w])),{el:V[w],iconmap:c.iconmap,devices:c.devices},null,8,["el","iconmap","devices"]))]),_:2},1032,["cols","class"])):v("",!0),y(V,w)?(a(),_(x,{key:1,vertical:""})):v("",!0)],64))),64)),y(V,"level")?(a(),_(x,{key:0})):v("",!0)]),_:2},1024)):v("",!0)]),_:2},1024)]))),128)}}},me={key:1},fe={key:3},pe={key:1},_e={key:3},xe={key:1},he={key:3},ye={__name:"PanelCard",props:{panel:Object},setup(c){const n=c,o=O();let h=o.thread();oe(()=>o.thread(h));function y(b){let d=o.handleDefs(n.panel.status[b],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return d.level=Math.round((d.level-d.min)/(d.max-d.min)*100),d.reverse=!!d.reverse,d}const s=p(()=>y("bar")),i=p(()=>y("bar2")),l=p(()=>o.handleDefs(n.panel.status.imageUrl,["url"],[""])),e=p(()=>o.handleDefs(n.panel.status.title,["title"],[""])),t=p(()=>o.handleDefs(n.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),m=N(t.value.expanded),x=p(()=>{let b=null;return t.value.expandable&&(b=m.value?"mdi-arrow-collapse":"mdi-arrow-expand"),!t.value.expandable&&!t.value.expanded&&n.panel.main.length>1&&(b="mdi-swap-vertical"),b}),k=p(()=>{let b=[];for(const[d,I]of Object.entries(n.panel.main))o.handleDefs(I.level.show,["show"],[!0]).show&&b.push(Number(d));return b}),g=N(!1);function V(){g.value=!1}function U(){t.value.expandable?(t.value.maximizable&&(m.value?o.app.panelMaximized=!1:o.app.panelMaximized=n.panel),m.value=!m.value):g.value=!0}const w=p(()=>{let b=[],d=-1;return t.value.expandable||!t.value.expandable&&t.value.expanded?b=m.value?k.value:[k.value[0]]:g.value?(d=k.value.indexOf(w.value?w.value[0]:null),b=d===-1||d===k.value.length-1?[k.value[0]]:[k.value[d+1]],V()):b=[k.value[0]],b});function S(b){let d=o.handleDefs(n.panel.info[b],["text","icon","color"],["","",""]);return d.icon&&(d.icon=o.getIcon(d.icon,n.panel.panel.iconmap)),d}function K(){let b=!!($.value.text||A.value.text),d=!!(P.value.text||T.value.text),I=!!(R.value.text||E.value.text);return!b&&d&&!I?7:null}const $=p(()=>S("left1")),A=p(()=>S("left2")),P=p(()=>S("mid1")),T=p(()=>S("mid2")),R=p(()=>S("right1")),E=p(()=>S("right2"));return(b,d)=>{const I=r("v-progress-linear"),C=r("v-col"),F=r("v-row"),Q=r("v-spacer"),W=r("v-btn"),X=r("v-card-title"),Y=r("v-img"),H=r("v-sheet"),Z=r("v-divider"),j=r("v-icon"),ee=r("v-card-text"),te=r("v-card");return a(),_(te,{variant:"tonal"},{default:u(()=>[f(F,{"no-gutters":""},{default:u(()=>[c.panel.status.bar?(a(),_(C,{key:0},{default:u(()=>[f(I,{height:"7",modelValue:s.value.level,"onUpdate:modelValue":d[0]||(d[0]=L=>s.value.level=L),color:s.value.color,reverse:s.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0),c.panel.status.bar2?(a(),_(C,{key:1},{default:u(()=>[f(I,{height:"7",modelValue:i.value.level,"onUpdate:modelValue":d[1]||(d[1]=L=>i.value.level=L),color:i.value.color,reverse:i.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0)]),_:1}),f(H,{color:"secondary"},{default:u(()=>[f(Y,{src:l.value.url,gradient:l.value.url?se(o).app.header.imageGradient:"",height:"48",cover:""},{default:u(()=>[c.panel.status.title?(a(),_(X,{key:0},{default:u(()=>[f(F,{"no-gutters":""},{default:u(()=>[f(C,null,{default:u(()=>[B(z(e.value.title),1)]),_:1}),f(Q),x.value?(a(),_(C,{key:0,cols:"1",class:"text-right"},{default:u(()=>[f(W,{icon:x.value,size:"small",variant:"plain",density:"compact",onClick:U},null,8,["icon"])]),_:1})):v("",!0)]),_:1})]),_:1})):v("",!0)]),_:1},8,["src","gradient"])]),_:1}),f(Z),f(de,{main:c.panel.main,levels:w.value,iconmap:c.panel.panel.iconmap,devices:c.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),f(H,{color:"secondary"},{default:u(()=>[f(ee,{class:"pa-1"},{default:u(()=>[f(F,{"no-gutters":""},{default:u(()=>[f(C,{class:"text-truncate text-left"},{default:u(()=>[$.value.icon?(a(),_(j,{key:0,icon:$.value.icon,color:$.value.color,size:"small"},null,8,["icon","color"])):v("",!0),$.value.text?(a(),D("span",me,z($.value.text),1)):v("",!0),A.value.icon?(a(),_(j,{key:2,icon:A.value.icon,color:A.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),A.value.text?(a(),D("span",fe,z(A.value.text),1)):v("",!0)]),_:1}),f(C,{class:"text-truncate text-center",cols:K()},{default:u(()=>[P.value.icon?(a(),_(j,{key:0,icon:P.value.icon,color:P.value.color,size:"small"},null,8,["icon","color"])):v("",!0),P.value.text?(a(),D("span",pe,z(P.value.text),1)):v("",!0),T.value.icon?(a(),_(j,{key:2,icon:T.value.icon,color:T.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),T.value.text?(a(),D("span",_e,z(T.value.text),1)):v("",!0)]),_:1},8,["cols"]),f(C,{class:"text-truncate text-right"},{default:u(()=>[R.value.icon?(a(),_(j,{key:0,icon:R.value.icon,color:R.value.color,size:"small"},null,8,["icon","color"])):v("",!0),R.value.text?(a(),D("span",xe,z(R.value.text),1)):v("",!0),E.value.icon?(a(),_(j,{key:2,icon:E.value.icon,color:E.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),E.value.text?(a(),D("span",he,z(E.value.text),1)):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{ye as _};
