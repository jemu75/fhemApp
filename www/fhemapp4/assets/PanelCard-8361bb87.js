import{u as C,c as x,r as u,o,b,p as B,t as w,k as p,a as h,w as v,j as I,q as ee,F as M,e as f,s as H,f as U,m as te,d as L,x as le,h as ne}from"./index-2cab99a9.js";const oe={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object},setup(r){const n=r,a=C(),i=x(()=>a.handleDefs(n.el.text,["text","format"],["",!n.el.text2&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),c=x(()=>a.handleDefs(n.el.text2,["text","format"],["",n.el.text&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),t=x(()=>a.handleDefs(n.el.text3,["text","format"],["","text-caption"])),s=x(()=>{let d=a.handleDefs(n.el.icon,["icon","color","size"],["","","x-large"]);return d.icon&&(d.icon=a.getIcon(d.icon,n.iconmap)),d});return(d,e)=>{const l=u("v-icon");return o(),b(M,null,[r.el.text?(o(),b("div",{key:0,class:B(i.value.format)},w(i.value.text),3)):p("",!0),r.el.icon?(o(),h(l,{key:1,color:s.value.color,size:s.value.size},{default:v(()=>[I(w(s.value.icon),1)]),_:1},8,["color","size"])):p("",!0),ee("div",{class:B(r.el.text2?c.value.format:t.value.format)},[r.el.text2?(o(),b("span",{key:0,class:B(c.value.format)},w(c.value.text),3)):p("",!0),r.el.text3?(o(),b("span",{key:1,class:B(t.value.format)},w(t.value.text),3)):p("",!0)],2)],64)}}},ae={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array},setup(r){const n=r,a=C(),i=x(()=>{let e=a.handleDefs(n.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return e.icon&&(e.icon=a.getIcon(e.icon,n.iconmap)),e}),c=x(()=>{let e=a.handleDefs(n.el.status,["level","color","reverse","min","max"],[0,"success",!1,0,100]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e}),t={timer:!1,long:!1};function s(e){let l=[],g=e.cmd;if(e.type==="cmd"){for(const m of n.devices)l=m.split(":"),RegExp(l[0]).test(g)&&(g=g.replace(l[0],l[1]));a.request("text",g)}e.type==="route"&&H.push({name:"devices",params:{view:e.cmd},query:H.currentRoute.value.query}),e.type==="url"&&window.open(e.cmd,"_self")}function d(e){let l=a.handleDefs(n.el.click,["cmd","type"],["","cmd"]),g=a.handleDefs(n.el.longClick,["cmd","type"],["","cmd"]),m=a.handleDefs(n.el.longRelease,["cmd","type"],["","cmd"]);(e==="touchStart"||e==="mouseStart")&&(t.timer=setTimeout(()=>{t.long=!0,g.cmd&&s(g)},1e3)),(e==="touchEnd"||e==="mouseEnd")&&(t.long?m.cmd&&s(m):l.cmd&&s(l),clearTimeout(t.timer),t.long=!1)}return(e,l)=>{const g=u("v-progress-linear"),m=u("v-icon"),y=u("v-btn");return o(),b(M,null,[r.el.status?(o(),h(g,{key:0,height:"4",modelValue:c.value.level,"onUpdate:modelValue":l[0]||(l[0]=k=>c.value.level=k),color:c.value.color,reverse:c.value.reverse},null,8,["modelValue","color","reverse"])):p("",!0),f(y,{icon:"",variant:i.value.variant,disabled:i.value.disabled,color:i.value.color,onTouchstart:l[1]||(l[1]=k=>d("touchStart")),onTouchend:l[2]||(l[2]=k=>d("touchEnd")),onMousedown:l[3]||(l[3]=k=>d("mouseStart")),onMouseup:l[4]||(l[4]=k=>d("mouseEnd")),class:"my-2"},{default:v(()=>[f(m,{size:"large"},{default:v(()=>[I(w(i.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},se={__name:"PanelMainStatus",props:{el:Object,iconmap:Array,devices:Array},setup(r){const n=r,a=C(),i=x(()=>{let c=a.handleDefs(n.el.status,["level","color","reverse","min","max"],[0,"success",!1,0,100]);return c.level=Math.round((c.level-c.min)/(c.max-c.min)*100),c.reverse=!!c.reverse,c});return(c,t)=>{const s=u("v-progress-circular");return o(),h(s,{width:"4",modelValue:i.value.level,"onUpdate:modelValue":t[0]||(t[0]=d=>i.value.level=d),color:i.value.color,reverse:i.value.reverse},null,8,["modelValue","color","reverse"])}}},re={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array},setup(r){const n=r,a=C(),i=U();function c(e){i.value=e}const t=x(()=>{let e=a.handleDefs(n.el.slider,["cmd","current","color","min","max","steps"],["",0,"",0,100,10]);return c(e.current),e});let s=null;function d(e){let l=t.value.cmd,g=/\./.exec(t.value.steps),m=0,y=[];g&&(m=t.value.steps.slice(g.index).length-1),l=l.replace("%v",e.toFixed(m));for(const k of n.devices)y=k.split(":"),RegExp(y[0]).test(l)&&(l=l.replace(y[0],y[1]));clearTimeout(s),s=setTimeout(()=>{a.request("text",l)},500)}return(e,l)=>{const g=u("v-slider");return o(),h(g,{modelValue:i.value,"onUpdate:modelValue":[l[0]||(l[0]=m=>i.value=m),l[1]||(l[1]=m=>d(m))],min:t.value.min,max:t.value.max,step:t.value.steps,"hide-details":"","thumb-label":"",color:t.value.color},null,8,["modelValue","min","max","step","color"])}}},ce={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array},setup(r){const n=r,a=C(),i=U(!1),c=x(()=>a.handleDefs(n.el.image,["source"],[""]));return(t,s)=>{const d=u("v-skeleton-loader"),e=u("v-img");return o(),b(M,null,[i.value?p("",!0):(o(),h(d,{key:0,type:"image"})),f(e,{src:c.value.source,width:"100hv",onLoad:s[0]||(s[0]=l=>i.value=!0)},null,8,["src"])],64)}}},ue={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array},setup(r){const n=r,a=C(),i=x(()=>{let t=[],s=a.handleDefs(n.el.menu,["name","cmd"],["",""],!0,","),d={};for(const e of s)d={name:/:/.test(e.name)?e.name.split(":")[0]:e.name,cmd:/:/.test(e.cmd)?e.cmd.split(":")[1]:e.cmd},t.push(d);return t});function c(t){let s=[];for(const d of n.devices)s=d.split(":"),RegExp(s[0]).test(t)&&(t=t.replace(s[0],s[1]));a.request("text",t)}return(t,s)=>{const d=u("v-icon"),e=u("v-btn"),l=u("v-list-item-title"),g=u("v-list-item"),m=u("v-list"),y=u("v-menu");return o(),h(y,null,{activator:v(({props:k})=>[f(e,te({icon:"",variant:"text"},k,{disabled:i.value.length<1}),{default:v(()=>[f(d,{size:"large"},{default:v(()=>[I(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:v(()=>[f(m,null,{default:v(()=>[(o(!0),b(M,null,L(i.value,(k,V)=>(o(),h(g,{key:V,value:V,onClick:T=>c(k.cmd)},{default:v(()=>[f(l,null,{default:v(()=>[I(w(k.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}},ie={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(r){const n=C();function a(t,s){return n.handleDefs(t[s].size,["size"],[!1]).size}function i(t,s){return t[s]?n.handleDefs(t[s].divider,["show"],[!1]).show:!1}function c(t){if(t==="info")return oe;if(t==="btn")return ae;if(t==="status")return se;if(t==="slider")return re;if(t==="image")return ce;if(t==="menu")return ue}return(t,s)=>{const d=u("v-sheet"),e=u("v-col"),l=u("v-divider"),g=u("v-row"),m=u("v-expand-transition");return o(!0),b(M,null,L(r.main,(y,k)=>(o(),b("div",{key:k},[f(m,null,{default:v(()=>[r.levels.indexOf(k)!==-1?(o(),h(g,{key:0,"no-gutters":"",class:"text-center align-center"},{default:v(()=>[f(d,{height:i(y,"level")||r.levels.length<2?"68px":"55px"},null,8,["height"]),(o(),b(M,null,L(["left1","left2","mid","right1","right2"],V=>(o(),b(M,{key:V},[y.level[V]?(o(),h(e,{key:0,cols:a(y,V)},{default:v(()=>[(o(),h(le(c(y.level[V])),{el:y[V],iconmap:r.iconmap,devices:r.devices},null,8,["el","iconmap","devices"]))]),_:2},1032,["cols"])):p("",!0),i(y,V)?(o(),h(l,{key:1,vertical:""})):p("",!0)],64))),64)),i(y,"level")?(o(),h(l,{key:0})):p("",!0)]),_:2},1024)):p("",!0)]),_:2},1024)]))),128)}}},ve={key:1},de={key:3},me={key:1},fe={key:3},pe={key:1},_e={key:3},he={__name:"PanelCard",props:{panel:Object},setup(r){const n=C(),a=r;function i(D){let _=n.handleDefs(a.panel.status[D],["level","color","reverse","min","max"],[0,"success",!1,0,100]);return _.level=Math.round((_.level-_.min)/(_.max-_.min)*100),_.reverse=!!_.reverse,_}const c=x(()=>i("bar")),t=x(()=>i("bar2")),s=x(()=>n.handleDefs(a.panel.status.imageUrl,["url"],[""])),d=x(()=>n.handleDefs(a.panel.status.title,["title"],[""])),e=x(()=>n.handleDefs(a.panel.panel.expandable,["expandable","expanded"],[!1,!1])),l=U(e.value.expanded),g=x(()=>{let D="";return e.value.expandable?D=l.value?"mdi-arrow-collapse":"mdi-arrow-expand":D="mdi-swap-vertical",D}),m=x(()=>{let D=[];for(const[_,q]of Object.entries(a.panel.main))n.handleDefs(q.level.show,["show"],[!0]).show&&D.push(Number(_));return D}),y=U(!1);function k(){y.value=!1}function V(){e.value.expandable?l.value=!l.value:y.value=!0}const T=x(()=>{let D=[],_=-1;return e.value.expandable?D=l.value?m.value:[m.value[0]]:y.value?(_=m.value.indexOf(T.value?T.value[0]:null),D=_===-1||_===m.value.length-1?[m.value[0]]:[m.value[_+1]],k()):D=[m.value[0]],D});function O(D){let _=n.handleDefs(a.panel.info[D],["text","icon","color"],["","",""]);return _.icon&&(_.icon=n.getIcon(_.icon,a.panel.panel.iconmap)),_}const $=x(()=>O("left1")),P=x(()=>O("left2")),S=x(()=>O("mid1")),R=x(()=>O("mid2")),j=x(()=>O("right1")),E=x(()=>O("right2"));return(D,_)=>{const q=u("v-progress-linear"),z=u("v-col"),N=u("v-row"),J=u("v-spacer"),K=u("v-btn"),Q=u("v-card-title"),W=u("v-img"),G=u("v-sheet"),X=u("v-divider"),A=u("v-icon"),Y=u("v-card-text"),Z=u("v-card");return o(),h(Z,{variant:"tonal"},{default:v(()=>[f(N,{"no-gutters":""},{default:v(()=>[r.panel.status.bar?(o(),h(z,{key:0},{default:v(()=>[f(q,{height:"7",modelValue:c.value.level,"onUpdate:modelValue":_[0]||(_[0]=F=>c.value.level=F),color:c.value.color,reverse:c.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):p("",!0),r.panel.status.bar2?(o(),h(z,{key:1},{default:v(()=>[f(q,{height:"7",modelValue:t.value.level,"onUpdate:modelValue":_[1]||(_[1]=F=>t.value.level=F),color:t.value.color,reverse:t.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):p("",!0)]),_:1}),f(G,{color:"secondary"},{default:v(()=>[f(W,{src:s.value.url,gradient:s.value.url?ne(n).app.header.imageGradient:"",height:"48",cover:""},{default:v(()=>[r.panel.status.title?(o(),h(Q,{key:0},{default:v(()=>[f(N,{"no-gutters":""},{default:v(()=>[f(z,null,{default:v(()=>[I(w(d.value.title),1)]),_:1}),f(J),m.value.length>1?(o(),h(z,{key:0,cols:"1",class:"text-right"},{default:v(()=>[f(K,{icon:g.value,size:"small",variant:"plain",density:"compact",onClick:V},null,8,["icon"])]),_:1})):p("",!0)]),_:1})]),_:1})):p("",!0)]),_:1},8,["src","gradient"])]),_:1}),f(X),f(ie,{main:r.panel.main,levels:T.value,iconmap:r.panel.panel.iconmap,devices:r.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),f(G,{color:"secondary"},{default:v(()=>[f(Y,{class:"pa-1"},{default:v(()=>[f(N,{"no-gutters":""},{default:v(()=>[f(z,{class:"text-truncate text-left"},{default:v(()=>[$.value.icon?(o(),h(A,{key:0,icon:$.value.icon,color:$.value.color,size:"small"},null,8,["icon","color"])):p("",!0),$.value.text?(o(),b("span",ve,w($.value.text),1)):p("",!0),P.value.icon?(o(),h(A,{key:2,icon:P.value.icon,color:P.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):p("",!0),P.value.text?(o(),b("span",de,w(P.value.text),1)):p("",!0)]),_:1}),f(z,{class:"text-truncate text-center"},{default:v(()=>[S.value.icon?(o(),h(A,{key:0,icon:S.value.icon,color:S.value.color,size:"small"},null,8,["icon","color"])):p("",!0),S.value.text?(o(),b("span",me,w(S.value.text),1)):p("",!0),R.value.icon?(o(),h(A,{key:2,icon:R.value.icon,color:R.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):p("",!0),R.value.text?(o(),b("span",fe,w(R.value.text),1)):p("",!0)]),_:1}),f(z,{class:"text-truncate text-right"},{default:v(()=>[j.value.icon?(o(),h(A,{key:0,icon:j.value.icon,color:j.value.color,size:"small"},null,8,["icon","color"])):p("",!0),j.value.text?(o(),b("span",pe,w(j.value.text),1)):p("",!0),E.value.icon?(o(),h(A,{key:2,icon:E.value.icon,color:E.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):p("",!0),E.value.text?(o(),b("span",_e,w(E.value.text),1)):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{he as _};
