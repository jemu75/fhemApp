import{u as H,c as p,r as _,o as d,b as T,s as X,t as R,k as y,a as z,w as g,j as Y,x as ke,F as J,e as b,y as xe,f as Z,p as Ee,d as de,l as Ce,z as te,A as ne,B as De,C as Se,q as re,D as ye,E as _e,G as Ae,m as be,H as Le,I as Te,h as le,J as je,K as Me,L as Ve,M as Ne,N as Re}from"./index-348d70a1.js";const $e={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object,height:String},setup(e){const t=e,n=H(),l=p(()=>n.handleDefs(t.el.text,["text","format"],["",!t.el.text2&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),o=p(()=>n.handleDefs(t.el.text2,["text","format"],["",t.el.text&&!t.el.text3&&!t.el.icon?"text-h6":"text-caption"])),a=p(()=>n.handleDefs(t.el.text3,["text","format"],["","text-caption"])),u=p(()=>{let r=n.handleDefs(t.el.icon,["icon","color","size"],["","","x-large"]);return r.icon&&(r.icon=n.getIcon(r.icon,t.iconmap)),r}),s=p(()=>{let r=n.handleDefs(t.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return r.level=Math.round((r.level-r.min)/(r.max-r.min)*100),r.reverse=!!r.reverse,r});return(r,i)=>{const v=_("v-icon"),m=_("v-progress-circular"),w=_("v-progress-linear");return d(),T(J,null,[e.el.text?(d(),T("div",{key:0,class:X(l.value.format)},R(l.value.text),3)):y("",!0),e.el.icon?(d(),z(v,{key:1,color:u.value.color,size:u.value.size},{default:g(()=>[Y(R(u.value.icon),1)]),_:1},8,["color","size"])):y("",!0),e.el.status&&!s.value.linear?(d(),z(m,{key:2,width:"4",modelValue:s.value.level,"onUpdate:modelValue":i[0]||(i[0]=f=>s.value.level=f),color:s.value.color,reverse:s.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),e.el.status&&s.value.linear?(d(),z(w,{key:3,height:"7",rounded:"",modelValue:s.value.level,"onUpdate:modelValue":i[1]||(i[1]=f=>s.value.level=f),color:s.value.color,reverse:s.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),ke("div",{class:X(e.el.text2?o.value.format:a.value.format)},[e.el.text2?(d(),T("span",{key:0,class:X(o.value.format)},R(o.value.text),3)):y("",!0),e.el.text3?(d(),T("span",{key:1,class:X(a.value.format)},R(a.value.text),3)):y("",!0)],2)],64)}}},Fe={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=H(),l=p(()=>{let r=n.handleDefs(t.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return r.icon&&(r.icon=n.getIcon(r.icon,t.iconmap)),r}),o=p(()=>{let r=n.handleDefs(t.el.status,["level","color","min","max","reverse"],[0,"success",0,100,!1]);return r.level=Math.round((r.level-r.min)/(r.max-r.min)*100),r.reverse=!!r.reverse,r}),a={timer:!1,long:!1};function u(r){let i=[],v=r.cmd;if(r.type==="cmd"){for(const m of t.devices)i=m.split(":"),RegExp(i[0]).test(v)&&(v=v.replace(i[0],i[1]));n.request("text",v)}r.type==="route"&&xe.push({name:"devices",params:{view:r.cmd},query:xe.currentRoute.value.query}),r.type==="url"&&window.open(r.cmd,"_self")}function s(r){let i=n.handleDefs(t.el.click,["cmd","type"],["","cmd"]),v=n.handleDefs(t.el.longClick,["cmd","type"],["","cmd"]),m=n.handleDefs(t.el.longRelease,["cmd","type"],["","cmd"]);(r==="touchStart"||r==="mouseStart")&&(a.timer=setTimeout(()=>{a.long=!0,v.cmd&&u(v)},1e3)),(r==="touchEnd"||r==="mouseEnd")&&(a.long?m.cmd&&u(m):i.cmd&&u(i),clearTimeout(a.timer),a.long=!1)}return(r,i)=>{const v=_("v-progress-linear"),m=_("v-icon"),w=_("v-btn");return d(),T(J,null,[e.el.status?(d(),z(v,{key:0,height:"4",modelValue:o.value.level,"onUpdate:modelValue":i[0]||(i[0]=f=>o.value.level=f),color:o.value.color,reverse:o.value.reverse},null,8,["modelValue","color","reverse"])):y("",!0),b(w,{icon:"",variant:l.value.variant,disabled:l.value.disabled,color:l.value.color,onTouchstart:i[1]||(i[1]=f=>s("touchStart")),onTouchend:i[2]||(i[2]=f=>s("touchEnd")),onMousedown:i[3]||(i[3]=f=>s("mouseStart")),onMouseup:i[4]||(i[4]=f=>s("mouseEnd")),class:"my-2"},{default:g(()=>[b(m,{size:"large"},{default:g(()=>[Y(R(l.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},Pe={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=H(),l=Z();function o(r){l.value=r}const a=p(()=>{let r=n.handleDefs(t.el.slider,["cmd","current","color","min","max","steps","reverse","size","vertical"],["",0,"",0,100,10,!1,4,!1]);return/%v/.test(r.current)&&(r.current=r.current.replace("%v",l.value)),o(r.current),r});let u=null;function s(r){let i=a.value.cmd,v=/\./.exec(a.value.steps),m=0,w=[];v&&(m=a.value.steps.slice(v.index).length-1),i=i.replace("%v",r.toFixed(m));for(const f of t.devices)w=f.split(":"),RegExp(w[0]).test(i)&&(i=i.replace(w[0],w[1]));clearTimeout(u),u=setTimeout(()=>{n.request("text",i)},500)}return(r,i)=>{const v=_("v-slider");return d(),z(v,{modelValue:l.value,"onUpdate:modelValue":[i[0]||(i[0]=m=>l.value=m),i[1]||(i[1]=m=>s(m))],min:a.value.min,max:a.value.max,step:a.value.steps,reverse:a.value.reverse,direction:a.value.vertical?"vertical":"horizontal","track-size":a.value.size,color:a.value.color,"hide-details":"","thumb-label":""},null,8,["modelValue","min","max","step","reverse","direction","track-size","color"])}}},Ie={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=H(),l=Z(!1),o=p(()=>n.handleDefs(t.el.image,["source","height"],["",null]));return(a,u)=>{const s=_("v-skeleton-loader"),r=_("v-img");return d(),T(J,null,[l.value?y("",!0):(d(),z(s,{key:0,type:"image"})),b(r,{src:o.value.source,height:o.value.height,onLoad:u[0]||(u[0]=i=>l.value=!0)},null,8,["src","height"])],64)}}},Ue={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=H(),l=p(()=>{let a=[],u=n.handleDefs(t.el.menu,["name","cmd"],["",""],!0,","),s={};for(const r of u)s={name:/:/.test(r.name)?r.name.split(":")[0]:r.name,cmd:/:/.test(r.cmd)?r.cmd.split(":")[1]:r.cmd},a.push(s);return a});function o(a){let u=[];for(const s of t.devices)u=s.split(":"),RegExp(u[0]).test(a)&&(a=a.replace(u[0],u[1]));n.request("text",a)}return(a,u)=>{const s=_("v-icon"),r=_("v-btn"),i=_("v-list-item-title"),v=_("v-list-item"),m=_("v-list"),w=_("v-menu");return d(),z(w,null,{activator:g(({props:f})=>[b(r,Ee({icon:"",variant:"text"},f,{disabled:l.value.length<1}),{default:g(()=>[b(s,{size:"large"},{default:g(()=>[Y(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:g(()=>[b(m,null,{default:g(()=>[(d(!0),T(J,null,de(l.value,(f,c)=>(d(),z(v,{key:c,value:c,onClick:A=>o(f.cmd)},{default:g(()=>[b(i,null,{default:g(()=>[Y(R(f.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}};var ue=null;function qe(e){return ue||(ue=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),ue(e)}var ce=null;function Be(e){ce||(ce=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),ce(e)}function He(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function ae(e,t){t===void 0&&(t={});var n=document.createElement(e);return Object.keys(t).forEach(function(l){n[l]=t[l]}),n}function we(e,t,n){var l=window.getComputedStyle(e,n||null)||{display:"none"};return l[t]}function ve(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(we(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var We='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',fe=0,se=null;function Je(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Ke.bind(e));var n=e.__resize_listeners__;if(!n){if(e.__resize_listeners__=[],window.ResizeObserver){var l=e.offsetWidth,o=e.offsetHeight,a=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===l&&e.offsetHeight===o)||oe(e)}),u=ve(e),s=u.detached,r=u.rendered;e.__resize_observer_triggered__=s===!1&&r===!1,e.__resize_observer__=a,a.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){oe(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(fe||(se=He(We)),Qe(e),e.__resize_rendered__=ve(e).rendered,window.MutationObserver){var i=new MutationObserver(e.__resize_mutation_handler__);i.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=i}}e.__resize_listeners__.push(t),fe++}function Ge(e,t){var n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",pe),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--fe&&se&&se.parentNode.removeChild(se)}}function Ze(e){var t=e.__resize_last__,n=t.width,l=t.height,o=e.offsetWidth,a=e.offsetHeight;return o!==n||a!==l?{width:o,height:a}:null}function Ke(){var e=ve(this),t=e.rendered,n=e.detached;t!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(me(this),this.addEventListener("scroll",pe,!0)),this.__resize_rendered__=t,oe(this))}function pe(){var e=this;me(this),this.__resize_raf__&&Be(this.__resize_raf__),this.__resize_raf__=qe(function(){var t=Ze(e);t&&(e.__resize_last__=t,oe(e))})}function oe(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Qe(e){var t=we(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var n=ae("div",{className:"resize-triggers"}),l=ae("div",{className:"resize-expand-trigger"}),o=ae("div"),a=ae("div",{className:"resize-contract-trigger"});l.appendChild(o),n.appendChild(l),n.appendChild(a),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:l,expandChild:o,contract:a},me(e),e.addEventListener("scroll",pe,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function me(e){var t=e.__resize_triggers__,n=t.expand,l=t.expandChild,o=t.contract,a=o.scrollWidth,u=o.scrollHeight,s=n.offsetWidth,r=n.offsetHeight,i=n.scrollWidth,v=n.scrollHeight;o.scrollLeft=a,o.scrollTop=u,l.style.width=s+1+"px",l.style.height=r+1+"px",n.scrollLeft=i,n.scrollTop=v}var B=function(){return B=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},B.apply(this,arguments)};var Xe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Ye(e){return t=Object.create(null),Xe.forEach(function(n){t[n]=function(l){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[l].apply(e.value,o)}}(n)}),t;var t}var et={autoresize:[Boolean,Object]},tt=/^on[^a-z]/,nt=function(e){return tt.test(e)};function ie(e,t){var n=le(e);return n&&typeof n=="object"&&"value"in n?n.value||t:n||t}var rt="ecLoadingOptions",at={loading:Boolean,loadingOptions:Object},K=null,Oe="x-vue-echarts",ze=[],Q=[];(function(e,t){if(e&&typeof document<"u"){var n,l=t.prepend===!0?"prepend":"append",o=t.singleTag===!0,a=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var u=ze.indexOf(a);u===-1&&(u=ze.push(a)-1,Q[u]={}),n=Q[u]&&Q[u][l]?Q[u][l]:Q[u][l]=s()}else n=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function s(){var r=document.createElement("style");if(r.setAttribute("type","text/css"),t.attributes)for(var i=Object.keys(t.attributes),v=0;v<i.length;v++)r.setAttribute(i[v],t.attributes[i[v]]);var m=l==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(m,r),r}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var it=function(){if(K!=null)return K;if(typeof HTMLElement>"u"||typeof customElements>"u")return K=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(Oe)}catch{return K=!1}return K=!0}(),st="ecTheme",lt="ecInitOptions",ot="ecUpdateOptions",ut=Ce({name:"echarts",props:B(B({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},et),at),emits:{},inheritAttrs:!1,setup:function(e,t){var n=t.attrs,l=te(),o=te(),a=te(),u=te(),s=ne(st,null),r=ne(lt,null),i=ne(ot,null),v=De(e),m=v.autoresize,w=v.manualUpdate,f=v.loading,c=v.loadingOptions,A=p(function(){return u.value||e.option||null}),L=p(function(){return e.theme||ie(s,{})}),M=p(function(){return e.initOptions||ie(r,{})}),V=p(function(){return e.updateOptions||ie(i,{})}),O=p(function(){return function(E){var x={};for(var D in E)nt(D)||(x[D]=E[D]);return x}(n)}),j=Se().proxy.$listeners;function F(E){if(o.value){var x=a.value=Le(o.value,L.value,M.value);e.group&&(x.group=e.group);var D=j;D||(D={},Object.keys(n).filter(function(S){return S.indexOf("on")===0&&S.length>2}).forEach(function(S){var k=S.charAt(2).toLowerCase()+S.slice(3);k.substring(k.length-4)==="Once"&&(k="~".concat(k.substring(0,k.length-4))),D[k]=n[S]})),Object.keys(D).forEach(function(S){var k=D[S];if(k){var $=S.toLowerCase();$.charAt(0)==="~"&&($=$.substring(1),k.__once__=!0);var I=x;if($.indexOf("zr:")===0&&(I=x.getZr(),$=$.substring(3)),k.__once__){delete k.__once__;var G=k;k=function(){for(var N=[],q=0;q<arguments.length;q++)N[q]=arguments[q];G.apply(void 0,N),I.off($,k)}}I.on($,k)}}),m.value?Te(function(){x&&!x.isDisposed()&&x.resize(),P()}):P()}function P(){var S=E||A.value;S&&x.setOption(S,V.value)}}function U(){a.value&&(a.value.dispose(),a.value=void 0)}var C=null;re(w,function(E){typeof C=="function"&&(C(),C=null),E||(C=re(function(){return e.option},function(x,D){x&&(a.value?a.value.setOption(x,B({notMerge:x!==D},V.value)):F())},{deep:!0}))},{immediate:!0}),re([L,M],function(){U(),F()},{deep:!0}),ye(function(){e.group&&a.value&&(a.value.group=e.group)});var h=Ye(a);return function(E,x,D){var P=ne(rt,{}),S=p(function(){return B(B({},ie(P,{})),D==null?void 0:D.value)});ye(function(){var k=E.value;k&&(x.value?k.showLoading(S.value):k.hideLoading())})}(a,f,c),function(E,x,D){var P=null;re([D,E,x],function(S,k,$){var I=S[0],G=S[1],N=S[2];if(I&&G&&N){var q=N===!0?{}:N,ee=q.throttle,W=ee===void 0?100:ee,he=q.onResize,ge=function(){G.resize(),he==null||he()};P=W?je(ge,W):ge,Je(I,P)}$(function(){I&&P&&Ge(I,P)})})}(a,m,o),_e(function(){F()}),Ae(function(){it&&l.value?l.value.__dispose=U:U()}),B({chart:a,root:l,inner:o,setOption:function(E,x){e.manualUpdate&&(u.value=E),a.value?a.value.setOption(E,x||{}):F(E)},nonEventAttrs:O},h)},render:function(){var e=B({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",be(Oe,e,[be("div",{ref:"inner",class:"echarts-inner"})])}});const ct={__name:"PanelMainChart",props:{el:Object,iconmap:Array,devices:Array,height:String},setup(e){const t=e,n=H(),l=Me(),o=Ve(),a=p(()=>n.handleDefs(t.el.serie,["data","name","digits","suffix","type","yAxisIndex"],[null,"",0,"","line",0],!0)),u=p(()=>{let f="height: "+t.height;return n.app.panelMaximized&&(f="height: 80dvh"),f}),s=Z({}),r=Z(!0);function i(f){return isNaN(f)?f:(c=>new Date(c.setDate(c.getDate()+(Number(f)||0))).toISOString())(new Date).split("T")[0]}async function v(f){let c=f.split(" "),A,L=[],M,V,O=[];for(const j of t.devices)j.split(":")[0]===c[1]&&(c[1]=j.split(":")[1]);if(c[4]=i(c[4]),c[5]=i(c[5]),A=await n.request("text",c.join(" ")),L=A.split(`
`),L.length>0)for(const j of L)M=new Date(j.split(" ")[0].replace("_","T")),V=parseFloat(j.split(" ")[1]),O.push([M,V]);return O}function m(f){let c=/,/.test(f)?f:f.replace(/ /g,",");return/^\[.*\]$/.test(c)||(c="["+c+"]"),n.stringToJson(c)}async function w(){let f,c={tooltip:{trigger:"axis"},series:[],yAxis:[],xAxis:{},legend:{data:[],bottom:10}},A=JSON.parse(JSON.stringify(n.getEl(t.el,["options"])||{})),L=JSON.parse(JSON.stringify(n.getEl(t.el,["options","series"])||[])),M;if(r.value=!0,a.value.length>0){L.length>0&&delete A.series;for(const[V,O]of Object.entries(a.value))f=/^get.*/.test(O.data)?await v(O.data):m(O.data),M={formatter:j=>j.toLocaleString(o.locale.value,{minimumFractionDigits:O.digits,maximumFractionDigits:O.digits})+O.suffix},c.xAxis.type=/^get.*/.test(O.data)?"time":"category",c.series.push(Object.assign({name:O.name,type:O.type,data:f},L[V]||{})),c.yAxis.push({type:"value",axisLabel:M}),c.legend.data.push(O.name);Object.keys(A).length>0&&Object.assign(c,A),s.value=Object.assign({},c),r.value=!1}}return _e(()=>{w()}),(f,c)=>(d(),z(le(ut),{style:Ne(u.value),option:s.value,loading:r.value,theme:le(l).global.name.value==="dark"?"dark":"light",autoresize:""},null,8,["style","option","loading","theme"]))}},dt={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(e){const t=H();function n(s,r){return t.handleDefs(s[r].size,["size"],[!1]).size}function l(s){let r="";return["info"].indexOf(s)!==-1&&(r="mx-2"),r}function o(s,r){return s[r]?t.handleDefs(s[r].divider,["show"],[!1]).show:!1}function a(s){return s.level?t.handleDefs(s.level.height,["height"],["64px"]).height:"64px"}function u(s){if(s==="info")return $e;if(s==="btn")return Fe;if(s==="slider")return Pe;if(s==="image")return Ie;if(s==="menu")return Ue;if(s==="chart")return ct}return(s,r)=>{const i=_("v-sheet"),v=_("v-col"),m=_("v-divider"),w=_("v-row"),f=_("v-expand-transition");return d(!0),T(J,null,de(e.main,(c,A)=>(d(),T("div",{key:A},[b(f,null,{default:g(()=>[e.levels.indexOf(A)!==-1?(d(),z(w,{key:0,"no-gutters":"",class:"text-center align-center"},{default:g(()=>[b(i,{height:a(c,"level")},null,8,["height"]),(d(),T(J,null,de(["left1","left2","mid","right1","right2"],L=>(d(),T(J,{key:L},[c.level[L]?(d(),z(v,{key:0,cols:n(c,L),class:X(l(c.level[L]))},{default:g(()=>[(d(),z(Re(u(c.level[L])),{el:c[L],iconmap:e.iconmap,devices:e.devices,height:a(c,"level")},null,8,["el","iconmap","devices","height"]))]),_:2},1032,["cols","class"])):y("",!0),o(c,L)?(d(),z(m,{key:1,vertical:""})):y("",!0)],64))),64)),o(c,"level")?(d(),z(m,{key:0})):y("",!0)]),_:2},1024)):y("",!0)]),_:2},1024)]))),128)}}},vt={key:1},ft={key:3},_t={key:1},pt={key:3},mt={key:1},ht={key:3},xt={__name:"PanelCard",props:{panel:Object},setup(e){const t=e,n=H();let l=n.thread();_e(()=>n.thread(l));function o(C){let h=n.handleDefs(t.panel.status[C],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return h.level=Math.round((h.level-h.min)/(h.max-h.min)*100),h}const a=p(()=>o("bar")),u=p(()=>o("bar2")),s=p(()=>n.handleDefs(t.panel.status.imageUrl,["url"],[""])),r=p(()=>n.handleDefs(t.panel.status.title,["title"],[""])),i=p(()=>n.handleDefs(t.panel.panel.expandable,["expandable","expanded","maximizable"],[!1,!1,!1])),v=Z(i.value.expanded),m=p(()=>{let C=null;return i.value.expandable&&(C=v.value?"mdi-arrow-collapse":"mdi-arrow-expand"),!i.value.expandable&&!i.value.expanded&&t.panel.main.length>1&&(C="mdi-swap-vertical"),C}),w=p(()=>{let C=[];for(const[h,E]of Object.entries(t.panel.main))n.handleDefs(E.level.show,["show"],[!0]).show&&C.push(Number(h));return C});function f(C){let h=-1;i.value.expandable||!i.value.expandable&&i.value.expanded?(C||(i.value.maximizable&&(n.app.panelMaximized=v.value?!1:t.panel),v.value=!v.value),c.value=v.value?w.value:[w.value[0]]):(h=w.value.indexOf(c.value?c.value[0]:null),c.value=h===-1||h===w.value.length-1?[w.value[0]]:[w.value[h+1]])}const c=Z([]);function A(C){let h=n.handleDefs(t.panel.info[C],["text","icon","color"],["","",""]);return h.icon&&(h.icon=n.getIcon(h.icon,t.panel.panel.iconmap)),h}function L(){let C=!!(M.value.text||V.value.text),h=!!(O.value.text||j.value.text),E=!!(F.value.text||U.value.text);return!C&&h&&!E?7:null}const M=p(()=>A("left1")),V=p(()=>A("left2")),O=p(()=>A("mid1")),j=p(()=>A("mid2")),F=p(()=>A("right1")),U=p(()=>A("right2"));return f(!0),(C,h)=>{const E=_("v-progress-linear"),x=_("v-col"),D=_("v-row"),P=_("v-spacer"),S=_("v-btn"),k=_("v-card-title"),$=_("v-img"),I=_("v-sheet"),G=_("v-divider"),N=_("v-icon"),q=_("v-card-text"),ee=_("v-card");return d(),z(ee,{variant:"tonal"},{default:g(()=>[b(D,{"no-gutters":""},{default:g(()=>[e.panel.status.bar?(d(),z(x,{key:0},{default:g(()=>[b(E,{height:"7",modelValue:a.value.level,"onUpdate:modelValue":h[0]||(h[0]=W=>a.value.level=W),color:a.value.color,reverse:a.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):y("",!0),e.panel.status.bar2?(d(),z(x,{key:1},{default:g(()=>[b(E,{height:"7",modelValue:u.value.level,"onUpdate:modelValue":h[1]||(h[1]=W=>u.value.level=W),color:u.value.color,reverse:u.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):y("",!0)]),_:1}),b(I,{color:"secondary"},{default:g(()=>[b($,{src:s.value.url,gradient:s.value.url?le(n).app.header.imageGradient:"",height:"48",cover:""},{default:g(()=>[e.panel.status.title?(d(),z(k,{key:0},{default:g(()=>[b(D,{"no-gutters":""},{default:g(()=>[b(x,null,{default:g(()=>[Y(R(r.value.title),1)]),_:1}),b(P),m.value?(d(),z(x,{key:0,cols:"1",class:"text-right"},{default:g(()=>[b(S,{icon:m.value,size:"small",variant:"plain",density:"compact",onClick:h[2]||(h[2]=W=>f(!1))},null,8,["icon"])]),_:1})):y("",!0)]),_:1})]),_:1})):y("",!0)]),_:1},8,["src","gradient"])]),_:1}),b(G),b(dt,{main:e.panel.main,levels:c.value,iconmap:e.panel.panel.iconmap,devices:e.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),b(I,{color:"secondary"},{default:g(()=>[b(q,{class:"pa-1"},{default:g(()=>[b(D,{"no-gutters":""},{default:g(()=>[b(x,{class:"text-truncate text-left"},{default:g(()=>[M.value.icon?(d(),z(N,{key:0,icon:M.value.icon,color:M.value.color,size:"small"},null,8,["icon","color"])):y("",!0),M.value.text?(d(),T("span",vt,R(M.value.text),1)):y("",!0),V.value.icon?(d(),z(N,{key:2,icon:V.value.icon,color:V.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),V.value.text?(d(),T("span",ft,R(V.value.text),1)):y("",!0)]),_:1}),b(x,{class:"text-truncate text-center",cols:L()},{default:g(()=>[O.value.icon?(d(),z(N,{key:0,icon:O.value.icon,color:O.value.color,size:"small"},null,8,["icon","color"])):y("",!0),O.value.text?(d(),T("span",_t,R(O.value.text),1)):y("",!0),j.value.icon?(d(),z(N,{key:2,icon:j.value.icon,color:j.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),j.value.text?(d(),T("span",pt,R(j.value.text),1)):y("",!0)]),_:1},8,["cols"]),b(x,{class:"text-truncate text-right"},{default:g(()=>[F.value.icon?(d(),z(N,{key:0,icon:F.value.icon,color:F.value.color,size:"small"},null,8,["icon","color"])):y("",!0),F.value.text?(d(),T("span",mt,R(F.value.text),1)):y("",!0),U.value.icon?(d(),z(N,{key:2,icon:U.value.icon,color:U.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):y("",!0),U.value.text?(d(),T("span",ht,R(U.value.text),1)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{xt as _};
