import{u as O,c as _,r as c,o as l,b as k,p as T,t as V,k as d,a as x,w as i,j as U,q as ee,F as M,e as f,s as H,f as B,m as te,d as L,x as le,h as ne}from"./index-10d6a3d5.js";const ae={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object},setup(u){const n=u,r=O(),y=_(()=>r.handleDefs(n.el.text,["text","format"],["",!n.el.text2&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),h=_(()=>r.handleDefs(n.el.text2,["text","format"],["",n.el.text&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),s=_(()=>r.handleDefs(n.el.text3,["text","format"],["","text-caption"])),a=_(()=>{let e=r.handleDefs(n.el.icon,["icon","color","size"],["","","x-large"]);return e.icon&&(e.icon=r.getIcon(e.icon,n.iconmap)),e}),o=_(()=>{let e=r.handleDefs(n.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e});return(e,t)=>{const g=c("v-icon"),v=c("v-progress-circular"),b=c("v-progress-linear");return l(),k(M,null,[u.el.text?(l(),k("div",{key:0,class:T(y.value.format)},V(y.value.text),3)):d("",!0),u.el.icon?(l(),x(g,{key:1,color:a.value.color,size:a.value.size},{default:i(()=>[U(V(a.value.icon),1)]),_:1},8,["color","size"])):d("",!0),u.el.status&&!o.value.linear?(l(),x(v,{key:2,width:"4",modelValue:o.value.level,"onUpdate:modelValue":t[0]||(t[0]=m=>o.value.level=m),color:o.value.color,reverse:o.value.reverse},null,8,["modelValue","color","reverse"])):d("",!0),u.el.status&&o.value.linear?(l(),x(b,{key:3,height:"7",modelValue:o.value.level,"onUpdate:modelValue":t[1]||(t[1]=m=>o.value.level=m),color:o.value.color,reverse:o.value.reverse},null,8,["modelValue","color","reverse"])):d("",!0),ee("div",{class:T(u.el.text2?h.value.format:s.value.format)},[u.el.text2?(l(),k("span",{key:0,class:T(h.value.format)},V(h.value.text),3)):d("",!0),u.el.text3?(l(),k("span",{key:1,class:T(s.value.format)},V(s.value.text),3)):d("",!0)],2)],64)}}},oe={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array},setup(u){const n=u,r=O(),y=_(()=>{let e=r.handleDefs(n.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return e.icon&&(e.icon=r.getIcon(e.icon,n.iconmap)),e}),h=_(()=>{let e=r.handleDefs(n.el.status,["level","color","reverse","min","max"],[0,"success",!1,0,100]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e}),s={timer:!1,long:!1};function a(e){let t=[],g=e.cmd;if(e.type==="cmd"){for(const v of n.devices)t=v.split(":"),RegExp(t[0]).test(g)&&(g=g.replace(t[0],t[1]));r.request("text",g)}e.type==="route"&&H.push({name:"devices",params:{view:e.cmd},query:H.currentRoute.value.query}),e.type==="url"&&window.open(e.cmd,"_self")}function o(e){let t=r.handleDefs(n.el.click,["cmd","type"],["","cmd"]),g=r.handleDefs(n.el.longClick,["cmd","type"],["","cmd"]),v=r.handleDefs(n.el.longRelease,["cmd","type"],["","cmd"]);(e==="touchStart"||e==="mouseStart")&&(s.timer=setTimeout(()=>{s.long=!0,g.cmd&&a(g)},1e3)),(e==="touchEnd"||e==="mouseEnd")&&(s.long?v.cmd&&a(v):t.cmd&&a(t),clearTimeout(s.timer),s.long=!1)}return(e,t)=>{const g=c("v-progress-linear"),v=c("v-icon"),b=c("v-btn");return l(),k(M,null,[u.el.status?(l(),x(g,{key:0,height:"4",modelValue:h.value.level,"onUpdate:modelValue":t[0]||(t[0]=m=>h.value.level=m),color:h.value.color,reverse:h.value.reverse},null,8,["modelValue","color","reverse"])):d("",!0),f(b,{icon:"",variant:y.value.variant,disabled:y.value.disabled,color:y.value.color,onTouchstart:t[1]||(t[1]=m=>o("touchStart")),onTouchend:t[2]||(t[2]=m=>o("touchEnd")),onMousedown:t[3]||(t[3]=m=>o("mouseStart")),onMouseup:t[4]||(t[4]=m=>o("mouseEnd")),class:"my-2"},{default:i(()=>[f(v,{size:"large"},{default:i(()=>[U(V(y.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},se={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array},setup(u){const n=u,r=O(),y=B();function h(e){y.value=e}const s=_(()=>{let e=r.handleDefs(n.el.slider,["cmd","current","color","min","max","steps"],["",0,"",0,100,10]);return h(e.current),e});let a=null;function o(e){let t=s.value.cmd,g=/\./.exec(s.value.steps),v=0,b=[];g&&(v=s.value.steps.slice(g.index).length-1),t=t.replace("%v",e.toFixed(v));for(const m of n.devices)b=m.split(":"),RegExp(b[0]).test(t)&&(t=t.replace(b[0],b[1]));clearTimeout(a),a=setTimeout(()=>{r.request("text",t)},500)}return(e,t)=>{const g=c("v-slider");return l(),x(g,{modelValue:y.value,"onUpdate:modelValue":[t[0]||(t[0]=v=>y.value=v),t[1]||(t[1]=v=>o(v))],min:s.value.min,max:s.value.max,step:s.value.steps,"hide-details":"","thumb-label":"",color:s.value.color},null,8,["modelValue","min","max","step","color"])}}},re={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array},setup(u){const n=u,r=O(),y=B(!1),h=_(()=>r.handleDefs(n.el.image,["source"],[""]));return(s,a)=>{const o=c("v-skeleton-loader"),e=c("v-img");return l(),k(M,null,[y.value?d("",!0):(l(),x(o,{key:0,type:"image"})),f(e,{src:h.value.source,width:"100hv",onLoad:a[0]||(a[0]=t=>y.value=!0)},null,8,["src"])],64)}}},ce={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array},setup(u){const n=u,r=O(),y=_(()=>{let s=[],a=r.handleDefs(n.el.menu,["name","cmd"],["",""],!0,","),o={};for(const e of a)o={name:/:/.test(e.name)?e.name.split(":")[0]:e.name,cmd:/:/.test(e.cmd)?e.cmd.split(":")[1]:e.cmd},s.push(o);return s});function h(s){let a=[];for(const o of n.devices)a=o.split(":"),RegExp(a[0]).test(s)&&(s=s.replace(a[0],a[1]));r.request("text",s)}return(s,a)=>{const o=c("v-icon"),e=c("v-btn"),t=c("v-list-item-title"),g=c("v-list-item"),v=c("v-list"),b=c("v-menu");return l(),x(b,null,{activator:i(({props:m})=>[f(e,te({icon:"",variant:"text"},m,{disabled:y.value.length<1}),{default:i(()=>[f(o,{size:"large"},{default:i(()=>[U(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:i(()=>[f(v,null,{default:i(()=>[(l(!0),k(M,null,L(y.value,(m,C)=>(l(),x(g,{key:C,value:C,onClick:w=>h(m.cmd)},{default:i(()=>[f(t,null,{default:i(()=>[U(V(m.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}},ue={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(u){const n=O();function r(a,o){return n.handleDefs(a[o].size,["size"],[!1]).size}function y(a){let o="";return["info"].indexOf(a)!==-1&&(o="mx-2"),o}function h(a,o){return a[o]?n.handleDefs(a[o].divider,["show"],[!1]).show:!1}function s(a){if(a==="info")return ae;if(a==="btn")return oe;if(a==="slider")return se;if(a==="image")return re;if(a==="menu")return ce}return(a,o)=>{const e=c("v-sheet"),t=c("v-col"),g=c("v-divider"),v=c("v-row"),b=c("v-expand-transition");return l(!0),k(M,null,L(u.main,(m,C)=>(l(),k("div",{key:C},[f(b,null,{default:i(()=>[u.levels.indexOf(C)!==-1?(l(),x(v,{key:0,"no-gutters":"",class:"text-center align-center"},{default:i(()=>[f(e,{height:h(m,"level")||u.levels.length<2?"64px":"55px"},null,8,["height"]),(l(),k(M,null,L(["left1","left2","mid","right1","right2"],w=>(l(),k(M,{key:w},[m.level[w]?(l(),x(t,{key:0,cols:r(m,w),class:T(y(m.level[w]))},{default:i(()=>[(l(),x(le(s(m.level[w])),{el:m[w],iconmap:u.iconmap,devices:u.devices},null,8,["el","iconmap","devices"]))]),_:2},1032,["cols","class"])):d("",!0),h(m,w)?(l(),x(g,{key:1,vertical:""})):d("",!0)],64))),64)),h(m,"level")?(l(),x(g,{key:0})):d("",!0)]),_:2},1024)):d("",!0)]),_:2},1024)]))),128)}}},ie={key:1},ve={key:3},de={key:1},me={key:3},fe={key:1},pe={key:3},xe={__name:"PanelCard",props:{panel:Object},setup(u){const n=O(),r=u;function y(D){let p=n.handleDefs(r.panel.status[D],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return p.level=Math.round((p.level-p.min)/(p.max-p.min)*100),p.reverse=!!p.reverse,p}const h=_(()=>y("bar")),s=_(()=>y("bar2")),a=_(()=>n.handleDefs(r.panel.status.imageUrl,["url"],[""])),o=_(()=>n.handleDefs(r.panel.status.title,["title"],[""])),e=_(()=>n.handleDefs(r.panel.panel.expandable,["expandable","expanded"],[!1,!1])),t=B(e.value.expanded),g=_(()=>{let D="";return e.value.expandable?D=t.value?"mdi-arrow-collapse":"mdi-arrow-expand":D="mdi-swap-vertical",D}),v=_(()=>{let D=[];for(const[p,q]of Object.entries(r.panel.main))n.handleDefs(q.level.show,["show"],[!0]).show&&D.push(Number(p));return D}),b=B(!1);function m(){b.value=!1}function C(){e.value.expandable?t.value=!t.value:b.value=!0}const w=_(()=>{let D=[],p=-1;return e.value.expandable?D=t.value?v.value:[v.value[0]]:b.value?(p=v.value.indexOf(w.value?w.value[0]:null),D=p===-1||p===v.value.length-1?[v.value[0]]:[v.value[p+1]],m()):D=[v.value[0]],D});function $(D){let p=n.handleDefs(r.panel.info[D],["text","icon","color"],["","",""]);return p.icon&&(p.icon=n.getIcon(p.icon,r.panel.panel.iconmap)),p}const P=_(()=>$("left1")),S=_(()=>$("left2")),R=_(()=>$("mid1")),E=_(()=>$("mid2")),j=_(()=>$("right1")),I=_(()=>$("right2"));return(D,p)=>{const q=c("v-progress-linear"),z=c("v-col"),N=c("v-row"),J=c("v-spacer"),K=c("v-btn"),Q=c("v-card-title"),W=c("v-img"),G=c("v-sheet"),X=c("v-divider"),A=c("v-icon"),Y=c("v-card-text"),Z=c("v-card");return l(),x(Z,{variant:"tonal"},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[u.panel.status.bar?(l(),x(z,{key:0},{default:i(()=>[f(q,{height:"7",modelValue:h.value.level,"onUpdate:modelValue":p[0]||(p[0]=F=>h.value.level=F),color:h.value.color,reverse:h.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):d("",!0),u.panel.status.bar2?(l(),x(z,{key:1},{default:i(()=>[f(q,{height:"7",modelValue:s.value.level,"onUpdate:modelValue":p[1]||(p[1]=F=>s.value.level=F),color:s.value.color,reverse:s.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):d("",!0)]),_:1}),f(G,{color:"secondary"},{default:i(()=>[f(W,{src:a.value.url,gradient:a.value.url?ne(n).app.header.imageGradient:"",height:"48",cover:""},{default:i(()=>[u.panel.status.title?(l(),x(Q,{key:0},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[f(z,null,{default:i(()=>[U(V(o.value.title),1)]),_:1}),f(J),v.value.length>1?(l(),x(z,{key:0,cols:"1",class:"text-right"},{default:i(()=>[f(K,{icon:g.value,size:"small",variant:"plain",density:"compact",onClick:C},null,8,["icon"])]),_:1})):d("",!0)]),_:1})]),_:1})):d("",!0)]),_:1},8,["src","gradient"])]),_:1}),f(X),f(ue,{main:u.panel.main,levels:w.value,iconmap:u.panel.panel.iconmap,devices:u.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),f(G,{color:"secondary"},{default:i(()=>[f(Y,{class:"pa-1"},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[f(z,{class:"text-truncate text-left"},{default:i(()=>[P.value.icon?(l(),x(A,{key:0,icon:P.value.icon,color:P.value.color,size:"small"},null,8,["icon","color"])):d("",!0),P.value.text?(l(),k("span",ie,V(P.value.text),1)):d("",!0),S.value.icon?(l(),x(A,{key:2,icon:S.value.icon,color:S.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):d("",!0),S.value.text?(l(),k("span",ve,V(S.value.text),1)):d("",!0)]),_:1}),f(z,{class:"text-truncate text-center"},{default:i(()=>[R.value.icon?(l(),x(A,{key:0,icon:R.value.icon,color:R.value.color,size:"small"},null,8,["icon","color"])):d("",!0),R.value.text?(l(),k("span",de,V(R.value.text),1)):d("",!0),E.value.icon?(l(),x(A,{key:2,icon:E.value.icon,color:E.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):d("",!0),E.value.text?(l(),k("span",me,V(E.value.text),1)):d("",!0)]),_:1}),f(z,{class:"text-truncate text-right"},{default:i(()=>[j.value.icon?(l(),x(A,{key:0,icon:j.value.icon,color:j.value.color,size:"small"},null,8,["icon","color"])):d("",!0),j.value.text?(l(),k("span",fe,V(j.value.text),1)):d("",!0),I.value.icon?(l(),x(A,{key:2,icon:I.value.icon,color:I.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):d("",!0),I.value.text?(l(),k("span",pe,V(I.value.text),1)):d("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{xe as _};
