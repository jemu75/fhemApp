import{u as S,c as p,r,o as a,b,p as U,t as C,k as v,a as _,w as i,j as q,q as te,F as O,e as f,s as H,f as B,m as le,d as L,x as ne,h as ae}from"./index-cf353a75.js";const oe={__name:"PanelMainInfo",props:{el:Object,iconmap:Array,devices:Object},setup(c){const n=c,s=S(),x=p(()=>s.handleDefs(n.el.text,["text","format"],["",!n.el.text2&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),h=p(()=>s.handleDefs(n.el.text2,["text","format"],["",n.el.text&&!n.el.text3&&!n.el.icon?"text-h6":"text-caption"])),o=p(()=>s.handleDefs(n.el.text3,["text","format"],["","text-caption"])),m=p(()=>{let e=s.handleDefs(n.el.icon,["icon","color","size"],["","","x-large"]);return e.icon&&(e.icon=s.getIcon(e.icon,n.iconmap)),e}),t=p(()=>{let e=s.handleDefs(n.el.status,["level","color","min","max","reverse","linear"],[0,"success",0,100,!1,!1]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e});return(e,l)=>{const g=r("v-icon"),u=r("v-progress-circular"),D=r("v-progress-linear");return a(),b(O,null,[c.el.text?(a(),b("div",{key:0,class:U(x.value.format)},C(x.value.text),3)):v("",!0),c.el.icon?(a(),_(g,{key:1,color:m.value.color,size:m.value.size},{default:i(()=>[q(C(m.value.icon),1)]),_:1},8,["color","size"])):v("",!0),c.el.status&&!t.value.linear?(a(),_(u,{key:2,width:"4",modelValue:t.value.level,"onUpdate:modelValue":l[0]||(l[0]=y=>t.value.level=y),color:t.value.color,reverse:t.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),c.el.status&&t.value.linear?(a(),_(D,{key:3,height:"7",rounded:"",modelValue:t.value.level,"onUpdate:modelValue":l[1]||(l[1]=y=>t.value.level=y),color:t.value.color,reverse:t.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),te("div",{class:U(c.el.text2?h.value.format:o.value.format)},[c.el.text2?(a(),b("span",{key:0,class:U(h.value.format)},C(h.value.text),3)):v("",!0),c.el.text3?(a(),b("span",{key:1,class:U(o.value.format)},C(o.value.text),3)):v("",!0)],2)],64)}}},se={__name:"PanelMainBtn",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,s=S(),x=p(()=>{let e=s.handleDefs(n.el.btn,["icon","disabled","color","variant"],["",!1,"","text"]);return e.icon&&(e.icon=s.getIcon(e.icon,n.iconmap)),e}),h=p(()=>{let e=s.handleDefs(n.el.status,["level","color","reverse","min","max"],[0,"success",!1,0,100]);return e.level=Math.round((e.level-e.min)/(e.max-e.min)*100),e.reverse=!!e.reverse,e}),o={timer:!1,long:!1};function m(e){let l=[],g=e.cmd;if(e.type==="cmd"){for(const u of n.devices)l=u.split(":"),RegExp(l[0]).test(g)&&(g=g.replace(l[0],l[1]));s.request("text",g)}e.type==="route"&&H.push({name:"devices",params:{view:e.cmd},query:H.currentRoute.value.query}),e.type==="url"&&window.open(e.cmd,"_self")}function t(e){let l=s.handleDefs(n.el.click,["cmd","type"],["","cmd"]),g=s.handleDefs(n.el.longClick,["cmd","type"],["","cmd"]),u=s.handleDefs(n.el.longRelease,["cmd","type"],["","cmd"]);(e==="touchStart"||e==="mouseStart")&&(o.timer=setTimeout(()=>{o.long=!0,g.cmd&&m(g)},1e3)),(e==="touchEnd"||e==="mouseEnd")&&(o.long?u.cmd&&m(u):l.cmd&&m(l),clearTimeout(o.timer),o.long=!1)}return(e,l)=>{const g=r("v-progress-linear"),u=r("v-icon"),D=r("v-btn");return a(),b(O,null,[c.el.status?(a(),_(g,{key:0,height:"4",modelValue:h.value.level,"onUpdate:modelValue":l[0]||(l[0]=y=>h.value.level=y),color:h.value.color,reverse:h.value.reverse},null,8,["modelValue","color","reverse"])):v("",!0),f(D,{icon:"",variant:x.value.variant,disabled:x.value.disabled,color:x.value.color,onTouchstart:l[1]||(l[1]=y=>t("touchStart")),onTouchend:l[2]||(l[2]=y=>t("touchEnd")),onMousedown:l[3]||(l[3]=y=>t("mouseStart")),onMouseup:l[4]||(l[4]=y=>t("mouseEnd")),class:"my-2"},{default:i(()=>[f(u,{size:"large"},{default:i(()=>[q(C(x.value.icon),1)]),_:1})]),_:1},8,["variant","disabled","color"])],64)}}},re={__name:"PanelMainSlider",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,s=S(),x=B();function h(e){x.value=e}const o=p(()=>{let e=s.handleDefs(n.el.slider,["cmd","current","color","min","max","steps"],["",0,"",0,100,10]);return h(e.current),e});let m=null;function t(e){let l=o.value.cmd,g=/\./.exec(o.value.steps),u=0,D=[];g&&(u=o.value.steps.slice(g.index).length-1),l=l.replace("%v",e.toFixed(u));for(const y of n.devices)D=y.split(":"),RegExp(D[0]).test(l)&&(l=l.replace(D[0],D[1]));clearTimeout(m),m=setTimeout(()=>{s.request("text",l)},500)}return(e,l)=>{const g=r("v-slider");return a(),_(g,{modelValue:x.value,"onUpdate:modelValue":[l[0]||(l[0]=u=>x.value=u),l[1]||(l[1]=u=>t(u))],min:o.value.min,max:o.value.max,step:o.value.steps,"hide-details":"","thumb-label":"",color:o.value.color},null,8,["modelValue","min","max","step","color"])}}},ce={__name:"PanelMainImage",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,s=S(),x=B(!1),h=p(()=>s.handleDefs(n.el.image,["source"],[""]));return(o,m)=>{const t=r("v-skeleton-loader"),e=r("v-img");return a(),b(O,null,[x.value?v("",!0):(a(),_(t,{key:0,type:"image"})),f(e,{src:h.value.source,width:"100hv",onLoad:m[0]||(m[0]=l=>x.value=!0)},null,8,["src"])],64)}}},ue={__name:"PanelMainMenu",props:{el:Object,iconmap:Array,devices:Array},setup(c){const n=c,s=S(),x=p(()=>{let o=[],m=s.handleDefs(n.el.menu,["name","cmd"],["",""],!0,","),t={};for(const e of m)t={name:/:/.test(e.name)?e.name.split(":")[0]:e.name,cmd:/:/.test(e.cmd)?e.cmd.split(":")[1]:e.cmd},o.push(t);return o});function h(o){let m=[];for(const t of n.devices)m=t.split(":"),RegExp(m[0]).test(o)&&(o=o.replace(m[0],m[1]));s.request("text",o)}return(o,m)=>{const t=r("v-icon"),e=r("v-btn"),l=r("v-list-item-title"),g=r("v-list-item"),u=r("v-list"),D=r("v-menu");return a(),_(D,null,{activator:i(({props:y})=>[f(e,le({icon:"",variant:"text"},y,{disabled:x.value.length<1}),{default:i(()=>[f(t,{size:"large"},{default:i(()=>[q(" mdi-dots-vertical ")]),_:1})]),_:2},1040,["disabled"])]),default:i(()=>[f(u,null,{default:i(()=>[(a(!0),b(O,null,L(x.value,(y,w)=>(a(),_(g,{key:w,value:w,onClick:z=>h(y.cmd)},{default:i(()=>[f(l,null,{default:i(()=>[q(C(y.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})}}},ie={__name:"PanelMain",props:{main:Object,levels:Array,iconmap:Object,devices:Object},setup(c){const n=S();function s(t,e){return n.handleDefs(t[e].size,["size"],[!1]).size}function x(t){let e="";return["info"].indexOf(t)!==-1&&(e="mx-2"),e}function h(t,e){return t[e]?n.handleDefs(t[e].divider,["show"],[!1]).show:!1}function o(t){return t.level?n.handleDefs(t.level.height,["height"],["64px"]).height:"64px"}function m(t){if(t==="info")return oe;if(t==="btn")return se;if(t==="slider")return re;if(t==="image")return ce;if(t==="menu")return ue}return(t,e)=>{const l=r("v-sheet"),g=r("v-col"),u=r("v-divider"),D=r("v-row"),y=r("v-expand-transition");return a(!0),b(O,null,L(c.main,(w,z)=>(a(),b("div",{key:z},[f(y,null,{default:i(()=>[c.levels.indexOf(z)!==-1?(a(),_(D,{key:0,"no-gutters":"",class:"text-center align-center"},{default:i(()=>[f(l,{height:o(w,"level")},null,8,["height"]),(a(),b(O,null,L(["left1","left2","mid","right1","right2"],V=>(a(),b(O,{key:V},[w.level[V]?(a(),_(g,{key:0,cols:s(w,V),class:U(x(w.level[V]))},{default:i(()=>[(a(),_(ne(m(w.level[V])),{el:w[V],iconmap:c.iconmap,devices:c.devices},null,8,["el","iconmap","devices"]))]),_:2},1032,["cols","class"])):v("",!0),h(w,V)?(a(),_(u,{key:1,vertical:""})):v("",!0)],64))),64)),h(w,"level")?(a(),_(u,{key:0})):v("",!0)]),_:2},1024)):v("",!0)]),_:2},1024)]))),128)}}},ve={key:1},de={key:3},me={key:1},fe={key:3},pe={key:1},_e={key:3},he={__name:"PanelCard",props:{panel:Object},setup(c){const n=S(),s=c;function x(k){let d=n.handleDefs(s.panel.status[k],["level","color","min","max","reverse"],[0,"success",0,100,!1]);return d.level=Math.round((d.level-d.min)/(d.max-d.min)*100),d.reverse=!!d.reverse,d}const h=p(()=>x("bar")),o=p(()=>x("bar2")),m=p(()=>n.handleDefs(s.panel.status.imageUrl,["url"],[""])),t=p(()=>n.handleDefs(s.panel.status.title,["title"],[""])),e=p(()=>n.handleDefs(s.panel.panel.expandable,["expandable","expanded"],[!1,!1])),l=B(e.value.expanded),g=p(()=>{let k="";return e.value.expandable?k=l.value?"mdi-arrow-collapse":"mdi-arrow-expand":k="mdi-swap-vertical",k}),u=p(()=>{let k=[];for(const[d,j]of Object.entries(s.panel.main))n.handleDefs(j.level.show,["show"],[!0]).show&&k.push(Number(d));return k}),D=B(!1);function y(){D.value=!1}function w(){e.value.expandable?l.value=!l.value:D.value=!0}const z=p(()=>{let k=[],d=-1;return e.value.expandable?k=l.value?u.value:[u.value[0]]:D.value?(d=u.value.indexOf(z.value?z.value[0]:null),k=d===-1||d===u.value.length-1?[u.value[0]]:[u.value[d+1]],y()):k=[u.value[0]],k});function V(k){let d=n.handleDefs(s.panel.info[k],["text","icon","color"],["","",""]);return d.icon&&(d.icon=n.getIcon(d.icon,s.panel.panel.iconmap)),d}function J(){let k=!!($.value.text||A.value.text),d=!!(P.value.text||T.value.text),j=!!(R.value.text||E.value.text);return!k&&d&&!j?7:null}const $=p(()=>V("left1")),A=p(()=>V("left2")),P=p(()=>V("mid1")),T=p(()=>V("mid2")),R=p(()=>V("right1")),E=p(()=>V("right2"));return(k,d)=>{const j=r("v-progress-linear"),M=r("v-col"),N=r("v-row"),K=r("v-spacer"),Q=r("v-btn"),W=r("v-card-title"),X=r("v-img"),G=r("v-sheet"),Y=r("v-divider"),I=r("v-icon"),Z=r("v-card-text"),ee=r("v-card");return a(),_(ee,{variant:"tonal"},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[c.panel.status.bar?(a(),_(M,{key:0},{default:i(()=>[f(j,{height:"7",modelValue:h.value.level,"onUpdate:modelValue":d[0]||(d[0]=F=>h.value.level=F),color:h.value.color,reverse:h.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0),c.panel.status.bar2?(a(),_(M,{key:1},{default:i(()=>[f(j,{height:"7",modelValue:o.value.level,"onUpdate:modelValue":d[1]||(d[1]=F=>o.value.level=F),color:o.value.color,reverse:o.value.reverse},null,8,["modelValue","color","reverse"])]),_:1})):v("",!0)]),_:1}),f(G,{color:"secondary"},{default:i(()=>[f(X,{src:m.value.url,gradient:m.value.url?ae(n).app.header.imageGradient:"",height:"48",cover:""},{default:i(()=>[c.panel.status.title?(a(),_(W,{key:0},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[f(M,null,{default:i(()=>[q(C(t.value.title),1)]),_:1}),f(K),u.value.length>1?(a(),_(M,{key:0,cols:"1",class:"text-right"},{default:i(()=>[f(Q,{icon:g.value,size:"small",variant:"plain",density:"compact",onClick:w},null,8,["icon"])]),_:1})):v("",!0)]),_:1})]),_:1})):v("",!0)]),_:1},8,["src","gradient"])]),_:1}),f(Y),f(ie,{main:c.panel.main,levels:z.value,iconmap:c.panel.panel.iconmap,devices:c.panel.panel.devices},null,8,["main","levels","iconmap","devices"]),f(G,{color:"secondary"},{default:i(()=>[f(Z,{class:"pa-1"},{default:i(()=>[f(N,{"no-gutters":""},{default:i(()=>[f(M,{class:"text-truncate text-left"},{default:i(()=>[$.value.icon?(a(),_(I,{key:0,icon:$.value.icon,color:$.value.color,size:"small"},null,8,["icon","color"])):v("",!0),$.value.text?(a(),b("span",ve,C($.value.text),1)):v("",!0),A.value.icon?(a(),_(I,{key:2,icon:A.value.icon,color:A.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),A.value.text?(a(),b("span",de,C(A.value.text),1)):v("",!0)]),_:1}),f(M,{class:"text-truncate text-center",cols:J()},{default:i(()=>[P.value.icon?(a(),_(I,{key:0,icon:P.value.icon,color:P.value.color,size:"small"},null,8,["icon","color"])):v("",!0),P.value.text?(a(),b("span",me,C(P.value.text),1)):v("",!0),T.value.icon?(a(),_(I,{key:2,icon:T.value.icon,color:T.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),T.value.text?(a(),b("span",fe,C(T.value.text),1)):v("",!0)]),_:1},8,["cols"]),f(M,{class:"text-truncate text-right"},{default:i(()=>[R.value.icon?(a(),_(I,{key:0,icon:R.value.icon,color:R.value.color,size:"small"},null,8,["icon","color"])):v("",!0),R.value.text?(a(),b("span",pe,C(R.value.text),1)):v("",!0),E.value.icon?(a(),_(I,{key:2,icon:E.value.icon,color:E.value.color,size:"small",class:"ml-2"},null,8,["icon","color"])):v("",!0),E.value.text?(a(),b("span",_e,C(E.value.text),1)):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{he as _};
