{"version":3,"file":"VConfirmEdit.spec.cy.mjs","names":["VConfirmEdit","ref","describe","it","externalModel","cy","mount","_createVNode","value","default","_ref","model","get","should","then","only","$event","_ref2","_Fragment","join","onClick","push","_createTextVNode","click","expect","to","deep","equal","contains","_ref3","_ref4","actions","_ref5"],"sources":["../../../../src/labs/VConfirmEdit/__test__/VConfirmEdit.spec.cy.tsx"],"sourcesContent":["/// <reference types=\"../../../../types/cypress\" />\n\nimport { VConfirmEdit } from '..'\n\n// Utilities\nimport { ref } from 'vue'\n\n// Tests\ndescribe('VConfirmEdit', () => {\n  it('mirrors external updates', () => {\n    const externalModel = ref('foo')\n\n    cy.mount(() => (\n      <VConfirmEdit modelValue={ externalModel.value }>\n        { ({ model }) => (\n          <p>{ model.value }</p>\n        )}\n      </VConfirmEdit>\n    )).get('p')\n      .should('have.text', 'foo')\n      .then(() => {\n        externalModel.value = 'bar'\n      })\n      .get('p')\n      .should('have.text', 'bar')\n  })\n  it.only(`doesn't mutate the original value`, () => {\n    const externalModel = ref(['foo'])\n\n    cy.mount(\n      <VConfirmEdit v-model={ externalModel.value } modelValue={ externalModel.value }>\n        { ({ model }) => (\n          <>\n            <p>{ model.value.join(',') }</p>\n            <button data-test=\"push\" onClick={ () => model.value.push('bar') }>Push</button>\n          </>\n        )}\n      </VConfirmEdit>\n    ).get('p')\n      .should('have.text', 'foo')\n      .get('[data-test=\"push\"]').click()\n      .get('p')\n      .should('have.text', 'foo,bar')\n      .then(() => {\n        expect(externalModel.value).to.deep.equal(['foo'])\n      })\n    cy.contains('.v-btn', 'OK').click()\n    cy.get('p')\n      .should('have.text', 'foo,bar')\n      .then(() => {\n        expect(externalModel.value).to.deep.equal(['foo', 'bar'])\n      })\n  })\n  it('hides actions if used from the slot', () => {\n    cy.mount(\n      <VConfirmEdit></VConfirmEdit>\n    ).get('.v-btn').should('have.length', 2)\n\n    cy.mount(\n      <VConfirmEdit>\n        { ({ model }) => {\n          void model\n        }}\n      </VConfirmEdit>\n    ).get('.v-btn').should('have.length', 2)\n\n    cy.mount(\n      <VConfirmEdit>\n        { ({ actions }) => {\n          void actions\n        }}\n      </VConfirmEdit>\n    ).get('.v-btn').should('have.length', 0)\n\n    cy.mount(\n      <VConfirmEdit>\n        { ({ actions }) => actions }\n      </VConfirmEdit>\n    ).get('.v-btn').should('have.length', 2)\n  })\n})\n"],"mappings":"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"}