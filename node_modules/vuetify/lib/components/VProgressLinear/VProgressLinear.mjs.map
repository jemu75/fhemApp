{"version":3,"file":"VProgressLinear.mjs","names":["useBackgroundColor","useTextColor","makeComponentProps","useIntersectionObserver","useRtl","makeLocationProps","useLocation","useProxiedModel","makeRoundedProps","useRounded","makeTagProps","makeThemeProps","provideTheme","computed","Transition","convertToUnit","genericComponent","propsFactory","useRender","makeVProgressLinearProps","absolute","Boolean","active","type","default","bgColor","String","bgOpacity","Number","bufferValue","clickable","color","height","indeterminate","max","modelValue","reverse","stream","striped","roundedBar","location","VProgressLinear","name","props","emits","value","setup","_ref","slots","progress","isRtl","rtlClasses","themeClasses","locationStyles","textColorClasses","textColorStyles","backgroundColorClasses","backgroundColorStyles","barColorClasses","barColorStyles","roundedClasses","intersectionRef","isIntersecting","parseInt","normalizedBuffer","parseFloat","normalizedValue","isReversed","transition","opacity","handleClick","e","left","right","width","getBoundingClientRect","clientX","Math","round","_createVNode","tag","rounded","class","bottom","undefined","top","style","borderTop","map","bar","buffer"],"sources":["../../../src/components/VProgressLinear/VProgressLinear.tsx"],"sourcesContent":["// Styles\nimport './VProgressLinear.sass'\n\n// Composables\nimport { useBackgroundColor, useTextColor } from '@/composables/color'\nimport { makeComponentProps } from '@/composables/component'\nimport { useIntersectionObserver } from '@/composables/intersectionObserver'\nimport { useRtl } from '@/composables/locale'\nimport { makeLocationProps, useLocation } from '@/composables/location'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { makeRoundedProps, useRounded } from '@/composables/rounded'\nimport { makeTagProps } from '@/composables/tag'\nimport { makeThemeProps, provideTheme } from '@/composables/theme'\n\n// Utilities\nimport { computed, Transition } from 'vue'\nimport { convertToUnit, genericComponent, propsFactory, useRender } from '@/util'\n\ntype VProgressLinearSlots = {\n  default: { value: number, buffer: number }\n}\n\nexport const makeVProgressLinearProps = propsFactory({\n  absolute: Boolean,\n  active: {\n    type: Boolean,\n    default: true,\n  },\n  bgColor: String,\n  bgOpacity: [Number, String],\n  bufferValue: {\n    type: [Number, String],\n    default: 0,\n  },\n  clickable: Boolean,\n  color: String,\n  height: {\n    type: [Number, String],\n    default: 4,\n  },\n  indeterminate: Boolean,\n  max: {\n    type: [Number, String],\n    default: 100,\n  },\n  modelValue: {\n    type: [Number, String],\n    default: 0,\n  },\n  reverse: Boolean,\n  stream: Boolean,\n  striped: Boolean,\n  roundedBar: Boolean,\n\n  ...makeComponentProps(),\n  ...makeLocationProps({ location: 'top' } as const),\n  ...makeRoundedProps(),\n  ...makeTagProps(),\n  ...makeThemeProps(),\n}, 'VProgressLinear')\n\nexport const VProgressLinear = genericComponent<VProgressLinearSlots>()({\n  name: 'VProgressLinear',\n\n  props: makeVProgressLinearProps(),\n\n  emits: {\n    'update:modelValue': (value: number) => true,\n  },\n\n  setup (props, { slots }) {\n    const progress = useProxiedModel(props, 'modelValue')\n    const { isRtl, rtlClasses } = useRtl()\n    const { themeClasses } = provideTheme(props)\n    const { locationStyles } = useLocation(props)\n    const { textColorClasses, textColorStyles } = useTextColor(props, 'color')\n    const { backgroundColorClasses, backgroundColorStyles } = useBackgroundColor(computed(() => props.bgColor || props.color))\n    const { backgroundColorClasses: barColorClasses, backgroundColorStyles: barColorStyles } = useBackgroundColor(props, 'color')\n    const { roundedClasses } = useRounded(props)\n    const { intersectionRef, isIntersecting } = useIntersectionObserver()\n\n    const max = computed(() => parseInt(props.max, 10))\n    const height = computed(() => parseInt(props.height, 10))\n    const normalizedBuffer = computed(() => parseFloat(props.bufferValue) / max.value * 100)\n    const normalizedValue = computed(() => parseFloat(progress.value) / max.value * 100)\n    const isReversed = computed(() => isRtl.value !== props.reverse)\n    const transition = computed(() => props.indeterminate ? 'fade-transition' : 'slide-x-transition')\n    const opacity = computed(() => {\n      return props.bgOpacity == null\n        ? props.bgOpacity\n        : parseFloat(props.bgOpacity)\n    })\n\n    function handleClick (e: MouseEvent) {\n      if (!intersectionRef.value) return\n\n      const { left, right, width } = intersectionRef.value.getBoundingClientRect()\n      const value = isReversed.value ? (width - e.clientX) + (right - width) : e.clientX - left\n\n      progress.value = Math.round(value / width * max.value)\n    }\n\n    useRender(() => (\n      <props.tag\n        ref={ intersectionRef }\n        class={[\n          'v-progress-linear',\n          {\n            'v-progress-linear--absolute': props.absolute,\n            'v-progress-linear--active': props.active && isIntersecting.value,\n            'v-progress-linear--reverse': isReversed.value,\n            'v-progress-linear--rounded': props.rounded,\n            'v-progress-linear--rounded-bar': props.roundedBar,\n            'v-progress-linear--striped': props.striped,\n          },\n          roundedClasses.value,\n          themeClasses.value,\n          rtlClasses.value,\n          props.class,\n        ]}\n        style={[\n          {\n            bottom: props.location === 'bottom' ? 0 : undefined,\n            top: props.location === 'top' ? 0 : undefined,\n            height: props.active ? convertToUnit(height.value) : 0,\n            '--v-progress-linear-height': convertToUnit(height.value),\n            ...locationStyles.value,\n          },\n          props.style,\n        ]}\n        role=\"progressbar\"\n        aria-hidden={ props.active ? 'false' : 'true' }\n        aria-valuemin=\"0\"\n        aria-valuemax={ props.max }\n        aria-valuenow={ props.indeterminate ? undefined : normalizedValue.value }\n        onClick={ props.clickable && handleClick }\n      >\n        { props.stream && (\n          <div\n            key=\"stream\"\n            class={[\n              'v-progress-linear__stream',\n              textColorClasses.value,\n            ]}\n            style={{\n              ...textColorStyles.value,\n              [isReversed.value ? 'left' : 'right']: convertToUnit(-height.value),\n              borderTop: `${convertToUnit(height.value / 2)} dotted`,\n              opacity: opacity.value,\n              top: `calc(50% - ${convertToUnit(height.value / 4)})`,\n              width: convertToUnit(100 - normalizedBuffer.value, '%'),\n              '--v-progress-linear-stream-to': convertToUnit(height.value * (isReversed.value ? 1 : -1)),\n            }}\n          />\n        )}\n\n        <div\n          class={[\n            'v-progress-linear__background',\n            backgroundColorClasses.value,\n          ]}\n          style={[\n            backgroundColorStyles.value,\n            {\n              opacity: opacity.value,\n              width: convertToUnit((!props.stream ? 100 : normalizedBuffer.value), '%'),\n            },\n          ]}\n        />\n\n        <Transition name={ transition.value }>\n          { !props.indeterminate ? (\n            <div\n              class={[\n                'v-progress-linear__determinate',\n                barColorClasses.value,\n              ]}\n              style={[\n                barColorStyles.value,\n                { width: convertToUnit(normalizedValue.value, '%') },\n              ]}\n            />\n          ) : (\n            <div class=\"v-progress-linear__indeterminate\">\n              {['long', 'short'].map(bar => (\n                <div\n                  key={ bar }\n                  class={[\n                    'v-progress-linear__indeterminate',\n                    bar,\n                    barColorClasses.value,\n                  ]}\n                  style={ barColorStyles.value }\n                />\n              ))}\n            </div>\n          )}\n        </Transition>\n\n        { slots.default && (\n          <div class=\"v-progress-linear__content\">\n            { slots.default({ value: normalizedValue.value, buffer: normalizedBuffer.value }) }\n          </div>\n        )}\n      </props.tag>\n    ))\n\n    return {}\n  },\n})\n\nexport type VProgressLinear = InstanceType<typeof VProgressLinear>\n"],"mappings":"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"}